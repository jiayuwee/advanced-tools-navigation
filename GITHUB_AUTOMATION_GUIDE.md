# ğŸš€ GitHub Actions è‡ªåŠ¨åŒ–éƒ¨ç½²æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬é¡¹ç›®å·²é…ç½®å®Œæ•´çš„ GitHub Actions è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹ï¼Œæ”¯æŒï¼š
- ğŸ—„ï¸ Supabase æ•°æ®åº“è‡ªåŠ¨è¿ç§»
- ğŸŒ å‰ç«¯åº”ç”¨è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²
- ğŸ” éƒ¨ç½²å‰ç¯å¢ƒæ£€æŸ¥
- ğŸ“Š éƒ¨ç½²åçŠ¶æ€éªŒè¯
- ğŸ”” éƒ¨ç½²ç»“æœé€šçŸ¥

## âœ… å·²å®Œæˆçš„é…ç½®

### 1. GitHub Actions å·¥ä½œæµ
- âœ… **supabase-deploy.yml** - å®Œæ•´çš„ Supabase éƒ¨ç½²æµç¨‹
- âœ… **deploy.yml** - å‰ç«¯åº”ç”¨éƒ¨ç½²æµç¨‹
- âœ… **ci.yml** - æŒç»­é›†æˆæ£€æŸ¥

### 2. è‡ªåŠ¨åŒ–è„šæœ¬
- âœ… **check-deployment-status.js** - éƒ¨ç½²çŠ¶æ€æ£€æŸ¥
- âœ… **trigger-deployment.js** - æ‰‹åŠ¨è§¦å‘éƒ¨ç½²
- âœ… **verify-deployment.js** - éƒ¨ç½²éªŒè¯
- âœ… **setup-supabase-auto.ps1** - æœ¬åœ°è‡ªåŠ¨åŒ–è®¾ç½®

### 3. é…ç½®æ–‡æ¡£
- âœ… **docs/GITHUB_SECRETS_SETUP.md** - Secrets é…ç½®æŒ‡å—
- âœ… **docs/SUPABASE_SETUP.md** - Supabase è®¾ç½®æŒ‡å—
- âœ… **DEPLOYMENT_STATUS.md** - éƒ¨ç½²çŠ¶æ€æ€»è§ˆ

## ğŸ” å¿…éœ€çš„ GitHub Secrets

åœ¨ä»“åº“è®¾ç½®ä¸­éœ€è¦é…ç½®ä»¥ä¸‹ Secretsï¼š

| Secret åç§° | ç”¨é€” | è·å–æ–¹å¼ |
|------------|------|----------|
| `SUPABASE_ACCESS_TOKEN` | Supabase CLI è®¤è¯ | [Supabase Dashboard](https://supabase.com/dashboard/account/tokens) |
| `SUPABASE_PROJECT_REF` | é¡¹ç›®æ ‡è¯†ç¬¦ | Supabase é¡¹ç›®è®¾ç½®é¡µé¢ |
| `VITE_SUPABASE_URL` | å‰ç«¯è¿æ¥åœ°å€ | Supabase é¡¹ç›® API è®¾ç½® |
| `VITE_SUPABASE_ANON_KEY` | å‰ç«¯åŒ¿åå¯†é’¥ | Supabase é¡¹ç›® API è®¾ç½® |

### é…ç½®æ­¥éª¤
1. è®¿é—® `https://github.com/jiayuwee/advanced-tools-navigation/settings/secrets/actions`
2. ç‚¹å‡» "New repository secret"
3. æ·»åŠ ä¸Šè¿°æ‰€æœ‰ secrets

## ğŸš€ éƒ¨ç½²è§¦å‘æ–¹å¼

### 1. è‡ªåŠ¨è§¦å‘
- **æ¨é€åˆ° main åˆ†æ”¯**ï¼šè‡ªåŠ¨è§¦å‘å®Œæ•´éƒ¨ç½²
- **ä¿®æ”¹ supabase/ ç›®å½•**ï¼šè§¦å‘æ•°æ®åº“è¿ç§»
- **ä¿®æ”¹å·¥ä½œæµæ–‡ä»¶**ï¼šè§¦å‘ç›¸åº”çš„éƒ¨ç½²æµç¨‹

### 2. æ‰‹åŠ¨è§¦å‘
```bash
# æ–¹å¼ 1: é€šè¿‡ GitHub ç½‘é¡µç•Œé¢
# è®¿é—®: https://github.com/jiayuwee/advanced-tools-navigation/actions
# é€‰æ‹© "Deploy to Supabase" å·¥ä½œæµ
# ç‚¹å‡» "Run workflow"

# æ–¹å¼ 2: é€šè¿‡è„šæœ¬è§¦å‘
npm run deployment:trigger

# æ–¹å¼ 3: é€šè¿‡ GitHub CLI
gh workflow run "Deploy to Supabase"
```

### 3. å¼ºåˆ¶éƒ¨ç½²
åœ¨æ‰‹åŠ¨è§¦å‘æ—¶å¯ä»¥é€‰æ‹©ï¼š
- **å¼ºåˆ¶éƒ¨ç½²**ï¼šè·³è¿‡ç¯å¢ƒæ£€æŸ¥
- **æŒ‡å®šç¯å¢ƒ**ï¼šproduction æˆ– staging

## ğŸ“Š ç›‘æ§å’Œæ£€æŸ¥

### éƒ¨ç½²çŠ¶æ€æ£€æŸ¥
```bash
# æ£€æŸ¥æœ€è¿‘çš„éƒ¨ç½²çŠ¶æ€
npm run deployment:status

# éªŒè¯ Supabase è¿æ¥
npm run supabase:verify

# æ£€æŸ¥æœ¬åœ°ç¯å¢ƒ
npm run supabase:status
```

### å®æ—¶ç›‘æ§
- **Actions é¡µé¢**ï¼šhttps://github.com/jiayuwee/advanced-tools-navigation/actions
- **éƒ¨ç½²å†å²**ï¼šæŸ¥çœ‹æ‰€æœ‰éƒ¨ç½²è®°å½•å’Œæ—¥å¿—
- **å®æ—¶æ—¥å¿—**ï¼šç‚¹å‡»è¿è¡Œä¸­çš„å·¥ä½œæµæŸ¥çœ‹è¯¦ç»†è¿›åº¦

## ğŸ”„ éƒ¨ç½²æµç¨‹

### å®Œæ•´éƒ¨ç½²æµç¨‹
1. **ç¯å¢ƒæ£€æŸ¥** (30ç§’)
   - éªŒè¯ GitHub Secrets é…ç½®
   - æ£€æŸ¥å‰ç«¯å’Œåç«¯ç¯å¢ƒå˜é‡

2. **æ•°æ®åº“éƒ¨ç½²** (2-3åˆ†é’Ÿ)
   - é“¾æ¥ Supabase é¡¹ç›®
   - è¿è¡Œæ•°æ®åº“è¿ç§»
   - éƒ¨ç½² Edge Functionsï¼ˆå¦‚æœ‰ï¼‰
   - éªŒè¯éƒ¨ç½²çŠ¶æ€

3. **å‰ç«¯éƒ¨ç½²** (3-5åˆ†é’Ÿ)
   - å®‰è£…ä¾èµ–
   - ä»£ç æ£€æŸ¥å’Œç±»å‹éªŒè¯
   - æ„å»ºç”Ÿäº§ç‰ˆæœ¬
   - éªŒè¯æ„å»ºè¾“å‡º

4. **éƒ¨ç½²åéªŒè¯** (1åˆ†é’Ÿ)
   - ç”Ÿæˆéƒ¨ç½²æŠ¥å‘Š
   - æµ‹è¯•ç«™ç‚¹å¯ç”¨æ€§
   - å‘é€çŠ¶æ€é€šçŸ¥

### æ€»è€—æ—¶ï¼šçº¦ 6-9 åˆ†é’Ÿ

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. Secrets æœªé…ç½®**
```
âŒ é”™è¯¯ï¼šsecrets not configured
âœ… è§£å†³ï¼šæ£€æŸ¥ GitHub Secrets è®¾ç½®
```

**2. æ•°æ®åº“è¿æ¥å¤±è´¥**
```
âŒ é”™è¯¯ï¼šproject link failed
âœ… è§£å†³ï¼šéªŒè¯ SUPABASE_PROJECT_REF å’Œ ACCESS_TOKEN
```

**3. å‰ç«¯æ„å»ºå¤±è´¥**
```
âŒ é”™è¯¯ï¼šbuild failed
âœ… è§£å†³ï¼šæ£€æŸ¥ VITE_SUPABASE_URL å’Œ ANON_KEY
```

**4. è¿ç§»å¤±è´¥**
```
âŒ é”™è¯¯ï¼šmigration failed
âœ… è§£å†³ï¼šæ£€æŸ¥ SQL è¯­æ³•å’Œæ•°æ®åº“æƒé™
```

### è°ƒè¯•æ­¥éª¤
1. **æŸ¥çœ‹è¯¦ç»†æ—¥å¿—**ï¼šç‚¹å‡»å¤±è´¥çš„å·¥ä½œæµæ­¥éª¤
2. **æœ¬åœ°æµ‹è¯•**ï¼šè¿è¡Œ `npm run supabase:verify`
3. **æ£€æŸ¥é…ç½®**ï¼šè¿è¡Œ `npm run deployment:status`
4. **é‡æ–°è§¦å‘**ï¼šä½¿ç”¨å¼ºåˆ¶éƒ¨ç½²é€‰é¡¹

## ğŸ“ˆ éƒ¨ç½²ç»Ÿè®¡

### æˆåŠŸç‡ç›‘æ§
- æŸ¥çœ‹ Actions é¡µé¢çš„æˆåŠŸ/å¤±è´¥ç»Ÿè®¡
- ç›‘æ§éƒ¨ç½²æ—¶é—´è¶‹åŠ¿
- è·Ÿè¸ªé”™è¯¯æ¨¡å¼

### æ€§èƒ½æŒ‡æ ‡
- **å¹³å‡éƒ¨ç½²æ—¶é—´**ï¼š6-9 åˆ†é’Ÿ
- **æ•°æ®åº“è¿ç§»**ï¼šé€šå¸¸ < 2 åˆ†é’Ÿ
- **å‰ç«¯æ„å»º**ï¼šé€šå¸¸ < 5 åˆ†é’Ÿ
- **ç«™ç‚¹å¯ç”¨æ€§**ï¼šéƒ¨ç½²å 30 ç§’å†…

## ğŸ”§ é«˜çº§é…ç½®

### ç¯å¢ƒå˜é‡
```bash
# å¯é€‰çš„ç¯å¢ƒå˜é‡
GITHUB_TOKEN=ghp_xxx  # ç”¨äºè„šæœ¬è§¦å‘éƒ¨ç½²
NODE_ENV=production   # æ„å»ºç¯å¢ƒ
VITE_DEV_MODE=false   # å¼€å‘æ¨¡å¼å¼€å…³
```

### è‡ªå®šä¹‰è§¦å‘æ¡ä»¶
å¯ä»¥ä¿®æ”¹ `.github/workflows/supabase-deploy.yml` ä¸­çš„è§¦å‘æ¡ä»¶ï¼š
```yaml
on:
  push:
    branches: [main, develop]  # æ·»åŠ æ›´å¤šåˆ†æ”¯
    paths:
      - 'supabase/**'
      - 'src/**'              # æ·»åŠ æ›´å¤šè·¯å¾„
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [GitHub Actions æ–‡æ¡£](https://docs.github.com/en/actions)
- [Supabase CLI æ–‡æ¡£](https://supabase.com/docs/reference/cli)
- [Netlify éƒ¨ç½²æ–‡æ¡£](https://docs.netlify.com/)

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **é…ç½® GitHub Secrets**ï¼ˆå¦‚æœªå®Œæˆï¼‰
2. **æµ‹è¯•æ‰‹åŠ¨éƒ¨ç½²**ï¼š`npm run deployment:trigger`
3. **ç›‘æ§è‡ªåŠ¨éƒ¨ç½²**ï¼šæ¨é€ä»£ç åˆ° main åˆ†æ”¯
4. **è®¾ç½®é€šçŸ¥**ï¼šé…ç½® GitHub é€šçŸ¥æˆ–é›†æˆ Slack/Discord

---

**çŠ¶æ€**: âœ… è‡ªåŠ¨åŒ–éƒ¨ç½²å·²å®Œå…¨é…ç½®
**æœ€åæ›´æ–°**: 2025-06-25
**ç»´æŠ¤è€…**: jiayuwee
