# æœç´¢ç»“æœè§†å›¾é¡µé¢æ¶æ„è®¾è®¡ä¸ä¸šåŠ¡é€»è¾‘æ–‡æ¡£

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [SearchResultsView.vue](file://src/views/SearchResultsView.vue)
- [EnhancedSearchBox.vue](file://src/components/search/EnhancedSearchBox.vue)
- [AdvancedSearchPanel.vue](file://src/components/search/AdvancedSearchPanel.vue)
- [searchService.ts](file://src/services/searchService.ts)
- [products.ts](file://src/stores/products.ts)
- [useAdvancedSearch.ts](file://src/composables/useAdvancedSearch.ts)
- [index.ts](file://src/router/index.ts)
</cite>

## ç›®å½•
1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æ ¸å¿ƒç»„ä»¶æ¶æ„](#æ ¸å¿ƒç»„ä»¶æ¶æ„)
3. [æœç´¢æµç¨‹åˆ†æ](#æœç´¢æµç¨‹åˆ†æ)
4. [çŠ¶æ€ç®¡ç†ä¸æ•°æ®æµ](#çŠ¶æ€ç®¡ç†ä¸æ•°æ®æµ)
5. [ç»„ä»¶äº¤äº’æœºåˆ¶](#ç»„ä»¶äº¤äº’æœºåˆ¶)
6. [æœç´¢æœåŠ¡å®ç°](#æœç´¢æœåŠ¡å®ç°)
7. [è·¯ç”±ä¸å¯¼èˆª](#è·¯ç”±ä¸å¯¼èˆª)
8. [æ€§èƒ½ä¼˜åŒ–ç­–ç•¥](#æ€§èƒ½ä¼˜åŒ–ç­–ç•¥)
9. [é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ](#é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ)
10. [æ‰©å±•æ€§è®¾è®¡](#æ‰©å±•æ€§è®¾è®¡)

## é¡¹ç›®æ¦‚è¿°

SearchResultsView.vueæ˜¯ç°ä»£Webåº”ç”¨ä¸­çš„æ ¸å¿ƒæœç´¢åŠŸèƒ½æ¨¡å—ï¼Œè´Ÿè´£åè°ƒå¤šä¸ªæœç´¢ç»„ä»¶ï¼Œç»Ÿä¸€å¤„ç†ç”¨æˆ·å‘èµ·çš„æœç´¢è¯·æ±‚ï¼Œå¹¶æä¾›ä¸°å¯Œçš„æœç´¢ç»“æœå±•ç¤ºå’Œäº¤äº’ä½“éªŒã€‚è¯¥é¡µé¢é‡‡ç”¨Vue 3 Composition APIè®¾è®¡ï¼Œé›†æˆäº†å…ˆè¿›çš„æœç´¢æŠ€æœ¯å’ŒæœåŠ¡æ¶æ„ã€‚

### ä¸»è¦åŠŸèƒ½ç‰¹æ€§

- **å¤šç»´åº¦æœç´¢**ï¼šæ”¯æŒå·¥å…·ã€äº§å“ã€åˆ†ç±»ç­‰å¤šç§ç±»å‹çš„æœç´¢
- **æ™ºèƒ½æœç´¢å»ºè®®**ï¼šåŸºäºç”¨æˆ·è¾“å…¥æä¾›å®æ—¶æœç´¢å»ºè®®
- **é«˜çº§ç­›é€‰**ï¼šæ”¯æŒå¤šæ¡ä»¶ç­›é€‰å’Œæ’åº
- **åˆ†é¢å¯¼èˆª**ï¼šæä¾›å¤šç»´åº¦çš„æ•°æ®èšåˆå±•ç¤º
- **å“åº”å¼è®¾è®¡**ï¼šé€‚é…ä¸åŒè®¾å¤‡å’Œå±å¹•å°ºå¯¸
- **SEOä¼˜åŒ–**ï¼šæ”¯æŒæœç´¢å¼•æ“ä¼˜åŒ–å’Œå‹å¥½çš„å…ƒæ•°æ®ç®¡ç†

## æ ¸å¿ƒç»„ä»¶æ¶æ„

```mermaid
graph TB
subgraph "æœç´¢ç»“æœè§†å›¾å±‚"
SRV[SearchResultsView.vue]
end
subgraph "æœç´¢ç»„ä»¶å±‚"
ESB[EnhancedSearchBox]
ASP[AdvancedSearchPanel]
end
subgraph "æœåŠ¡å±‚"
SS[searchService]
PS[productsService]
TS[toolsService]
end
subgraph "çŠ¶æ€ç®¡ç†å±‚"
PDS[products.ts]
TSS[tools.ts]
AST[auth.ts]
end
subgraph "æ•°æ®å­˜å‚¨å±‚"
SUP[Supabaseæ•°æ®åº“]
CACHE[ç¼“å­˜ç³»ç»Ÿ]
end
SRV --> ESB
SRV --> ASP
ESB --> SS
SS --> PS
SS --> TS
PS --> PDS
TS --> TSS
PDS --> SUP
TSS --> SUP
AST --> SUP
```

**å›¾è¡¨æ¥æº**
- [SearchResultsView.vue](file://src/views/SearchResultsView.vue#L1-L571)
- [EnhancedSearchBox.vue](file://src/components/search/EnhancedSearchBox.vue#L1-L1024)
- [searchService.ts](file://src/services/searchService.ts#L1-L641)

### ç»„ä»¶å±‚æ¬¡ç»“æ„

```mermaid
classDiagram
class SearchResultsView {
+ref~string~ searchQuery
+ref~boolean~ loading
+ref~string~ error
+ref~SearchResult~ searchResult
+ref~string~ currentType
+computed~Tool[]~ toolResults
+computed~Product[]~ productResults
+performSearch() Promise~void~
+handleNewSearch(result) void
+searchSuggestion(suggestion) void
+filterResults() void
+openTool(tool) void
+openProduct(product) void
}
class EnhancedSearchBox {
+ref~string~ query
+ref~string~ searchType
+ref~boolean~ isFocused
+ref~boolean~ showSuggestions
+ref~SearchSuggestion[]~ suggestions
+ref~SearchHistory[]~ searchHistory
+ref~SearchFilters~ filters
+performSearch() Promise~void~
+loadSuggestions() Promise~void~
+selectSuggestion(text) void
+clearSearch() void
}
class AdvancedSearchPanel {
+ref~boolean~ isOpen
+ref~SearchFilters~ filters
+ref~string[]~ searchHistory
+ref~string[]~ popularSearches
+ref~string~ tagInput
+computed~Category[]~ categories
+computed~string[]~ popularTags
+toggleTag(tag) void
+addCustomTag() void
+removeTag(tag) void
+applyFilters() void
+resetFilters() void
}
class SearchService {
+search(options) Promise~SearchResult~
+searchTools(options) Promise~SearchResult~
+searchProducts(options) Promise~SearchResult~
+searchCategories(options) Promise~SearchResult~
+generateSuggestions(query) Promise~string[]~
+addToHistory(query, type) void
}
SearchResultsView --> EnhancedSearchBox : "ä½¿ç”¨"
SearchResultsView --> AdvancedSearchPanel : "ä½¿ç”¨"
EnhancedSearchBox --> SearchService : "è°ƒç”¨"
AdvancedSearchPanel --> SearchService : "è°ƒç”¨"
```

**å›¾è¡¨æ¥æº**
- [SearchResultsView.vue](file://src/views/SearchResultsView.vue#L150-L285)
- [EnhancedSearchBox.vue](file://src/components/search/EnhancedSearchBox.vue#L200-L400)
- [searchService.ts](file://src/services/searchService.ts#L30-L100)

**ç« èŠ‚æ¥æº**
- [SearchResultsView.vue](file://src/views/SearchResultsView.vue#L1-L571)
- [EnhancedSearchBox.vue](file://src/components/search/EnhancedSearchBox.vue#L1-L1024)
- [AdvancedSearchPanel.vue](file://src/components/search/AdvancedSearchPanel.vue#L1-L596)

## æœç´¢æµç¨‹åˆ†æ

### å®Œæ•´æœç´¢æµç¨‹

```mermaid
sequenceDiagram
participant User as ç”¨æˆ·
participant ESB as EnhancedSearchBox
participant SRV as SearchResultsView
participant SS as searchService
participant DB as Supabaseæ•°æ®åº“
User->>ESB : è¾“å…¥æœç´¢å…³é”®è¯
ESB->>ESB : è§¦å‘æœç´¢å»ºè®®åŠ è½½
ESB->>SS : è·å–æ™ºèƒ½æœç´¢å»ºè®®
SS->>DB : æŸ¥è¯¢ç›¸å…³å»ºè®®
DB-->>SS : è¿”å›å»ºè®®æ•°æ®
SS-->>ESB : è¿”å›æœç´¢å»ºè®®
ESB-->>User : æ˜¾ç¤ºå»ºè®®åˆ—è¡¨
User->>ESB : æäº¤æœç´¢è¯·æ±‚
ESB->>SS : æ‰§è¡Œæœç´¢æŸ¥è¯¢
SS->>DB : æ‰§è¡Œå…¨æ–‡æœç´¢
DB-->>SS : è¿”å›æœç´¢ç»“æœ
SS->>SS : ç”Ÿæˆæœç´¢å»ºè®®
SS->>SS : è®°å½•æœç´¢å†å²
SS-->>SRV : è¿”å›å®Œæ•´æœç´¢ç»“æœ
SRV->>SRV : æ›´æ–°UIçŠ¶æ€
SRV-->>User : å±•ç¤ºæœç´¢ç»“æœ
Note over User,DB : æ”¯æŒå·¥å…·ã€äº§å“ã€åˆ†ç±»ç­‰å¤šç±»å‹æœç´¢
```

**å›¾è¡¨æ¥æº**
- [EnhancedSearchBox.vue](file://src/components/search/EnhancedSearchBox.vue#L300-L400)
- [SearchResultsView.vue](file://src/views/SearchResultsView.vue#L150-L200)
- [searchService.ts](file://src/services/searchService.ts#L50-L150)

### æœç´¢ç±»å‹å¤„ç†æœºåˆ¶

SearchResultsViewæ”¯æŒå››ç§ä¸»è¦çš„æœç´¢ç±»å‹ï¼š

1. **å…¨éƒ¨ç±»å‹ (all)**ï¼šç»¼åˆæœç´¢å·¥å…·ã€äº§å“å’Œåˆ†ç±»
2. **å·¥å…· (tools)**ï¼šä¸“é—¨æœç´¢å·¥å…·ä¿¡æ¯
3. **äº§å“ (products)**ï¼šä¸“é—¨æœç´¢äº§å“ä¿¡æ¯
4. **åˆ†ç±» (categories)**ï¼šä¸“é—¨æœç´¢åˆ†ç±»ä¿¡æ¯

æ¯ç§ç±»å‹éƒ½æœ‰å¯¹åº”çš„å¤„ç†é€»è¾‘å’Œæ•°æ®è¿‡æ»¤æœºåˆ¶ï¼š

```typescript
// ç±»å‹è¿‡æ»¤é€»è¾‘
const toolResults = computed(() => {
  if (!searchResult.value) return [];
  return searchResult.value.items.filter(
    (item) =>
      item.type === "tool" ||
      !item.type ||
      item.hasOwnProperty("clickCount") ||
      item.hasOwnProperty("category_id"),
  );
});

const productResults = computed(() => {
  if (!searchResult.value) return [];
  return searchResult.value.items.filter(
    (item) =>
      item.type === "product" ||
      item.hasOwnProperty("price") ||
      item.hasOwnProperty("rating"),
  );
});
```

**ç« èŠ‚æ¥æº**
- [SearchResultsView.vue](file://src/views/SearchResultsView.vue#L100-L150)
- [searchService.ts](file://src/services/searchService.ts#L50-L200)

## çŠ¶æ€ç®¡ç†ä¸æ•°æ®æµ

### Pinia Storeé›†æˆ

```mermaid
graph LR
subgraph "Pinia Storeä½“ç³»"
PDS[products.ts]
TSS[tools.ts]
AST[auth.ts]
CST[categories.ts]
end
subgraph "SearchResultsViewçŠ¶æ€"
SQ[searchQuery]
SL[loading]
SE[error]
SR[searchResult]
ST[currentType]
end
subgraph "ç»„ä»¶çŠ¶æ€åŒæ­¥"
ESBQ[ESB.query]
ESBS[ESB.searchType]
ASPT[ASP.filters]
end
PDS --> SQ
TSS --> SQ
AST --> SE
CST --> ASPT
SQ --> ESBQ
ST --> ESBS
SR --> ASPT
```

**å›¾è¡¨æ¥æº**
- [products.ts](file://src/stores/products.ts#L1-L365)
- [SearchResultsView.vue](file://src/views/SearchResultsView.vue#L150-L200)

### çŠ¶æ€åŒæ­¥æœºåˆ¶

SearchResultsViewé€šè¿‡ä»¥ä¸‹æœºåˆ¶ç¡®ä¿çŠ¶æ€çš„ä¸€è‡´æ€§ï¼š

1. **è·¯ç”±ç›‘å¬**ï¼šç›‘å¬è·¯ç”±å‚æ•°å˜åŒ–è‡ªåŠ¨æ›´æ–°æœç´¢çŠ¶æ€
2. **åŒå‘ç»‘å®š**ï¼šä¸EnhancedSearchBoxç»„ä»¶å»ºç«‹åŒå‘æ•°æ®ç»‘å®š
3. **äº‹ä»¶é€šä¿¡**ï¼šé€šè¿‡äº‹ä»¶æ€»çº¿ä¼ é€’æœç´¢ç»“æœå’ŒçŠ¶æ€å˜æ›´

```typescript
// è·¯ç”±ç›‘å¬æœºåˆ¶
watch(
  () => route.query,
  (newQuery) => {
    searchQuery.value = (newQuery.q as string) || "";
    currentType.value = (newQuery.type as string) || "all";

    if (searchQuery.value) {
      performSearch();
    }
  },
);
```

**ç« èŠ‚æ¥æº**
- [SearchResultsView.vue](file://src/views/SearchResultsView.vue#L250-L285)
- [products.ts](file://src/stores/products.ts#L100-L200)

## ç»„ä»¶äº¤äº’æœºåˆ¶

### EnhancedSearchBoxä¸SearchResultsViewçš„åä½œ

```mermaid
flowchart TD
Start([ç”¨æˆ·è¾“å…¥æœç´¢è¯]) --> ValidateInput{è¾“å…¥æœ‰æ•ˆ?}
ValidateInput --> |å¦| ShowError[æ˜¾ç¤ºé”™è¯¯æç¤º]
ValidateInput --> |æ˜¯| LoadSuggestions[åŠ è½½æœç´¢å»ºè®®]
LoadSuggestions --> SuggestionAvailable{æœ‰å»ºè®®?}
SuggestionAvailable --> |æ˜¯| ShowSuggestions[æ˜¾ç¤ºå»ºè®®åˆ—è¡¨]
SuggestionAvailable --> |å¦| PerformSearch[æ‰§è¡Œæœç´¢]
ShowSuggestions --> UserSelect{ç”¨æˆ·é€‰æ‹©?}
UserSelect --> |å»ºè®®| SelectSuggestion[é€‰æ‹©å»ºè®®]
UserSelect --> |ç›´æ¥æœç´¢| PerformSearch
SelectSuggestion --> UpdateQuery[æ›´æ–°æŸ¥è¯¢è¯]
PerformSearch --> CallSearchService[è°ƒç”¨searchService]
CallSearchService --> UpdateURL[æ›´æ–°URLå‚æ•°]
UpdateURL --> EmitResult[è§¦å‘æœç´¢äº‹ä»¶]
EmitResult --> UpdateView[æ›´æ–°æœç´¢ç»“æœè§†å›¾]
UpdateView --> End([å®Œæˆ])
ShowError --> End
```

**å›¾è¡¨æ¥æº**
- [EnhancedSearchBox.vue](file://src/components/search/EnhancedSearchBox.vue#L200-L400)
- [SearchResultsView.vue](file://src/views/SearchResultsView.vue#L200-L250)

### AdvancedSearchPanelé›†æˆ

AdvancedSearchPanelæä¾›äº†é«˜çº§ç­›é€‰åŠŸèƒ½ï¼Œä¸ä¸»æœç´¢ç»„ä»¶ååŒå·¥ä½œï¼š

1. **ç­›é€‰å™¨ç®¡ç†**ï¼šç»´æŠ¤å¤æ‚çš„ç­›é€‰æ¡ä»¶çŠ¶æ€
2. **å®æ—¶é¢„è§ˆ**ï¼šåœ¨åº”ç”¨ç­›é€‰å‰æä¾›ç»“æœé¢„è§ˆ
3. **å†å²è®°å½•**ï¼šä¿å­˜ç”¨æˆ·çš„ç­›é€‰å†å²
4. **çƒ­é—¨æ¨è**ï¼šåŸºäºç”¨æˆ·è¡Œä¸ºæ¨èç­›é€‰æ¡ä»¶

**ç« èŠ‚æ¥æº**
- [EnhancedSearchBox.vue](file://src/components/search/EnhancedSearchBox.vue#L400-L600)
- [AdvancedSearchPanel.vue](file://src/components/search/AdvancedSearchPanel.vue#L1-L596)

## æœç´¢æœåŠ¡å®ç°

### å¤šç±»å‹æœç´¢æ¶æ„

```mermaid
classDiagram
class SearchService {
+search(options) Promise~SearchResult~
+searchTools(options) Promise~SearchResult~
+searchProducts(options) Promise~SearchResult~
+searchCategories(options) Promise~SearchResult~
+generateSuggestions(query) Promise~string[]~
+addToHistory(query, type) void
-searchHistory SearchHistory[]
-popularQueries Map~string,number~
}
class SearchOptions {
+query string
+type "all"|"tools"|"products"|"categories"
+category string
+tags string[]
+priceRange [number,number]
+sortBy "relevance"|"name"|"created_at"|"click_count"|"price"
+sortOrder "asc"|"desc"
+limit number
+offset number
+includeInactive boolean
}
class SearchResult {
+items T[]
+total number
+query string
+suggestions string[]
+facets SearchFacets
+searchTime number
}
class SearchFacets {
+categories {name : string,count : number}[]
+tags {name : string,count : number}[]
+priceRanges {range : string,count : number}[]
}
SearchService --> SearchOptions : "ä½¿ç”¨"
SearchService --> SearchResult : "è¿”å›"
SearchResult --> SearchFacets : "åŒ…å«"
```

**å›¾è¡¨æ¥æº**
- [searchService.ts](file://src/services/searchService.ts#L1-L200)

### å…¨æ–‡æœç´¢å®ç°

searchServiceå®ç°äº†å¼ºå¤§çš„å…¨æ–‡æœç´¢åŠŸèƒ½ï¼Œæ”¯æŒå¤šå­—æ®µæ¨¡ç³ŠåŒ¹é…ï¼š

```typescript
// å…¨æ–‡æœç´¢æŸ¥è¯¢æ„å»º
if (query) {
  queryBuilder = queryBuilder.or(`
    name.ilike.%${query}%,
    description.ilike.%${query}%,
    meta_title.ilike.%${query}%,
    meta_description.ilike.%${query}%
  `);
}
```

### åˆ†é¢å¯¼èˆªæ•°æ®èšåˆ

åˆ†é¢å¯¼èˆªæä¾›äº†å¤šç»´åº¦çš„æ•°æ®èšåˆå±•ç¤ºï¼š

1. **åˆ†ç±»èšåˆ**ï¼šæŒ‰åˆ†ç±»ç»Ÿè®¡ç»“æœæ•°é‡
2. **æ ‡ç­¾èšåˆ**ï¼šæŒ‰æ ‡ç­¾ç»Ÿè®¡ç»“æœæ•°é‡
3. **ä»·æ ¼åŒºé—´**ï¼šæŒ‰ä»·æ ¼èŒƒå›´ç»Ÿè®¡ç»“æœæ•°é‡

**ç« èŠ‚æ¥æº**
- [searchService.ts](file://src/services/searchService.ts#L100-L300)

## è·¯ç”±ä¸å¯¼èˆª

### è·¯ç”±é…ç½®ä¸å‚æ•°ç®¡ç†

```mermaid
graph TD
subgraph "è·¯ç”±é…ç½®"
R1["/search<br/>SearchResults"]
R2["/tools<br/>ToolsView"]
R3["/products<br/>ProductsView"]
R4["/tools/:id<br/>ToolDetailView"]
R5["/product/:id<br/>ProductDetailView"]
end
subgraph "æœç´¢å‚æ•°"
Q[query - æœç´¢å…³é”®è¯]
T[type - æœç´¢ç±»å‹]
C[category - åˆ†ç±»ID]
TAG[tags - æ ‡ç­¾æ•°ç»„]
P[priceRange - ä»·æ ¼èŒƒå›´]
S[sortBy - æ’åºå­—æ®µ]
SO[sortOrder - æ’åºæ–¹å‘]
end
subgraph "çŠ¶æ€åŒæ­¥"
SRV[SearchResultsView]
ESB[EnhancedSearchBox]
R[Vue Router]
end
R1 --> SRV
SRV --> ESB
SRV --> R
ESB --> R
Q --> SRV
T --> SRV
C --> SRV
TAG --> SRV
P --> SRV
S --> SRV
SO --> SRV
```

**å›¾è¡¨æ¥æº**
- [index.ts](file://src/router/index.ts#L1-L50)
- [SearchResultsView.vue](file://src/views/SearchResultsView.vue#L250-L285)

### SEOä¼˜åŒ–ç­–ç•¥

SearchResultsViewå®ç°äº†å¤šé¡¹SEOä¼˜åŒ–æªæ–½ï¼š

1. **åŠ¨æ€æ ‡é¢˜**ï¼šæ ¹æ®æœç´¢ç»“æœåŠ¨æ€è®¾ç½®é¡µé¢æ ‡é¢˜
2. **å…ƒæ•°æ®ç®¡ç†**ï¼šä¸ºæ¯ä¸ªæœç´¢ç»“æœé¡µé¢è®¾ç½®åˆé€‚çš„metaæ ‡ç­¾
3. **ç»“æ„åŒ–æ•°æ®**ï¼šæä¾›JSON-LDæ ¼å¼çš„ç»“æ„åŒ–æ•°æ®
4. **é¢åŒ…å±‘å¯¼èˆª**ï¼šæä¾›æ¸…æ™°çš„å¯¼èˆªè·¯å¾„

```typescript
// è·¯ç”±å®ˆå«ä¸­çš„SEOå¤„ç†
router.beforeEach(async (to, from, next) => {
  if (to.meta.title) {
    document.title = `${to.meta.title} | ${import.meta.env.VITE_APP_NAME || 'åº”ç”¨'}`;
  }
  next();
});
```

**ç« èŠ‚æ¥æº**
- [index.ts](file://src/router/index.ts#L350-L399)
- [SearchResultsView.vue](file://src/views/SearchResultsView.vue#L1-L50)

## æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### æœç´¢ç»“æœç¼“å­˜æœºåˆ¶

```mermaid
flowchart LR
subgraph "ç¼“å­˜å±‚çº§"
L1[å†…å­˜ç¼“å­˜]
L2[æµè§ˆå™¨ç¼“å­˜]
L3[CDNç¼“å­˜]
end
subgraph "ç¼“å­˜ç­–ç•¥"
TTL[ç”Ÿå­˜æ—¶é—´æ§åˆ¶]
EVICT[ç¼“å­˜æ·˜æ±°]
REFRESH[ç¼“å­˜åˆ·æ–°]
end
subgraph "æ€§èƒ½æŒ‡æ ‡"
RT[å“åº”æ—¶é—´]
HIT[å‘½ä¸­ç‡]
SIZE[ç¼“å­˜å¤§å°]
end
L1 --> TTL
L2 --> EVICT
L3 --> REFRESH
TTL --> RT
EVICT --> HIT
REFRESH --> SIZE
```

### æ‡’åŠ è½½ä¸è™šæ‹Ÿæ»šåŠ¨

å¯¹äºå¤§é‡æœç´¢ç»“æœï¼Œç³»ç»Ÿå®ç°äº†æ‡’åŠ è½½å’Œè™šæ‹Ÿæ»šåŠ¨æŠ€æœ¯ï¼š

1. **åˆ†é¡µåŠ è½½**ï¼šæ”¯æŒæ— é™æ»šåŠ¨å’Œä¼ ç»Ÿåˆ†é¡µ
2. **å›¾ç‰‡æ‡’åŠ è½½**ï¼šå»¶è¿ŸåŠ è½½äº§å“å›¾ç‰‡
3. **ç»„ä»¶æ‡’åŠ è½½**ï¼šæŒ‰éœ€åŠ è½½å¤§å‹ç»„ä»¶

### æœç´¢é˜²æŠ–ä¸èŠ‚æµ

```typescript
// æœç´¢å»ºè®®é˜²æŠ–å¤„ç†
const debouncedLoadSuggestions = useDebounceFn(loadSuggestions, 300);

// è¾“å…¥é˜²æŠ–é¿å…é¢‘ç¹æœç´¢
const handleInput = () => {
  selectedIndex.value = -1;
  debouncedLoadSuggestions();
};
```

**ç« èŠ‚æ¥æº**
- [EnhancedSearchBox.vue](file://src/components/search/EnhancedSearchBox.vue#L150-L200)

## é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ

### å¤šå±‚æ¬¡é”™è¯¯å¤„ç†

```mermaid
flowchart TD
Error[æœç´¢é”™è¯¯] --> Type{é”™è¯¯ç±»å‹}
Type --> |ç½‘ç»œé”™è¯¯| NetworkError[ç½‘ç»œé”™è¯¯å¤„ç†]
Type --> |æœåŠ¡é”™è¯¯| ServiceError[æœåŠ¡é”™è¯¯å¤„ç†]
Type --> |å‚æ•°é”™è¯¯| ParamError[å‚æ•°éªŒè¯é”™è¯¯]
Type --> |æ— ç»“æœ| NoResult[æ— ç»“æœå¤„ç†]
NetworkError --> Retry[é‡è¯•æœºåˆ¶]
ServiceError --> Fallback[é™çº§å¤„ç†]
ParamError --> Validation[å‚æ•°éªŒè¯]
NoResult --> Suggestions[æœç´¢å»ºè®®]
Retry --> UserAction[ç”¨æˆ·æ“ä½œ]
Fallback --> UserAction
Validation --> UserAction
Suggestions --> UserAction
UserAction --> Success[æˆåŠŸçŠ¶æ€]
UserAction --> Failure[å¤±è´¥çŠ¶æ€]
```

### æ— ç»“æœå¤„ç†ç­–ç•¥

å½“æœç´¢æ²¡æœ‰ç»“æœæ—¶ï¼Œç³»ç»Ÿæä¾›å¤šç§å¼•å¯¼æ–¹å¼ï¼š

1. **æœç´¢å»ºè®®**ï¼šæ˜¾ç¤ºç›¸å…³å…³é”®è¯å»ºè®®
2. **æœç´¢æç¤º**ï¼šæä¾›ä¼˜åŒ–æœç´¢çš„å»ºè®®
3. **çƒ­é—¨æœç´¢**ï¼šå±•ç¤ºå½“å‰çƒ­é—¨æœç´¢è¯
4. **é‡æ–°æœç´¢**ï¼šæä¾›é‡æ–°æœç´¢çš„å…¥å£

```html
<!-- æ— ç»“æœæç¤ºæ¨¡æ¿ -->
<div v-if="searchResult.total === 0" class="no-results">
  <div class="no-results-icon">ğŸ”</div>
  <h3>æœªæ‰¾åˆ°ç›¸å…³ç»“æœ</h3>
  <p>å°è¯•ä½¿ç”¨ä¸åŒçš„å…³é”®è¯æˆ–æ£€æŸ¥æ‹¼å†™</p>
  <div class="search-tips">
    <h4>æœç´¢å»ºè®®ï¼š</h4>
    <ul>
      <li>ä½¿ç”¨æ›´é€šç”¨çš„å…³é”®è¯</li>
      <li>æ£€æŸ¥æ‹¼å†™æ˜¯å¦æ­£ç¡®</li>
      <li>å°è¯•ä½¿ç”¨åŒä¹‰è¯</li>
      <li>å‡å°‘æœç´¢è¯çš„æ•°é‡</li>
    </ul>
  </div>
</div>
```

### åŠ è½½çŠ¶æ€ç®¡ç†

ç³»ç»Ÿæä¾›äº†ä¸°å¯Œçš„åŠ è½½çŠ¶æ€åé¦ˆï¼š

1. **æ—‹è½¬åŠ è½½å™¨**ï¼šè§†è§‰åŒ–çš„åŠ è½½æŒ‡ç¤º
2. **è¿›åº¦æ¡**ï¼šé•¿æ—¶é—´æœç´¢çš„è¿›åº¦åé¦ˆ
3. **éª¨æ¶å±**ï¼šæå‡ç”¨æˆ·ä½“éªŒçš„å ä½ç¬¦
4. **ç©ºçŠ¶æ€**ï¼šæ˜ç¡®çš„çŠ¶æ€æŒ‡ç¤º

**ç« èŠ‚æ¥æº**
- [SearchResultsView.vue](file://src/views/SearchResultsView.vue#L285-L350)

## æ‰©å±•æ€§è®¾è®¡

### æ”¯æŒå…¨æ–‡æ£€ç´¢çš„æ¶æ„

```mermaid
graph TB
subgraph "æœç´¢æ‰©å±•ç‚¹"
FT[å…¨æ–‡æ£€ç´¢å¼•æ“]
AI[AIè¯­ä¹‰æœç´¢]
ML[æœºå™¨å­¦ä¹ æ¨è]
GEO[åœ°ç†ä½ç½®æœç´¢]
end
subgraph "æ•°æ®æºæ‰©å±•"
DB[å…³ç³»æ•°æ®åº“]
ES[Elasticsearch]
VECTOR[å‘é‡æ•°æ®åº“]
GRAPH[å›¾æ•°æ®åº“]
end
subgraph "æ¥å£å±‚æ‰©å±•"
API[REST API]
GraphQL[GraphQL API]
WS[WebSocket API]
BATCH[æ‰¹é‡å¤„ç†API]
end
FT --> ES
AI --> VECTOR
ML --> GRAPH
GEO --> DB
ES --> API
VECTOR --> GraphQL
GRAPH --> WS
DB --> BATCH
```

### å¤šå­—æ®µåŒ¹é…æ”¯æŒ

ç³»ç»Ÿè®¾è®¡æ”¯æŒå¤šç§åŒ¹é…æ¨¡å¼ï¼š

1. **ç²¾ç¡®åŒ¹é…**ï¼šå®Œå…¨åŒ¹é…å…³é”®è¯
2. **æ¨¡ç³ŠåŒ¹é…**ï¼šæ”¯æŒéƒ¨åˆ†åŒ¹é…å’Œè¿‘ä¼¼åŒ¹é…
3. **è¯­ä¹‰åŒ¹é…**ï¼šåŸºäºè¯­ä¹‰ç†è§£çš„åŒ¹é…
4. **åŒä¹‰è¯åŒ¹é…**ï¼šæ”¯æŒåŒä¹‰è¯æ‰©å±•

### æ’ä»¶åŒ–æ¶æ„

```typescript
// æœç´¢æ’ä»¶æ¥å£
interface SearchPlugin {
  name: string;
  priority: number;
  match(query: string): boolean;
  execute(query: string, options: SearchOptions): Promise<SearchResult>;
}

// æ’ä»¶æ³¨å†Œæœºåˆ¶
class SearchPluginRegistry {
  private plugins: SearchPlugin[] = [];
  
  register(plugin: SearchPlugin) {
    this.plugins.push(plugin);
    this.plugins.sort((a, b) => b.priority - a.priority);
  }
  
  async execute(query: string, options: SearchOptions): Promise<SearchResult> {
    for (const plugin of this.plugins) {
      if (plugin.match(query)) {
        return await plugin.execute(query, options);
      }
    }
    throw new Error('No matching plugin found');
  }
}
```

### å›½é™…åŒ–æ”¯æŒ

ç³»ç»Ÿæ”¯æŒå¤šè¯­è¨€æœç´¢ï¼š

1. **å¤šè¯­è¨€ç´¢å¼•**ï¼šä¸ºä¸åŒè¯­è¨€åˆ›å»ºç‹¬ç«‹ç´¢å¼•
2. **è¯­è¨€æ£€æµ‹**ï¼šè‡ªåŠ¨æ£€æµ‹ç”¨æˆ·è¯­è¨€åå¥½
3. **ç¿»è¯‘æœåŠ¡**ï¼šé›†æˆç¿»è¯‘APIæä¾›å¤šè¯­è¨€æ”¯æŒ
4. **æœ¬åœ°åŒ–ç•Œé¢**ï¼šæ”¯æŒRTLè¯­è¨€å’Œç‰¹æ®Šå­—ç¬¦

**ç« èŠ‚æ¥æº**
- [searchService.ts](file://src/services/searchService.ts#L1-L100)
- [EnhancedSearchBox.vue](file://src/components/search/EnhancedSearchBox.vue#L1-L100)

## æ€»ç»“

SearchResultsView.vueå±•ç°äº†ç°ä»£Webåº”ç”¨æœç´¢åŠŸèƒ½çš„æœ€ä½³å®è·µï¼Œé€šè¿‡ç²¾å¿ƒè®¾è®¡çš„æ¶æ„å’Œç»„ä»¶åä½œï¼Œæä¾›äº†å¼ºå¤§è€Œçµæ´»çš„æœç´¢ä½“éªŒã€‚å…¶æ ¸å¿ƒä¼˜åŠ¿åŒ…æ‹¬ï¼š

1. **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„ç»„ä»¶åˆ†ç¦»å’ŒèŒè´£åˆ’åˆ†
2. **é«˜æ€§èƒ½å®ç°**ï¼šå¤šå±‚æ¬¡çš„ç¼“å­˜å’Œä¼˜åŒ–ç­–ç•¥
3. **ä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒ**ï¼šæ™ºèƒ½çš„æœç´¢å»ºè®®å’Œé”™è¯¯å¤„ç†
4. **è‰¯å¥½çš„æ‰©å±•æ€§**ï¼šæ”¯æŒå¤šç§æœç´¢æ¨¡å¼å’Œæ•°æ®æº
5. **å®Œå–„çš„SEOæ”¯æŒ**ï¼šç¬¦åˆæœç´¢å¼•æ“ä¼˜åŒ–æ ‡å‡†

è¯¥æ¶æ„ä¸ä»…æ»¡è¶³äº†å½“å‰çš„åŠŸèƒ½éœ€æ±‚ï¼Œè¿˜ä¸ºæœªæ¥çš„åŠŸèƒ½æ‰©å±•å’Œæ€§èƒ½ä¼˜åŒ–å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡æŒç»­çš„è¿­ä»£å’Œæ”¹è¿›ï¼ŒSearchResultsViewå°†ç»§ç»­ä¸ºç”¨æˆ·æä¾›å“è¶Šçš„æœç´¢ä½“éªŒã€‚