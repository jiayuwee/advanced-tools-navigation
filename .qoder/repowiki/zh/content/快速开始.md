# 快速开始

<cite>
**本文档中引用的文件**
- [README.md](file://README.md)
- [package.json](file://package.json)
- [vite.config.ts](file://vite.config.ts)
- [env.d.ts](file://env.d.ts)
- [scripts/deployment/pre-deploy-check.mjs](file://scripts/deployment/pre-deploy-check.mjs)
- [scripts/deployment/setup-supabase.sh](file://scripts/deployment/setup-supabase.sh)
- [scripts/database/supabase_seed_data.sql](file://scripts/database/supabase_seed_data.sql)
</cite>

## 目录
1. [简介](#简介)
2. [环境要求](#环境要求)
3. [项目克隆与初始化](#项目克隆与初始化)
4. [依赖安装与配置](#依赖安装与配置)
5. [Supabase 数据库设置](#supabase-数据库设置)
6. [环境变量配置](#环境变量配置)
7. [开发服务器启动](#开发服务器启动)
8. [数据库迁移与种子数据](#数据库迁移与种子数据)
9. [项目结构概览](#项目结构概览)
10. [常见问题排查](#常见问题排查)
11. [后续步骤](#后续步骤)

## 简介

advanced-tools-navigation 是一个基于 Vue 3 + Vite + Pinia + TypeScript 的现代化工具导航站，采用 Fluent Design 设计语言，帮助您高效管理和访问常用资源。本指南将引导您从零开始搭建完整的开发环境，让您能够顺利运行和开发这个项目。

## 环境要求

在开始之前，请确保您的系统满足以下最低要求：

- **Node.js**: 版本 ≥ 18.19.0
- **npm**: 版本 ≥ 8.0.0
- **Git**: 用于代码版本控制
- **Supabase CLI**: 用于数据库管理（可选）

**重要提示**: 项目要求 Node.js 版本至少为 18.19.0，建议使用 LTS 版本以获得最佳兼容性。

## 项目克隆与初始化

### 步骤 1: 克隆仓库

首先，打开终端或命令提示符，然后执行以下命令克隆项目仓库：

```bash
# 克隆仓库到本地
git clone https://github.com/jiayuwee/advanced-tools-navigation.git

# 进入项目目录
cd advanced-tools-navigation
```

### 步骤 2: 检查项目结构

克隆完成后，您可以使用以下命令查看项目的基本结构：

```bash
# 查看项目文件列表
ls -la

# 或者在 Windows 上使用
dir
```

项目应该包含以下关键目录：
- `src/` - 源代码目录
- `scripts/` - 部署和数据库脚本
- `supabase/` - Supabase 配置和迁移文件
- `config/` - 配置文件

**章节来源**
- [README.md](file://README.md#L1-L50)

## 依赖安装与配置

### 步骤 1: 安装项目依赖

在项目根目录下运行以下命令安装所有必要的依赖包：

```bash
# 安装依赖
npm install
```

**等待时间**: 安装过程可能需要 2-5 分钟，具体取决于您的网络速度。

### 步骤 2: 验证安装

安装完成后，运行以下命令验证依赖是否正确安装：

```bash
# 检查依赖版本
npm list vue pinia @supabase/supabase-js

# 运行类型检查
npm run type-check
```

### 步骤 3: 代码质量检查

运行代码质量检查确保项目符合编码规范：

```bash
# 运行 ESLint 检查
npm run lint

# 修复可自动修复的问题
npm run lint -- --fix
```

**章节来源**
- [package.json](file://package.json#L1-L50)
- [README.md](file://README.md#L50-L100)

## Supabase 数据库设置

### 步骤 1: 安装 Supabase CLI

如果您尚未安装 Supabase CLI，请先安装：

```bash
# 全局安装 Supabase CLI
npm install -g supabase@latest
```

### 步骤 2: 初始化 Supabase 项目

项目提供了自动化的 Supabase 设置脚本：

```bash
# Linux/MacOS
chmod +x scripts/deployment/setup-supabase.sh
./scripts/deployment/setup-supabase.sh

# Windows
# PowerShell 需要管理员权限
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
.\scripts\deployment\setup-supabase.ps1
```

### 步骤 3: 手动设置（如果需要）

如果您选择手动设置 Supabase，可以按照以下步骤操作：

```bash
# 登录 Supabase
supabase login

# 创建新项目
supabase projects create

# 链接到现有项目
supabase link --project-ref your-project-ref

# 启动本地 Supabase 实例
supabase start
```

**章节来源**
- [scripts/deployment/setup-supabase.sh](file://scripts/deployment/setup-supabase.sh#L1-L50)

## 环境变量配置

### 步骤 1: 创建环境变量文件

项目使用 `.env.local` 文件来存储本地开发所需的环境变量。运行以下命令创建该文件：

```bash
# 创建本地环境变量文件
touch .env.local
```

### 步骤 2: 配置必需的环境变量

根据 Supabase 设置脚本自动生成的内容，添加以下配置到 `.env.local` 文件：

```env
# Supabase 配置
VITE_SUPABASE_URL=https://your-project-ref.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key-here

# 应用配置
VITE_APP_NAME=工具导航站
VITE_APP_DESCRIPTION=高效的工具导航和产品展示平台
VITE_APP_URL=http://localhost:3000

# 开发环境配置
VITE_DEV_MODE=true
VITE_API_BASE_URL=https://your-project-ref.supabase.co
```

### 步骤 3: 验证环境变量

运行以下命令验证环境变量配置是否正确：

```bash
# 检查环境变量
node -e "console.log(process.env.VITE_SUPABASE_URL)"

# 运行环境验证脚本
npm run dev
```

**章节来源**
- [env.d.ts](file://env.d.ts#L1-L45)

## 开发服务器启动

### 步骤 1: 启动开发服务器

在项目根目录下运行以下命令启动开发服务器：

```bash
# 启动开发服务器
npm run dev
```

### 步骤 2: 验证服务器启动

启动成功后，您应该看到类似以下的输出：

```
  VITE v5.0.10  ready in 1234 ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
  ➜  press h to show help
```

### 步骤 3: 访问应用

打开浏览器并访问 `http://localhost:5173`，您应该能看到应用的首页。

### 步骤 4: 热重载测试

尝试修改源代码中的某个文件（如 `src/App.vue`），观察浏览器是否自动刷新并显示更改。

**章节来源**
- [vite.config.ts](file://vite.config.ts#L80-L90)

## 数据库迁移与种子数据

### 步骤 1: 运行数据库迁移

确保您的 Supabase 实例正在运行，然后执行以下命令：

```bash
# 运行数据库迁移
npm run supabase:push

# 或者直接使用 Supabase CLI
supabase db push
```

### 步骤 2: 生成 TypeScript 类型定义

```bash
# 生成数据库类型定义
npm run supabase:gen-types
```

### 步骤 3: 插入种子数据

运行以下命令插入初始数据：

```bash
# 插入种子数据
npm run supabase:seed
```

### 步骤 4: 验证数据

```bash
# 检查数据库连接
npm run db:check-wee

# 验证数据完整性
supabase db diff
```

**章节来源**
- [scripts/database/supabase_seed_data.sql](file://scripts/database/supabase_seed_data.sql#L1-L50)

## 项目结构概览

### 核心目录结构

```
advanced-tools-navigation/
├── src/                    # 源代码
│   ├── components/         # Vue 组件
│   ├── views/             # 页面视图
│   ├── stores/            # Pinia 状态管理
│   ├── services/          # 业务服务
│   ├── composables/       # 组合式函数
│   ├── types/             # TypeScript 类型定义
│   └── lib/               # 库文件
├── scripts/               # 部署和数据库脚本
├── supabase/              # Supabase 配置
├── config/                # 配置文件
├── public/                # 静态资源
└── package.json           # 项目配置
```

### 关键文件说明

- **`src/main.ts`**: 应用入口文件
- **`src/App.vue`**: 主应用组件
- **`vite.config.ts`**: Vite 构建配置
- **`tsconfig.json`**: TypeScript 配置
- **`supabase/config.toml`**: Supabase 项目配置

## 常见问题排查

### 问题 1: 端口被占用

**症状**: 开发服务器启动失败，提示端口已被占用

**解决方案**:
```bash
# 查找占用端口的进程
lsof -i :5173  # MacOS/Linux
netstat -ano | findstr :5173  # Windows

# 修改 Vite 配置使用其他端口
# 编辑 vite.config.ts，修改 server.port
```

### 问题 2: 依赖安装失败

**症状**: `npm install` 失败或出现依赖冲突

**解决方案**:
```bash
# 清理缓存
npm cache clean --force

# 删除 node_modules 和 package-lock.json
rm -rf node_modules package-lock.json

# 重新安装
npm install
```

### 问题 3: Supabase 连接失败

**症状**: 应用无法连接到 Supabase 数据库

**解决方案**:
```bash
# 检查 Supabase 实例状态
supabase status

# 重启 Supabase 实例
supabase stop
supabase start

# 验证连接
npm run db:check-wee
```

### 问题 4: 热重载不工作

**症状**: 修改代码后浏览器不会自动刷新

**解决方案**:
```bash
# 检查防火墙设置
# 确保 localhost 可访问
# 尝试使用 --host 参数
npm run dev -- --host
```

## 后续步骤

### 第一步: 功能探索

熟悉应用的核心功能：
- 浏览工具和产品列表
- 使用搜索功能
- 查看分类导航
- 测试收藏功能

### 第二步: 开发调试

学习如何进行开发调试：
```bash
# 运行测试
npm run test

# 运行集成测试
npm run test:integration

# 运行端到端测试
npm run test:e2e

# 生成覆盖率报告
npm run test:coverage
```

### 第三步: 代码贡献

如果您想为项目做贡献：
```bash
# Fork 项目到您的 GitHub 账户
# 克隆您的 fork
git clone https://github.com/your-username/advanced-tools-navigation.git

# 创建功能分支
git checkout -b feature/your-feature-name

# 提交更改
git commit -m "feat: 添加新功能描述"

# 推送到远程仓库
git push origin feature/your-feature-name
```

### 第四步: 生产构建

准备生产环境部署：
```bash
# 构建生产版本
npm run build

# 预览生产构建
npm run preview

# 运行预部署检查
npm run pre-deploy
```

### 第五步: 持续学习

推荐阅读相关文档：
- [Vue 3 官方文档](https://vuejs.org/)
- [Vite 官方文档](https://vitejs.dev/)
- [Supabase 文档](https://supabase.com/docs)
- [TypeScript 官方文档](https://www.typescriptlang.org/)

**章节来源**
- [README.md](file://README.md#L150-L238)
- [scripts/deployment/pre-deploy-check.mjs](file://scripts/deployment/pre-deploy-check.mjs#L1-L100)

## 总结

通过以上步骤，您已经成功搭建了 advanced-tools-navigation 的本地开发环境。现在您可以：

1. **正常运行应用**: 访问 `http://localhost:5173` 查看应用
2. **进行开发**: 修改代码并享受热重载功能
3. **测试功能**: 运行各种测试确保代码质量
4. **贡献代码**: 参与项目的持续改进

记住，开发是一个迭代的过程。遇到问题时不要气馁，查阅文档、搜索解决方案或寻求社区帮助都是很好的选择。祝您开发愉快！