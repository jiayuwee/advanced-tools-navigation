# è®¤è¯çŠ¶æ€ç®¡ç†

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [auth.ts](file://src/stores/auth.ts)
- [supabaseClient.ts](file://src/lib/supabaseClient.ts)
- [authService.ts](file://src/services/authService.ts)
- [LoginForm.vue](file://src/components/auth/LoginForm.vue)
- [LoginView.vue](file://src/views/auth/LoginView.vue)
- [AppHeader.vue](file://src/components/AppHeader.vue)
- [index.ts](file://src/router/index.ts)
- [localStorageService.ts](file://src/services/localStorageService.ts)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [é¡¹ç›®æ¶æ„æ¦‚è§ˆ](#é¡¹ç›®æ¶æ„æ¦‚è§ˆ)
3. [æ ¸å¿ƒç»„ä»¶åˆ†æ](#æ ¸å¿ƒç»„ä»¶åˆ†æ)
4. [è®¤è¯çŠ¶æ€ç®¡ç†æœºåˆ¶](#è®¤è¯çŠ¶æ€ç®¡ç†æœºåˆ¶)
5. [Supabaseé›†æˆ](#supabaseé›†æˆ)
6. [è·¯ç”±å®ˆå«ä¸æƒé™æ§åˆ¶](#è·¯ç”±å®ˆå«ä¸æƒé™æ§åˆ¶)
7. [é”™è¯¯å¤„ç†ä¸è°ƒè¯•](#é”™è¯¯å¤„ç†ä¸è°ƒè¯•)
8. [æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ](#æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ)
9. [æ•…éšœæ’é™¤æŒ‡å—](#æ•…éšœæ’é™¤æŒ‡å—)
10. [æ€»ç»“](#æ€»ç»“)

## ç®€ä»‹

è®¤è¯çŠ¶æ€ç®¡ç†æ¨¡å—æ˜¯ç°ä»£Webåº”ç”¨ç¨‹åºçš„æ ¸å¿ƒåŸºç¡€è®¾æ–½ï¼Œè´Ÿè´£ç®¡ç†ç”¨æˆ·èº«ä»½éªŒè¯ã€æˆæƒå’Œä¼šè¯çŠ¶æ€ã€‚æœ¬é¡¹ç›®é‡‡ç”¨PiniaçŠ¶æ€ç®¡ç†åº“ç»“åˆSupabaseè®¤è¯æœåŠ¡ï¼Œæ„å»ºäº†ä¸€ä¸ªå®Œæ•´ä¸”å“åº”å¼çš„è®¤è¯çŠ¶æ€ç®¡ç†ç³»ç»Ÿã€‚

è¯¥ç³»ç»Ÿçš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š
- åŸºäºPiniaçš„çŠ¶æ€ç®¡ç†æ¨¡å¼
- ä¸Supabaseè®¤è¯æœåŠ¡çš„æ·±åº¦é›†æˆ
- è‡ªåŠ¨åŒ–çš„ä¼šè¯ç®¡ç†å’ŒçŠ¶æ€åŒæ­¥
- å®Œæ•´çš„è·¯ç”±å®ˆå«å’Œæƒé™æ§åˆ¶
- å“åº”å¼çš„ç”¨æˆ·ç•Œé¢çŠ¶æ€æ›´æ–°
- å®Œå–„çš„é”™è¯¯å¤„ç†å’Œè°ƒè¯•æœºåˆ¶

## é¡¹ç›®æ¶æ„æ¦‚è§ˆ

```mermaid
graph TB
subgraph "å‰ç«¯å±‚"
UI[ç”¨æˆ·ç•Œé¢ç»„ä»¶]
Header[AppHeader]
AuthViews[è®¤è¯è§†å›¾]
end
subgraph "çŠ¶æ€ç®¡ç†å±‚"
AuthStore[useAuthStore]
Pinia[Pinia Store]
end
subgraph "æœåŠ¡å±‚"
AuthService[AuthService]
SupabaseClient[Supabase Client]
LocalStorage[LocalStorageService]
end
subgraph "åç«¯å±‚"
Supabase[Supabase Platform]
Database[(PostgreSQL)]
Storage[(Object Storage)]
end
UI --> AuthStore
Header --> AuthStore
AuthViews --> AuthService
AuthStore --> Pinia
AuthService --> SupabaseClient
SupabaseClient --> Supabase
Supabase --> Database
Supabase --> Storage
AuthStore --> LocalStorage
```

**å›¾è¡¨æ¥æº**
- [auth.ts](file://src/stores/auth.ts#L1-L190)
- [supabaseClient.ts](file://src/lib/supabaseClient.ts#L1-L246)
- [authService.ts](file://src/services/authService.ts#L1-L306)

## æ ¸å¿ƒç»„ä»¶åˆ†æ

### useAuthStore - è®¤è¯çŠ¶æ€ç®¡ç†å™¨

`useAuthStore` æ˜¯æ•´ä¸ªè®¤è¯ç³»ç»Ÿçš„æ ¸å¿ƒï¼ŒåŸºäºPiniaæ„å»ºï¼Œæä¾›äº†å®Œæ•´çš„çŠ¶æ€ç®¡ç†åŠŸèƒ½ã€‚

```typescript
export const useAuthStore = defineStore("auth", () => {
  // çŠ¶æ€å®šä¹‰
  const user = ref<UserProfile | null>(null);
  const loading = ref(false);
  const initialized = ref(false);
  const error = ref<AuthError | null>(null);

  // è®¡ç®—å±æ€§
  const isAuthenticated = computed(() => !!user.value);
  const isAdmin = computed(() => {
    return user.value?.role === "admin" || user.value?.role === "super_admin";
  });
});
```

**èŠ‚æ¥æº**
- [auth.ts](file://src/stores/auth.ts#L15-L37)

#### çŠ¶æ€ç»“æ„è®¾è®¡

```mermaid
classDiagram
class UserProfile {
+string id
+string email
+string username
+string avatar_url
+string role
+datetime created_at
+datetime updated_at
}
class AuthStore {
+Ref~UserProfile~ user
+Ref~boolean~ loading
+Ref~boolean~ initialized
+Ref~AuthError~ error
+Computed~boolean~ isAuthenticated
+Computed~boolean~ isAdmin
+initialize() void
+logout() Promise~void~
+clearError() void
+checkAuth() Promise~boolean~
+refreshAuth() Promise~void~
+isAdminFunction() Promise~boolean~
}
class AuthService {
+login(credentials) Promise~AuthResult~
+register(userData) Promise~AuthResult~
+logout() Promise~void~
+forgotPassword(email) Promise~void~
+resetPassword(newPassword) Promise~void~
+getSession() Promise~AuthSession~
+refreshSession() Promise~any~
+isAuthenticated() Promise~boolean~
}
AuthStore --> UserProfile : "manages"
AuthService --> UserProfile : "creates"
AuthStore --> AuthService : "delegates to"
```

**å›¾è¡¨æ¥æº**
- [auth.ts](file://src/stores/auth.ts#L15-L37)
- [authService.ts](file://src/services/authService.ts#L15-L306)

### Supabaseå®¢æˆ·ç«¯é›†æˆ

```typescript
// Supabaseå®¢æˆ·ç«¯é…ç½®
export const supabase = createClient(
  supabaseConfig.url,
  supabaseConfig.anonKey,
  supabaseConfig.options,
);

// è®¤è¯çŠ¶æ€ç›‘å¬
const { data: { subscription } } = supabase.auth.onAuthStateChange(
  async (event, session) => {
    // å¤„ç†ä¼šè¯å˜åŒ–
  }
);
```

**èŠ‚æ¥æº**
- [supabaseClient.ts](file://src/lib/supabaseClient.ts#L10-L20)
- [auth.ts](file://src/stores/auth.ts#L73-L113)

## è®¤è¯çŠ¶æ€ç®¡ç†æœºåˆ¶

### åˆå§‹åŒ–æµç¨‹

```mermaid
sequenceDiagram
participant App as åº”ç”¨å¯åŠ¨
participant Store as AuthStore
participant Supabase as Supabase Client
participant DB as PostgreSQL
App->>Store : initialize()
Store->>Store : è®¾ç½®loading=true
Store->>Supabase : onAuthStateChange()
Supabase-->>Store : è®¤è¯çŠ¶æ€äº‹ä»¶
Store->>DB : fetchUserProfile(userId)
DB-->>Store : ç”¨æˆ·èµ„æ–™æ•°æ®
Store->>Store : æ›´æ–°userçŠ¶æ€
Store->>Store : è®¾ç½®initialized=true
Store->>Store : è®¾ç½®loading=false
Store-->>App : åˆå§‹åŒ–å®Œæˆ
```

**å›¾è¡¨æ¥æº**
- [auth.ts](file://src/stores/auth.ts#L58-L113)

### ä¼šè¯ç”Ÿå‘½å‘¨æœŸç®¡ç†

è®¤è¯çŠ¶æ€ç®¡ç†éµå¾ªä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸæ¨¡å¼ï¼š

1. **åˆå§‹åŒ–é˜¶æ®µ**ï¼šç›‘å¬Supabaseè®¤è¯çŠ¶æ€å˜åŒ–
2. **è®¤è¯é˜¶æ®µ**ï¼šå¤„ç†ç™»å½•ã€æ³¨å†Œã€ç™»å‡ºæ“ä½œ
3. **ä¼šè¯ä¿æŒ**ï¼šè‡ªåŠ¨åˆ·æ–°å’ŒçŠ¶æ€åŒæ­¥
4. **é”™è¯¯æ¢å¤**ï¼šå¤„ç†è®¤è¯å¤±è´¥å’Œä¼šè¯è¿‡æœŸ

```typescript
// åˆå§‹åŒ–è®¤è¯ç›‘å¬
function initialize() {
  if (initialized.value) return;
  
  loading.value = true;
  console.log("ğŸ” åˆå§‹åŒ–Supabaseè®¤è¯ç›‘å¬...");
  
  const { data: { subscription } } = supabase.auth.onAuthStateChange(
    async (event, session) => {
      // å¤„ç†è®¤è¯çŠ¶æ€å˜åŒ–
      if (session?.user) {
        const profile = await fetchUserProfile(session.user.id);
        // æ›´æ–°ç”¨æˆ·çŠ¶æ€
      } else {
        user.value = null;
      }
      
      initialized.value = true;
      loading.value = false;
    }
  );
}
```

**èŠ‚æ¥æº**
- [auth.ts](file://src/stores/auth.ts#L58-L113)

## Supabaseé›†æˆ

### è®¤è¯æœåŠ¡æ¶æ„

```mermaid
graph LR
subgraph "AuthService"
Login[ç™»å½•]
Register[æ³¨å†Œ]
Logout[ç™»å‡º]
ForgotPwd[å¿˜è®°å¯†ç ]
ResetPwd[é‡ç½®å¯†ç ]
end
subgraph "Supabase Auth"
SignIn[signInWithPassword]
SignUp[signUp]
SignOut[signOut]
Reset[resetPasswordForEmail]
Update[updateUser]
end
subgraph "UserService"
UpdateLogin[æ›´æ–°æœ€åç™»å½•æ—¶é—´]
CreateProfile[åˆ›å»ºç”¨æˆ·èµ„æ–™]
UpdateProfile[æ›´æ–°ç”¨æˆ·èµ„æ–™]
DeleteAccount[åˆ é™¤è´¦æˆ·]
end
Login --> SignIn
Register --> SignUp
Logout --> SignOut
ForgotPwd --> Reset
ResetPwd --> Update
SignIn --> UpdateLogin
SignUp --> CreateProfile
UpdateLogin --> UpdateProfile
CreateProfile --> UpdateProfile
UpdateProfile --> DeleteAccount
```

**å›¾è¡¨æ¥æº**
- [authService.ts](file://src/services/authService.ts#L15-L306)

### ç”¨æˆ·èµ„æ–™ç®¡ç†

ç³»ç»Ÿé€šè¿‡æ‰©å±•çš„`UserProfile`ç±»å‹æ•´åˆSupabaseç”¨æˆ·æ•°æ®å’Œè‡ªå®šä¹‰ç”¨æˆ·èµ„æ–™ï¼š

```typescript
export type UserProfile = SupabaseUser & {
  username: string;
  avatar_url: string;
  role: "user" | "admin" | "super_admin";
};
```

ç”¨æˆ·èµ„æ–™è·å–æµç¨‹ï¼š

```typescript
async function fetchUserProfile(userId: string) {
  const { data, error: profileError } = await supabase
    .from("user_profiles")
    .select("*")
    .eq("id", userId)
    .single();

  if (profileError) {
    error.value = {
      name: "ProfileFetchError",
      message: `æ— æ³•åŠ è½½ç”¨æˆ·èµ„æ–™: ${profileError.message}`,
    } as AuthError;
    return null;
  }
  return data;
}
```

**èŠ‚æ¥æº**
- [auth.ts](file://src/stores/auth.ts#L37-L57)

## è·¯ç”±å®ˆå«ä¸æƒé™æ§åˆ¶

### æƒé™æ§åˆ¶æ¶æ„

```mermaid
flowchart TD
Request[è·¯ç”±è¯·æ±‚] --> CheckAuth{éœ€è¦è®¤è¯?}
CheckAuth --> |å¦| AllowAccess[å…è®¸è®¿é—®]
CheckAuth --> |æ˜¯| CheckLogin{å·²ç™»å½•?}
CheckLogin --> |å¦| RedirectLogin[é‡å®šå‘åˆ°ç™»å½•é¡µ]
CheckLogin --> |æ˜¯| CheckAdmin{éœ€è¦ç®¡ç†å‘˜?}
CheckAdmin --> |å¦| AllowAccess
CheckAdmin --> |æ˜¯| CheckRole{æ˜¯ç®¡ç†å‘˜?}
CheckRole --> |å¦| AccessDenied[è®¿é—®è¢«æ‹’ç»]
CheckRole --> |æ˜¯| AllowAccess
RedirectLogin --> LoginProcess[ç™»å½•æµç¨‹]
LoginProcess --> RefreshAuth[åˆ·æ–°è®¤è¯çŠ¶æ€]
RefreshAuth --> CheckLogin
```

**å›¾è¡¨æ¥æº**
- [index.ts](file://src/router/index.ts#L350-L398)

### è·¯ç”±å…ƒæ•°æ®é…ç½®

```typescript
// è·¯ç”±é…ç½®ç¤ºä¾‹
{
  path: "/admin",
  name: "Admin",
  meta: {
    requiresAuth: true,
    requiresAdmin: true,
  }
}
```

### æƒé™æ£€æŸ¥å®ç°

```typescript
// è·¯ç”±å®ˆå«ä¸­çš„æƒé™æ£€æŸ¥
router.beforeEach(async (to, from, next) => {
  const authStore = useAuthStore();
  
  // æ£€æŸ¥æ˜¯å¦éœ€è¦è®¤è¯
  if (to.meta.requiresAuth) {
    const isAuthenticated = authStore.isAuthenticated;
    
    if (!isAuthenticated) {
      await authStore.refreshAuth();
      if (!authStore.isAuthenticated) {
        return next({
          name: 'Login',
          query: { redirect: to.fullPath }
        });
      }
    }
  }

  // æ£€æŸ¥æ˜¯å¦éœ€è¦ç®¡ç†å‘˜æƒé™
  if (to.meta.requiresAdmin) {
    const isAdmin = await authStore.isAdminFunction();
    if (!isAdmin) {
      return next({ name: 'NotFound' });
    }
  }
});
```

**èŠ‚æ¥æº**
- [index.ts](file://src/router/index.ts#L350-L398)

## é”™è¯¯å¤„ç†ä¸è°ƒè¯•

### é”™è¯¯å¤„ç†ç­–ç•¥

ç³»ç»Ÿå®ç°äº†å¤šå±‚æ¬¡çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š

```mermaid
graph TB
subgraph "é”™è¯¯ç±»å‹"
AuthError[è®¤è¯é”™è¯¯]
NetworkError[ç½‘ç»œé”™è¯¯]
ValidationError[éªŒè¯é”™è¯¯]
ServerError[æœåŠ¡å™¨é”™è¯¯]
end
subgraph "é”™è¯¯å¤„ç†"
ErrorHandler[ErrorHandler]
ConsoleLogger[æ§åˆ¶å°æ—¥å¿—]
UserNotifier[ç”¨æˆ·é€šçŸ¥]
RetryLogic[é‡è¯•é€»è¾‘]
end
subgraph "çŠ¶æ€æ›´æ–°"
ErrorState[é”™è¯¯çŠ¶æ€]
LoadingState[åŠ è½½çŠ¶æ€]
SuccessState[æˆåŠŸçŠ¶æ€]
end
AuthError --> ErrorHandler
NetworkError --> ErrorHandler
ValidationError --> ErrorHandler
ServerError --> ErrorHandler
ErrorHandler --> ConsoleLogger
ErrorHandler --> UserNotifier
ErrorHandler --> RetryLogic
ErrorHandler --> ErrorState
ConsoleLogger --> LoadingState
UserNotifier --> SuccessState
```

**å›¾è¡¨æ¥æº**
- [authService.ts](file://src/services/authService.ts#L15-L306)

### ç™»å½•è¡¨å•é”™è¯¯å¤„ç†

```typescript
async function handleSubmit() {
  try {
    loading.value = true;
    error.value = '';
    
    const result = await AuthService.login(form.value);
    
    // å¼ºåˆ¶åˆ·æ–°ç”¨æˆ·çŠ¶æ€
    const authStore = useAuthStore();
    await authStore.initialize();
    
    // æ·»åŠ çŸ­æš‚å»¶è¿Ÿç¡®ä¿çŠ¶æ€æ›´æ–°
    setTimeout(() => {
      emit('success');
    }, 300);
  } catch (err) {
    error.value = err instanceof Error ? err.message : 'ç™»å½•å¤±è´¥';
  } finally {
    loading.value = false;
  }
}
```

**èŠ‚æ¥æº**
- [LoginForm.vue](file://src/components/auth/LoginForm.vue#L35-L55)

## æ€§èƒ½ä¼˜åŒ–ä¸æœ€ä½³å®è·µ

### çŠ¶æ€åŒæ­¥ä¼˜åŒ–

1. **æ‡’åŠ è½½åˆå§‹åŒ–**ï¼šä»…åœ¨éœ€è¦æ—¶åˆå§‹åŒ–è®¤è¯ç›‘å¬
2. **çŠ¶æ€ç¼“å­˜**ï¼šé¿å…é‡å¤çš„APIè°ƒç”¨
3. **é˜²æŠ–å¤„ç†**ï¼šå‡å°‘é¢‘ç¹çš„çŠ¶æ€æ›´æ–°

```typescript
// é˜²æ­¢é‡å¤åˆå§‹åŒ–
function initialize() {
  if (initialized.value) return;
  
  // ä¸€æ¬¡æ€§è®¾ç½®åˆå§‹åŒ–æ ‡å¿—
  loading.value = true;
  console.log("ğŸ” åˆå§‹åŒ–Supabaseè®¤è¯ç›‘å¬...");
  
  // ç›‘å¬è®¤è¯çŠ¶æ€å˜åŒ–
  const { data: { subscription } } = supabase.auth.onAuthStateChange(
    async (event, session) => {
      // å¤„ç†çŠ¶æ€å˜åŒ–...
    }
  );
}
```

**èŠ‚æ¥æº**
- [auth.ts](file://src/stores/auth.ts#L58-L113)

### å†…å­˜ç®¡ç†

```typescript
// ç»„ä»¶å¸è½½æ—¶æ¸…ç†è®¢é˜…
onScopeDispose(() => {
  subscription?.unsubscribe();
});
```

### æœ¬åœ°å­˜å‚¨é›†æˆ

ç³»ç»Ÿé›†æˆäº†æœ¬åœ°å­˜å‚¨æœåŠ¡æ¥å¢å¼ºç¦»çº¿ä½“éªŒï¼š

```typescript
// ç”¨æˆ·åå¥½è®¾ç½®æŒä¹…åŒ–
static saveUserPreferences(preferences: Partial<UserPreferences>): void {
  try {
    const current = this.getUserPreferences();
    const updated = { ...current, ...preferences };
    localStorage.setItem(
      LOCAL_STORAGE_KEYS.USER_PREFERENCES,
      JSON.stringify(updated),
    );
  } catch (error) {
    console.error("ä¿å­˜ç”¨æˆ·åå¥½è®¾ç½®å¤±è´¥:", error);
  }
}
```

**èŠ‚æ¥æº**
- [localStorageService.ts](file://src/services/localStorageService.ts#L200-L220)

## æ•…éšœæ’é™¤æŒ‡å—

### å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

#### 1. è®¤è¯çŠ¶æ€ä¸ä¸€è‡´

**ç—‡çŠ¶**ï¼šç”¨æˆ·å·²ç™»å½•ä½†UIæ˜¾ç¤ºæœªç™»å½•çŠ¶æ€

**åŸå› **ï¼šçŠ¶æ€åŒæ­¥å»¶è¿Ÿæˆ–åˆå§‹åŒ–å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
```typescript
// å¼ºåˆ¶åˆ·æ–°è®¤è¯çŠ¶æ€
async function forceRefreshAuth() {
  const authStore = useAuthStore();
  await authStore.refreshAuth();
  // ç­‰å¾…çŠ¶æ€æ›´æ–°
  await new Promise(resolve => setTimeout(resolve, 100));
}
```

#### 2. ä¼šè¯è¿‡æœŸå¤„ç†

**ç—‡çŠ¶**ï¼šAPIè°ƒç”¨è¿”å›401é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```typescript
// è‡ªåŠ¨åˆ·æ–°ä¼šè¯
async function handleSessionExpired() {
  try {
    await AuthService.refreshSession();
    // é‡æ–°å°è¯•å¤±è´¥çš„è¯·æ±‚
  } catch (error) {
    // å¼•å¯¼ç”¨æˆ·é‡æ–°ç™»å½•
    await AuthService.logout();
  }
}
```

#### 3. çŠ¶æ€åˆå§‹åŒ–å¤±è´¥

**ç—‡çŠ¶**ï¼šåº”ç”¨å¯åŠ¨æ—¶è®¤è¯çŠ¶æ€å¼‚å¸¸

**è§£å†³æ–¹æ¡ˆ**ï¼š
```typescript
// å¥å£®çš„åˆå§‹åŒ–è¿‡ç¨‹
function robustInitialize() {
  try {
    initialize();
  } catch (error) {
    console.error("è®¤è¯åˆå§‹åŒ–å¤±è´¥:", error);
    // å›é€€åˆ°é»˜è®¤çŠ¶æ€
    user.value = null;
    initialized.value = true;
  }
}
```

### è°ƒè¯•æŠ€å·§

1. **å¯ç”¨è¯¦ç»†æ—¥å¿—**ï¼š
```typescript
// åœ¨å¼€å‘ç¯å¢ƒä¸­å¯ç”¨è¯¦ç»†æ—¥å¿—
if (process.env.NODE_ENV === 'development') {
  console.log("ğŸ” è®¤è¯çŠ¶æ€:", {
    user: user.value,
    isAuthenticated: isAuthenticated.value,
    isAdmin: isAdmin.value,
    loading: loading.value,
    initialized: initialized.value,
    error: error.value
  });
}
```

2. **çŠ¶æ€ç›‘æ§**ï¼š
```typescript
// ç›‘æ§çŠ¶æ€å˜åŒ–
watch(user, (newUser, oldUser) => {
  console.log("ğŸ‘¤ ç”¨æˆ·çŠ¶æ€å˜åŒ–:", { newUser, oldUser });
});
```

3. **ç½‘ç»œè¯·æ±‚è¿½è¸ª**ï¼š
```typescript
// è¿½è¸ªè®¤è¯ç›¸å…³çš„APIè°ƒç”¨
const originalFetch = window.fetch;
window.fetch = async function(...args) {
  console.log("ğŸŒ APIè°ƒç”¨:", args[0]);
  return originalFetch.apply(this, args);
};
```

### æœ€ä½³å®è·µå»ºè®®

1. **çŠ¶æ€ä¸€è‡´æ€§**ï¼šç¡®ä¿æ‰€æœ‰è®¤è¯æ“ä½œéƒ½é€šè¿‡storeè¿›è¡Œ
2. **é”™è¯¯è¾¹ç•Œ**ï¼šä¸ºè®¤è¯æ“ä½œè®¾ç½®é€‚å½“çš„é”™è¯¯è¾¹ç•Œ
3. **ç”¨æˆ·ä½“éªŒ**ï¼šæä¾›æ¸…æ™°çš„åŠ è½½çŠ¶æ€å’Œé”™è¯¯æç¤º
4. **å®‰å…¨æ€§**ï¼šå®šæœŸè½®æ¢è®¤è¯ä»¤ç‰Œï¼Œå®æ–½é€‚å½“çš„è®¿é—®æ§åˆ¶
5. **ç›‘æ§**ï¼šå»ºç«‹è®¤è¯ç›¸å…³çš„ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶

## æ€»ç»“

æœ¬è®¤è¯çŠ¶æ€ç®¡ç†æ¨¡å—å±•ç°äº†ç°ä»£Webåº”ç”¨è®¤è¯ç³»ç»Ÿçš„æœ€ä½³å®è·µã€‚é€šè¿‡PiniaçŠ¶æ€ç®¡ç†ã€Supabaseè®¤è¯æœåŠ¡å’Œå®Œå–„çš„è·¯ç”±å®ˆå«æœºåˆ¶ï¼Œç³»ç»Ÿå®ç°äº†ï¼š

- **å“åº”å¼çŠ¶æ€ç®¡ç†**ï¼šå®æ—¶å“åº”ç”¨æˆ·è®¤è¯çŠ¶æ€å˜åŒ–
- **å®Œæ•´çš„æƒé™æ§åˆ¶**ï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶å’Œè·¯ç”±ä¿æŠ¤
- **å¥å£®çš„é”™è¯¯å¤„ç†**ï¼šå¤šå±‚æ¬¡çš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶
- **ä¼˜ç§€çš„ç”¨æˆ·ä½“éªŒ**ï¼šæµç•…çš„è®¤è¯æµç¨‹å’ŒçŠ¶æ€åé¦ˆ
- **å¯ç»´æŠ¤æ€§è®¾è®¡**ï¼šæ¸…æ™°çš„ä»£ç ç»“æ„å’Œæ¨¡å—åŒ–è®¾è®¡

è¯¥ç³»ç»Ÿä¸ä»…æ»¡è¶³äº†å½“å‰çš„åŠŸèƒ½éœ€æ±‚ï¼Œè¿˜ä¸ºæœªæ¥çš„æ‰©å±•å’Œç»´æŠ¤å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡æŒç»­çš„ç›‘æ§å’Œä¼˜åŒ–ï¼Œå¯ä»¥è¿›ä¸€æ­¥æå‡ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ€§èƒ½è¡¨ç°ã€‚