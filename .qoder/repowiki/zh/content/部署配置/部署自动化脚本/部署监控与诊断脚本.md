# éƒ¨ç½²ç›‘æ§ä¸è¯Šæ–­è„šæœ¬ç³»ç»Ÿ

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [monitor-deployment.js](file://scripts/deployment/monitor-deployment.js)
- [check-deployment-status.js](file://scripts/deployment/check-deployment-status.js)
- [diagnose-deployment.js](file://scripts/deployment/diagnose-deployment.js)
- [diagnose-update-issues.js](file://scripts/deployment/diagnose-update-issues.js)
- [simple-health-check.js](file://scripts/deployment/simple-health-check.js)
- [verify-deployment.js](file://scripts/deployment/verify-deployment.js)
- [netlify.toml](file://netlify.toml)
- [package.json](file://package.json)
- [README.md](file://README.md)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [é¡¹ç›®æ¶æ„æ¦‚è§ˆ](#é¡¹ç›®æ¶æ„æ¦‚è§ˆ)
3. [æ ¸å¿ƒç›‘æ§è„šæœ¬](#æ ¸å¿ƒç›‘æ§è„šæœ¬)
4. [è¯Šæ–­å·¥å…·è¯¦è§£](#è¯Šæ–­å·¥å…·è¯¦è§£)
5. [å¥åº·æ£€æŸ¥æœºåˆ¶](#å¥åº·æ£€æŸ¥æœºåˆ¶)
6. [éƒ¨ç½²éªŒè¯ç³»ç»Ÿ](#éƒ¨ç½²éªŒè¯ç³»ç»Ÿ)
7. [è‡ªåŠ¨åŒ–å‘Šè­¦é›†æˆ](#è‡ªåŠ¨åŒ–å‘Šè­¦é›†æˆ)
8. [æœ€ä½³å®è·µå»ºè®®](#æœ€ä½³å®è·µå»ºè®®)
9. [æ•…éšœæ’é™¤æŒ‡å—](#æ•…éšœæ’é™¤æŒ‡å—)
10. [æ€»ç»“](#æ€»ç»“)

## ç®€ä»‹

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†åŸºäº JavaScript çš„éƒ¨ç½²çŠ¶æ€ç›‘æ§ä¸é—®é¢˜è¯Šæ–­å·¥å…·é›†ï¼Œè¯¥ç³»ç»Ÿä¸ºç°ä»£ Web åº”ç”¨æä¾›äº†å…¨é¢çš„éƒ¨ç½²çŠ¶æ€ç›‘æ§ã€å®æ—¶è¿›åº¦è·Ÿè¸ªã€é—®é¢˜è¯Šæ–­å’Œè‡ªåŠ¨åŒ–å‘Šè­¦åŠŸèƒ½ã€‚ç³»ç»ŸåŒ…å«å…­ä¸ªæ ¸å¿ƒè„šæœ¬ï¼Œæ¯ä¸ªè„šæœ¬éƒ½æœ‰ç‰¹å®šçš„åŠŸèƒ½å®šä½ï¼Œå…±åŒæ„æˆäº†ä¸€ä¸ªå®Œæ•´çš„éƒ¨ç½²ç›‘æ§ç”Ÿæ€ç³»ç»Ÿã€‚

è¯¥å·¥å…·é›†ç‰¹åˆ«é€‚ç”¨äºä½¿ç”¨ Vue.js + Vite + Supabase æŠ€æœ¯æ ˆçš„é¡¹ç›®ï¼Œèƒ½å¤Ÿæœ‰æ•ˆç›‘æ§ GitHub Actions å·¥ä½œæµã€Netlify éƒ¨ç½²ã€Supabase æ•°æ®åº“è¿æ¥ç­‰å…³é”®ç»„ä»¶çš„çŠ¶æ€ã€‚

## é¡¹ç›®æ¶æ„æ¦‚è§ˆ

```mermaid
graph TB
subgraph "éƒ¨ç½²ç›‘æ§ç³»ç»Ÿ"
Monitor[monitor-deployment.js<br/>å®æ—¶ç›‘æ§ç³»ç»Ÿ]
Health[simple-health-check.js<br/>ç®€å•å¥åº·æ£€æŸ¥]
Verify[verify-deployment.js<br/>éƒ¨ç½²éªŒè¯]
end
subgraph "çŠ¶æ€æ£€æŸ¥ç³»ç»Ÿ"
Status[check-deployment-status.js<br/>çŠ¶æ€æ£€æŸ¥]
Diagnose[diagnose-deployment.js<br/>éƒ¨ç½²è¯Šæ–­]
UpdateDiag[diagnose-update-issues.js<br/>æ›´æ–°é—®é¢˜è¯Šæ–­]
end
subgraph "å¤–éƒ¨æœåŠ¡"
GitHub[GitHub Actions API]
Netlify[Netlify API]
Supabase[Supabase API]
Site[ç›®æ ‡ç½‘ç«™]
end
Monitor --> GitHub
Monitor --> Netlify
Monitor --> Supabase
Monitor --> Site
Status --> GitHub
Diagnose --> GitHub
UpdateDiag --> GitHub
Health --> Site
Verify --> Supabase
```

**å›¾è¡¨æ¥æº**
- [monitor-deployment.js](file://scripts/deployment/monitor-deployment.js#L1-L50)
- [check-deployment-status.js](file://scripts/deployment/check-deployment-status.js#L1-L30)

## æ ¸å¿ƒç›‘æ§è„šæœ¬

### monitor-deployment.js - å®æ—¶ç›‘æ§å¼•æ“

`monitor-deployment.js` æ˜¯æ•´ä¸ªç›‘æ§ç³»ç»Ÿçš„æ ¸å¿ƒï¼Œæä¾›æŒç»­çš„éƒ¨ç½²çŠ¶æ€ç›‘æ§å’Œæ™ºèƒ½å‘Šè­¦åŠŸèƒ½ã€‚

#### æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

- **å¤šç»´åº¦å¥åº·æ£€æŸ¥**: åŒ…æ‹¬ç½‘ç«™å¯è®¿é—®æ€§ã€GitHub Actions çŠ¶æ€ã€Supabase æ•°æ®åº“è¿æ¥
- **æ™ºèƒ½å‘Šè­¦æœºåˆ¶**: åŸºäºè¿ç»­å¤±è´¥æ¬¡æ•°çš„é˜ˆå€¼å‘Šè­¦
- **å®æ—¶çŠ¶æ€æ›´æ–°**: æ¯5åˆ†é’Ÿè‡ªåŠ¨æ£€æŸ¥ä¸€æ¬¡
- **è¯¦ç»†çš„è¯Šæ–­ä¿¡æ¯**: æä¾›å®Œæ•´çš„é”™è¯¯å †æ ˆå’ŒçŠ¶æ€è¯¦æƒ…

#### ç›‘æ§æ£€æŸ¥é¡¹æ¶æ„

```mermaid
classDiagram
class HealthCheck {
+string name
+function check
+boolean critical
+execute() Promise~Result~
}
class SiteHealthCheck {
+checkSiteHealth() Promise~Result~
+timeout : 30000ms
+method : HEAD
}
class GitHubActionsCheck {
+checkGitHubActions() Promise~Result~
+per_page : 5
+filter : failure
}
class SupabaseCheck {
+checkSupabaseHealth() Promise~Result~
+test_query : categories/select
}
HealthCheck <|-- SiteHealthCheck
HealthCheck <|-- GitHubActionsCheck
HealthCheck <|-- SupabaseCheck
```

**å›¾è¡¨æ¥æº**
- [monitor-deployment.js](file://scripts/deployment/monitor-deployment.js#L35-L65)

#### ç›‘æ§é…ç½®å‚æ•°

ç³»ç»Ÿæ”¯æŒçµæ´»çš„é…ç½®å‚æ•°ï¼Œå…è®¸æ ¹æ®ä¸åŒçš„éƒ¨ç½²ç¯å¢ƒè°ƒæ•´ç›‘æ§ç­–ç•¥ï¼š

```javascript
const monitorConfig = {
  checkInterval: 5 * 60 * 1000, // 5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
  maxFailures: 3, // è¿ç»­å¤±è´¥3æ¬¡åå‘Šè­¦
  timeout: 30000, // 30ç§’è¶…æ—¶
};
```

**ç« èŠ‚æ¥æº**
- [monitor-deployment.js](file://scripts/deployment/monitor-deployment.js#L25-L35)

## è¯Šæ–­å·¥å…·è¯¦è§£

### diagnose-deployment.js - ç»¼åˆéƒ¨ç½²è¯Šæ–­

è¯¥è„šæœ¬åŸºäº Context7 æœ€ä½³å®è·µï¼Œæä¾›å…¨é¢çš„éƒ¨ç½²é—®é¢˜è¯Šæ–­èƒ½åŠ›ã€‚

#### è¯Šæ–­æµç¨‹æ¶æ„

```mermaid
flowchart TD
Start([å¼€å§‹è¯Šæ–­]) --> CheckWorkflows[æ£€æŸ¥ GitHub Actions å·¥ä½œæµ]
CheckWorkflows --> NetworkTest[ç½‘ç»œè¿æ¥æµ‹è¯•]
NetworkTest --> SupabaseCheck[Supabase è¿æ¥æ£€æŸ¥]
SupabaseCheck --> BuildCheck[æ„å»ºçŠ¶æ€æ£€æŸ¥]
BuildCheck --> GenerateReport[ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š]
GenerateReport --> End([è¯Šæ–­å®Œæˆ])
CheckWorkflows --> FailedRuns{å‘ç°å¤±è´¥è¿è¡Œ?}
FailedRuns --> |æ˜¯| ShowFailed[æ˜¾ç¤ºå¤±è´¥è¯¦æƒ…]
FailedRuns --> |å¦| Success[çŠ¶æ€æ­£å¸¸]
NetworkTest --> NetworkDiagnostics[ç½‘ç»œè¯Šæ–­å‘½ä»¤]
SupabaseCheck --> SupabaseDiagnostics[Supabase è¯Šæ–­]
BuildCheck --> FileSystemCheck[æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥]
```

**å›¾è¡¨æ¥æº**
- [diagnose-deployment.js](file://scripts/deployment/diagnose-deployment.js#L18-L80)

#### Context7 ç½‘ç»œè¯Šæ–­æ–¹æ³•

è„šæœ¬å®ç°äº† Context7 æ¨èçš„ç½‘ç»œè¯Šæ–­æ–¹æ³•ï¼ŒåŒ…æ‹¬ï¼š

1. **DNS è§£ææµ‹è¯•**: `nslookup ramusi.cn`
2. **SSL è¯ä¹¦éªŒè¯**: `curl -vI https://ramusi.cn`
3. **è¿é€šæ€§æµ‹è¯•**: `ping -c 4 ramusi.cn`

**ç« èŠ‚æ¥æº**
- [diagnose-deployment.js](file://scripts/deployment/diagnose-deployment.js#L149-L167)

### diagnose-update-issues.js - æ›´æ–°å‘å¸ƒé—®é¢˜è¯Šæ–­

ä¸“é—¨é’ˆå¯¹åˆæ¬¡å‘å¸ƒæˆåŠŸä½†æ›´æ–°å‘å¸ƒå¤±è´¥çš„åœºæ™¯è®¾è®¡çš„è¯Šæ–­å·¥å…·ã€‚

#### è¯Šæ–­æ£€æŸ¥ç»´åº¦

```mermaid
graph LR
subgraph "åŒ…ç®¡ç†å™¨æ£€æŸ¥"
PM1[package-lock.json]
PM2[yarn.lock]
PM3[pnpm-lock.yaml]
end
subgraph "é…ç½®æ£€æŸ¥"
Config1[netlify.toml]
Config2[vite.config.ts]
Config3[tsconfig.json]
end
subgraph "ç¯å¢ƒæ£€æŸ¥"
Env1[ç¯å¢ƒå˜é‡]
Env2[ç¼“å­˜çŠ¶æ€]
Env3[ä¾èµ–ç‰ˆæœ¬]
end
PM1 --> Diagnosis[ç»¼åˆè¯Šæ–­]
Config1 --> Diagnosis
Env1 --> Diagnosis
```

**å›¾è¡¨æ¥æº**
- [diagnose-update-issues.js](file://scripts/deployment/diagnose-update-issues.js#L30-L100)

#### è‡ªåŠ¨ä¿®å¤è„šæœ¬ç”Ÿæˆ

ç³»ç»Ÿèƒ½å¤Ÿæ ¹æ®è¯Šæ–­ç»“æœè‡ªåŠ¨ç”Ÿæˆä¿®å¤è„šæœ¬ï¼ŒåŒ…å«ä»¥ä¸‹æ­¥éª¤ï¼š

1. æ¸…ç†ç¼“å­˜å’Œä¾èµ–
2. ç»Ÿä¸€åŒ…ç®¡ç†å™¨é…ç½®
3. é‡æ–°å®‰è£…ä¾èµ–
4. éªŒè¯æ„å»ºè¿‡ç¨‹
5. è¿è¡Œæµ‹è¯•å¥—ä»¶

**ç« èŠ‚æ¥æº**
- [diagnose-update-issues.js](file://scripts/deployment/diagnose-update-issues.js#L200-L250)

## å¥åº·æ£€æŸ¥æœºåˆ¶

### simple-health-check.js - å¿«é€ŸçŠ¶æ€éªŒè¯

æä¾›æœ€åŸºç¡€çš„å¥åº·æ£€æŸ¥åŠŸèƒ½ï¼Œé€‚åˆå¿«é€ŸéªŒè¯éƒ¨ç½²çŠ¶æ€ã€‚

#### æ£€æŸ¥æµç¨‹

```mermaid
sequenceDiagram
participant Script as å¥åº·æ£€æŸ¥è„šæœ¬
participant Site as ç›®æ ‡ç½‘ç«™
participant GitHub as GitHub Actions
participant Netlify as Netlify
Script->>Site : HEAD è¯·æ±‚æ£€æŸ¥å¯è®¿é—®æ€§
Site-->>Script : è¿”å›çŠ¶æ€ç 
Script->>GitHub : æ£€æŸ¥å·¥ä½œæµçŠ¶æ€
GitHub-->>Script : è¿”å›è¿è¡Œè¯¦æƒ…
Script->>Netlify : æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
Netlify-->>Script : è¿”å›éƒ¨ç½²è¯¦æƒ…
Script->>Script : ç”Ÿæˆæ£€æŸ¥æŠ¥å‘Š
```

**å›¾è¡¨æ¥æº**
- [simple-health-check.js](file://scripts/deployment/simple-health-check.js#L15-L80)

#### æ£€æŸ¥ç»“æœå¯è§†åŒ–

ç³»ç»Ÿä½¿ç”¨ç›´è§‚çš„è¡¨æƒ…ç¬¦å·æ¥è¡¨ç¤ºä¸åŒçš„çŠ¶æ€ï¼š

- âœ… å¥åº·çŠ¶æ€
- âš ï¸ è­¦å‘ŠçŠ¶æ€  
- âŒ å¼‚å¸¸çŠ¶æ€
- ğŸ’¥ é”™è¯¯çŠ¶æ€

**ç« èŠ‚æ¥æº**
- [simple-health-check.js](file://scripts/deployment/simple-health-check.js#L1-L50)

### check-deployment-status.js - è¯¦ç»†çŠ¶æ€åˆ†æ

æä¾›æœ€è¯¦ç»†çš„éƒ¨ç½²çŠ¶æ€æ£€æŸ¥ï¼ŒåŒ…æ‹¬å·¥ä½œæµå†å²ã€Secrets é…ç½®ç­‰ã€‚

#### çŠ¶æ€æ£€æŸ¥ç»´åº¦

1. **å·¥ä½œæµè¿è¡ŒçŠ¶æ€**: æœ€è¿‘5ä¸ªè¿è¡Œçš„æˆåŠŸ/å¤±è´¥çŠ¶æ€
2. **Supabase éƒ¨ç½²çŠ¶æ€**: ç‰¹å®šçš„éƒ¨ç½²å·¥ä½œæµçŠ¶æ€
3. **Secrets é…ç½®æ£€æŸ¥**: å¿…éœ€çš„ç¯å¢ƒå˜é‡é…ç½®çŠ¶æ€
4. **æ—¶é—´çº¿åˆ†æ**: éƒ¨ç½²è€—æ—¶å’Œæ—¶é—´æˆ³åˆ†æ

**ç« èŠ‚æ¥æº**
- [check-deployment-status.js](file://scripts/deployment/check-deployment-status.js#L15-L100)

## éƒ¨ç½²éªŒè¯ç³»ç»Ÿ

### verify-deployment.js - å®Œæ•´éƒ¨ç½²éªŒè¯

ä¸“æ³¨äºéªŒè¯ Supabase æ•°æ®åº“éƒ¨ç½²çš„å®Œæ•´æ€§ï¼Œç¡®ä¿æ‰€æœ‰å¿…è¦ç»„ä»¶éƒ½æ­£ç¡®é…ç½®ã€‚

#### éªŒè¯æ£€æŸ¥æ¸…å•

```mermaid
graph TD
subgraph "æ•°æ®åº“è¿æ¥éªŒè¯"
Conn1[åŸºæœ¬è¿æ¥æµ‹è¯•]
Conn2[è¡¨ç»“æ„éªŒè¯]
Conn3[å­˜å‚¨æ¡¶æ£€æŸ¥]
end
subgraph "æ ¸å¿ƒè¡¨éªŒè¯"
Tables1[categories]
Tables2[tools]
Tables3[products]
Tables4[user_profiles]
Tables5[orders]
end
subgraph "å­˜å‚¨æ¡¶éªŒè¯"
Buckets1[avatars]
Buckets2[product-images]
Buckets3[tool-icons]
Buckets4[uploads]
end
Conn1 --> Tables1
Conn1 --> Tables2
Conn1 --> Tables3
Conn1 --> Tables4
Conn1 --> Tables5
Conn3 --> Buckets1
Conn3 --> Buckets2
Conn3 --> Buckets3
Conn3 --> Buckets4
```

**å›¾è¡¨æ¥æº**
- [verify-deployment.js](file://scripts/deployment/verify-deployment.js#L30-L80)

#### éƒ¨ç½²çŠ¶æ€æ€»ç»“

éªŒè¯å®Œæˆåï¼Œç³»ç»Ÿæä¾›æ¸…æ™°çš„éƒ¨ç½²çŠ¶æ€æ€»ç»“ï¼š

- âœ… æ•°æ®åº“è¿æ¥æ­£å¸¸
- âœ… æ‰€æœ‰å¿…è¦çš„è¡¨éƒ½å·²åˆ›å»º
- âš ï¸ å­˜å‚¨æ¡¶éœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼ˆå¦‚æœå°šæœªåˆ›å»ºï¼‰

**ç« èŠ‚æ¥æº**
- [verify-deployment.js](file://scripts/deployment/verify-deployment.js#L100-L130)

## è‡ªåŠ¨åŒ–å‘Šè­¦é›†æˆ

### ç›‘æ§å‘Šè­¦æœºåˆ¶

```mermaid
flowchart TD
Check[å¥åº·æ£€æŸ¥] --> Evaluate{è¯„ä¼°çŠ¶æ€}
Evaluate --> |å¥åº·| ResetCounter[é‡ç½®å¤±è´¥è®¡æ•°]
Evaluate --> |è­¦å‘Š| IncrementCounter[å¢åŠ å¤±è´¥è®¡æ•°]
Evaluate --> |å¼‚å¸¸| IncrementCounter
IncrementCounter --> ThresholdCheck{è¾¾åˆ°å‘Šè­¦é˜ˆå€¼?}
ThresholdCheck --> |æ˜¯| TriggerAlert[è§¦å‘å‘Šè­¦]
ThresholdCheck --> |å¦| ContinueMonitor[ç»§ç»­ç›‘æ§]
TriggerAlert --> GenerateReport[ç”Ÿæˆå‘Šè­¦æŠ¥å‘Š]
GenerateReport --> SendNotification[å‘é€é€šçŸ¥]
SendNotification --> ManualIntervention[äººå·¥å¹²é¢„å»ºè®®]
ResetCounter --> ContinueMonitor
ContinueMonitor --> Check
```

**å›¾è¡¨æ¥æº**
- [monitor-deployment.js](file://scripts/deployment/monitor-deployment.js#L176-L230)

### å‘Šè­¦è§¦å‘æ¡ä»¶

ç³»ç»Ÿé‡‡ç”¨æ™ºèƒ½å‘Šè­¦æœºåˆ¶ï¼š

1. **è¿ç»­å¤±è´¥é˜ˆå€¼**: é»˜è®¤è¿ç»­3æ¬¡å¤±è´¥è§¦å‘å‘Šè­¦
2. **å…³é”®æœåŠ¡æ£€æŸ¥**: ä»…å¯¹å…³é”®æœåŠ¡ï¼ˆå¦‚ç½‘ç«™å¯è®¿é—®æ€§ã€Supabase è¿æ¥ï¼‰è¿›è¡Œå‘Šè­¦
3. **è¯¦ç»†é”™è¯¯æŠ¥å‘Š**: å‘Šè­¦åŒ…å«å®Œæ•´çš„é”™è¯¯ä¿¡æ¯å’Œè¯Šæ–­å»ºè®®

**ç« èŠ‚æ¥æº**
- [monitor-deployment.js](file://scripts/deployment/monitor-deployment.js#L230-L280)

## æœ€ä½³å®è·µå»ºè®®

### åŸºäºè„šæœ¬çš„è‡ªåŠ¨åŒ–å‘Šè­¦ç³»ç»Ÿæ„å»º

#### 1. ç›‘æ§è„šæœ¬ç»„åˆä½¿ç”¨

å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç»„åˆä½¿ç”¨å¤šä¸ªç›‘æ§è„šæœ¬ï¼š

```bash
# å®æ—¶ç›‘æ§
npm run monitor:watch

# å®šæœŸå¥åº·æ£€æŸ¥
npm run monitor:health

# éƒ¨ç½²éªŒè¯
npm run deploy:verify
```

#### 2. å‘Šè­¦é€šçŸ¥é›†æˆ

å¯ä»¥å°†ç›‘æ§è„šæœ¬é›†æˆåˆ°ç°æœ‰çš„å‘Šè­¦ç³»ç»Ÿä¸­ï¼š

```javascript
// ç¤ºä¾‹ï¼šé›†æˆåˆ° Slack é€šçŸ¥
async function sendSlackAlert(message) {
  const webhookUrl = process.env.SLACK_WEBHOOK_URL;
  const payload = {
    text: `ğŸš¨ éƒ¨ç½²ç›‘æ§å‘Šè­¦: ${message}`
  };
  
  await fetch(webhookUrl, {
    method: 'POST',
    body: JSON.stringify(payload)
  });
}
```

#### 3. ç›‘æ§ä»ªè¡¨æ¿é›†æˆ

å»ºè®®å°†ç›‘æ§æ•°æ®é›†æˆåˆ°ç›‘æ§ä»ªè¡¨æ¿ä¸­ï¼š

- **Prometheus + Grafana**: ç”¨äºé•¿æœŸç›‘æ§å’Œè¶‹åŠ¿åˆ†æ
- **è‡ªå®šä¹‰ä»ªè¡¨æ¿**: é›†æˆåˆ°ç°æœ‰çš„è¿ç»´å¹³å°
- **é‚®ä»¶é€šçŸ¥**: å…³é”®å‘Šè­¦çš„é‚®ä»¶é€šçŸ¥

### éƒ¨ç½²æµç¨‹ä¼˜åŒ–

#### 1. é¢„éƒ¨ç½²æ£€æŸ¥

åœ¨éƒ¨ç½²å‰è¿è¡Œé¢„æ£€æŸ¥è„šæœ¬ï¼š

```bash
npm run pre-deploy
npm run pre-deploy:enhanced
npm run config:verify
```

#### 2. éƒ¨ç½²åéªŒè¯

éƒ¨ç½²å®Œæˆåè¿è¡ŒéªŒè¯è„šæœ¬ï¼š

```bash
npm run deploy:verify
npm run test:deployment
```

#### 3. æŒç»­ç›‘æ§

å»ºç«‹æŒç»­ç›‘æ§æœºåˆ¶ï¼š

```bash
# å¯åŠ¨æŒç»­ç›‘æ§
npm run monitor:watch

# å®šæœŸå¥åº·æ£€æŸ¥
npm run monitor:health
```

## æ•…éšœæ’é™¤æŒ‡å—

### å¸¸è§é—®é¢˜è¯Šæ–­

#### 1. GitHub Actions ç›¸å…³é—®é¢˜

**ç—‡çŠ¶**: GitHub Actions æ£€æŸ¥æ˜¾ç¤ºå¤±è´¥æˆ–æ— è®°å½•

**è¯Šæ–­æ­¥éª¤**:
```bash
# æ£€æŸ¥ GitHub Secrets é…ç½®
npm run secrets:check

# æ£€æŸ¥å·¥ä½œæµçŠ¶æ€
npm run deployment:status

# è¿è¡Œæ›´æ–°é—®é¢˜è¯Šæ–­
npm run diagnose:update
```

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿ GITHUB_TOKEN æœ‰è¶³å¤Ÿæƒé™
- æ£€æŸ¥ Secrets é…ç½®æ˜¯å¦å®Œæ•´
- éªŒè¯å·¥ä½œæµæ–‡ä»¶è¯­æ³•

#### 2. Supabase è¿æ¥é—®é¢˜

**ç—‡çŠ¶**: Supabase å¥åº·æ£€æŸ¥å¤±è´¥

**è¯Šæ–­æ­¥éª¤**:
```bash
# è¿è¡Œ Supabase éªŒè¯
npm run supabase:verify

# æ£€æŸ¥ç¯å¢ƒå˜é‡
cat .env.local | grep SUPABASE

# æµ‹è¯•æ•°æ®åº“è¿æ¥
npm run db:check-wee
```

**è§£å†³æ–¹æ¡ˆ**:
- æ›´æ–° Supabase é¡¹ç›®å¼•ç”¨
- æ£€æŸ¥ API å¯†é’¥æœ‰æ•ˆæ€§
- éªŒè¯ç½‘ç»œè¿æ¥

#### 3. Netlify éƒ¨ç½²é—®é¢˜

**ç—‡çŠ¶**: Netlify éƒ¨ç½²çŠ¶æ€å¼‚å¸¸

**è¯Šæ–­æ­¥éª¤**:
```bash
# æ£€æŸ¥ Netlify é…ç½®
cat netlify.toml

# è¿è¡Œå¥åº·æ£€æŸ¥
npm run monitor:health

# æ£€æŸ¥æ„å»ºé…ç½®
npm run pre-deploy
```

**è§£å†³æ–¹æ¡ˆ**:
- éªŒè¯ netlify.toml é…ç½®
- æ£€æŸ¥ç¯å¢ƒå˜é‡è®¾ç½®
- æ¸…ç†æ„å»ºç¼“å­˜

### Context7 æ•…éšœæ’é™¤æ–¹æ³•

åŸºäº Context7 æœ€ä½³å®è·µçš„æ•…éšœæ’é™¤æ­¥éª¤ï¼š

1. **ç½‘ç»œå’ŒåŸŸåé—®é¢˜**:
   ```bash
   # DNS è§£ææµ‹è¯•
   nslookup ramusi.cn
   
   # SSL è¯ä¹¦éªŒè¯
   curl -vI https://ramusi.cn
   
   # ç½‘ç»œè¿é€šæ€§æµ‹è¯•
   ping -c 4 ramusi.cn
   ```

2. **Netlify é…ç½®æ£€æŸ¥**:
   - è®¿é—® Netlify Dashboard
   - ç¡®è®¤ç«™ç‚¹çŠ¶æ€ä¸º 'Published'
   - æ£€æŸ¥æ„å»ºæ—¥å¿—æ˜¯å¦æœ‰é”™è¯¯
   - éªŒè¯ç¯å¢ƒå˜é‡é…ç½®

3. **æ„å»ºå’Œéƒ¨ç½²æµç¨‹**:
   ```bash
   # æœ¬åœ°æµ‹è¯•æ„å»º
   npm run build && npm run preview
   
   # è¿è¡Œé¢„éƒ¨ç½²æ£€æŸ¥
   npm run pre-deploy
   
   # æ£€æŸ¥é…ç½®åŒ¹é…
   npm run config:verify
   ```

4. **Supabase é›†æˆ**:
   - éªŒè¯é¡¹ç›®çŠ¶æ€: Active
   - æ£€æŸ¥ API å¯†é’¥æœ‰æ•ˆæ€§
   - æµ‹è¯•æ•°æ®åº“è¿æ¥

**ç« èŠ‚æ¥æº**
- [diagnose-deployment.js](file://scripts/deployment/diagnose-deployment.js#L100-L168)

## æ€»ç»“

è¿™å¥—éƒ¨ç½²ç›‘æ§ä¸è¯Šæ–­è„šæœ¬ç³»ç»Ÿä¸ºç°ä»£ Web åº”ç”¨æä¾›äº†å…¨é¢çš„éƒ¨ç½²çŠ¶æ€ç›‘æ§å’Œé—®é¢˜è¯Šæ–­èƒ½åŠ›ã€‚é€šè¿‡å…­ä¸ªæ ¸å¿ƒè„šæœ¬çš„ååŒå·¥ä½œï¼Œç³»ç»Ÿèƒ½å¤Ÿï¼š

1. **å®æ—¶ç›‘æ§**: æŒç»­ç›‘æ§å…³é”®æœåŠ¡çŠ¶æ€ï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸
2. **æ™ºèƒ½è¯Šæ–­**: åŸºäºå¤šç§è¯Šæ–­æ–¹æ³•ï¼Œå‡†ç¡®å®šä½é—®é¢˜æ ¹æº
3. **è‡ªåŠ¨åŒ–å‘Šè­¦**: åŸºäºé˜ˆå€¼çš„æ™ºèƒ½å‘Šè­¦æœºåˆ¶ï¼Œå‡å°‘äººå·¥ç›‘æ§æˆæœ¬
4. **å®Œæ•´éªŒè¯**: ä»åŸºç¡€å¥åº·æ£€æŸ¥åˆ°æ·±åº¦éƒ¨ç½²éªŒè¯çš„å®Œæ•´æµç¨‹
5. **æ•…éšœæ’é™¤**: æä¾›è¯¦ç»†çš„æ•…éšœæ’é™¤æŒ‡å—å’Œè‡ªåŠ¨ä¿®å¤å»ºè®®

è¯¥ç³»ç»Ÿç‰¹åˆ«é€‚ç”¨äºä½¿ç”¨ Vue.js + Vite + Supabase æŠ€æœ¯æ ˆçš„é¡¹ç›®ï¼Œèƒ½å¤Ÿæœ‰æ•ˆç›‘æ§ GitHub Actions å·¥ä½œæµã€Netlify éƒ¨ç½²ã€Supabase æ•°æ®åº“è¿æ¥ç­‰å…³é”®ç»„ä»¶çš„çŠ¶æ€ã€‚é€šè¿‡åˆç†çš„é…ç½®å’Œä½¿ç”¨ï¼Œå¯ä»¥æ˜¾è‘—æé«˜éƒ¨ç½²æˆåŠŸç‡å’Œç³»ç»Ÿç¨³å®šæ€§ã€‚

å»ºè®®å›¢é˜Ÿæ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„ç›‘æ§ç­–ç•¥ï¼Œå¹¶ç»“åˆè‡ªåŠ¨åŒ–å·¥å…·å®ç°å®Œæ•´çš„ DevOps æµç¨‹ã€‚å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œå»ºè®®éƒ¨ç½²æŒç»­ç›‘æ§ç³»ç»Ÿï¼Œå¹¶å»ºç«‹å®Œå–„çš„å‘Šè­¦å’Œé€šçŸ¥æœºåˆ¶ï¼Œç¡®ä¿èƒ½å¤ŸåŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜ã€‚