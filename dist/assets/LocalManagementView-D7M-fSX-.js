import{R as a}from"./refresh-cw-DV17RuBA.js";import{e as s,D as e,_ as l}from"./index-DFN97R6u.js";import{T as t}from"./trash-K12P0foi.js";import{H as n}from"./hard-drive-YQZFv_op.js";import{E as i}from"./eye-BvNf7oTo.js";import{F as o}from"./file-text-FfSS7JCx.js";import{D as c}from"./download-CdgvXwjw.js";import{A as r}from"./activity-0yY7voCi.js";import{P as d}from"./play-DGHeW_uk.js";import{L as v}from"./loader-2-CWK7QjoX.js";import{d as u,r as m,b as p,o as b,m as f,q as g,t as y,y as h,E as w,B as S,u as x,D as k,A as j}from"./vendor-dtMHlISa.js";
/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=s("BarChartIcon",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),M={class:"local-management-view"},C={class:"page-header"},L={class:"header-actions"},E=["disabled"],O={class:"management-grid"},z={class:"management-card"},T={class:"card-header"},_={class:"card-content"},A={class:"card-stats"},D={class:"stat-item"},F={class:"stat-value"},I={class:"stat-item"},R={class:"stat-value"},U={class:"card-actions"},$=["disabled"],P=["disabled"],q={class:"management-card"},H={class:"card-header"},J={class:"card-content"},V={class:"card-stats"},W={class:"stat-item"},G={class:"stat-value"},K={class:"stat-item"},N={class:"stat-value"},Y={class:"card-actions"},Z=["disabled"],Q={class:"management-card"},X={class:"card-header"},aa={class:"card-content"},sa={class:"card-stats"},ea={class:"stat-item"},la={class:"stat-value"},ta={class:"stat-item"},na={class:"stat-value text-red-600"},ia={class:"card-actions"},oa=["disabled"],ca={class:"management-card"},ra={class:"card-header"},da={class:"card-content"},va={class:"card-stats"},ua={class:"stat-item"},ma={class:"stat-value"},pa={class:"stat-item"},ba={class:"stat-value"},fa={class:"card-actions"},ga=["disabled"],ya={class:"system-info-section"},ha={class:"info-grid"},wa={class:"info-item"},Sa={class:"info-value"},xa={class:"info-item"},ka={class:"info-value"},ja={class:"info-item"},Ba={class:"info-value"},Ma={class:"info-item"},Ca={class:"info-value"},La={class:"info-item"},Ea={class:"info-value"},Oa={class:"info-item"},za={key:0,class:"loading-overlay"},Ta={class:"loading-spinner"},_a=l(u({__name:"LocalManagementView",setup(s){const l=m(!1),u=p({size:"0 MB",count:0}),_a=p({used:"0 MB",available:"0 MB"}),Aa=p({count:0,errors:0}),Da=p({memory:"0 MB",loadTime:"0 ms"}),Fa=p({browser:"",os:"",screen:"",timezone:"",language:"",online:!0}),refreshData=async()=>{l.value=!0;try{await Promise.all([loadCacheStats(),loadStorageStats(),loadLogStats(),loadPerformanceStats(),loadSystemInfo()])}catch(a){console.error("刷新数据失败:",a)}finally{l.value=!1}},loadCacheStats=async()=>{u.size="2.5 MB",u.count=156},loadStorageStats=async()=>{try{if("storage"in navigator&&"estimate"in navigator.storage){const a=await navigator.storage.estimate(),s=a.usage||0,e=a.quota||0;_a.used=formatBytes(s),_a.available=formatBytes(e-s)}else _a.used="未知",_a.available="未知"}catch(a){console.error("获取存储统计失败:",a),_a.used="获取失败",_a.available="获取失败"}},loadLogStats=async()=>{Aa.count=1234,Aa.errors=5},loadPerformanceStats=async()=>{try{if("memory"in performance){const a=performance.memory;Da.memory=formatBytes(a.usedJSHeapSize)}else Da.memory="未知";const a=performance.getEntriesByType("navigation")[0];if(a){const s=a.loadEventEnd-a.navigationStart;Da.loadTime=`${Math.round(s)} ms`}}catch(a){console.error("获取性能统计失败:",a)}},loadSystemInfo=()=>{Fa.browser=getBrowserInfo(),Fa.os=getOSInfo(),Fa.screen=`${screen.width}x${screen.height}`,Fa.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone,Fa.language=navigator.language,Fa.online=navigator.onLine},formatBytes=a=>{if(0===a)return"0 B";const s=Math.floor(Math.log(a)/Math.log(1024));return parseFloat((a/Math.pow(1024,s)).toFixed(2))+" "+["B","KB","MB","GB"][s]},getBrowserInfo=()=>{const a=navigator.userAgent;return a.includes("Chrome")?"Chrome":a.includes("Firefox")?"Firefox":a.includes("Safari")?"Safari":a.includes("Edge")?"Edge":"未知"},getOSInfo=()=>{const a=navigator.userAgent;return a.includes("Windows")?"Windows":a.includes("Mac")?"macOS":a.includes("Linux")?"Linux":a.includes("Android")?"Android":a.includes("iOS")?"iOS":"未知"},clearCache=async()=>{if(confirm("确定要清理所有缓存吗？")){l.value=!0;try{if("caches"in window){const a=await caches.keys();await Promise.all(a.map(a=>caches.delete(a)))}await loadCacheStats(),alert("缓存清理完成")}catch(a){console.error("清理缓存失败:",a),alert("清理缓存失败")}finally{l.value=!1}}},refreshCache=async()=>{l.value=!0;try{window.location.reload()}catch(a){console.error("刷新缓存失败:",a)}finally{l.value=!1}},clearStorage=async()=>{if(confirm("确定要清理本地存储吗？这将清除所有保存的数据！")){l.value=!0;try{localStorage.clear(),sessionStorage.clear(),await loadStorageStats(),alert("本地存储清理完成")}catch(a){console.error("清理存储失败:",a),alert("清理存储失败")}finally{l.value=!1}}},viewStorageData=()=>{const a={localStorage:{...localStorage},sessionStorage:{...sessionStorage}};console.log("本地存储数据:",a),alert("存储数据已输出到控制台")},viewLogs=()=>{console.log("查看应用程序日志"),alert("日志数据已输出到控制台")},exportLogs=()=>{const a=JSON.stringify({timestamp:(new Date).toISOString(),logs:"模拟日志数据"},null,2),s=new Blob([a],{type:"application/json"}),e=URL.createObjectURL(s),l=document.createElement("a");l.href=e,l.download=`logs_${(new Date).toISOString().split("T")[0]}.json`,l.click(),URL.revokeObjectURL(e)},runPerformanceTest=async()=>{l.value=!0;try{await new Promise(a=>setTimeout(a,2e3)),await loadPerformanceStats(),alert("性能测试完成")}catch(a){console.error("性能测试失败:",a)}finally{l.value=!1}},viewPerformanceReport=()=>{console.log("性能报告:",Da),alert("性能报告已输出到控制台")};return b(()=>{refreshData(),window.addEventListener("online",()=>{Fa.online=!0}),window.addEventListener("offline",()=>{Fa.online=!1})}),(s,m)=>(j(),f("div",M,[g("div",C,[m[1]||(m[1]=g("h1",{class:"page-title"},"本地管理",-1)),g("div",L,[g("button",{class:"btn btn-primary",disabled:l.value,onClick:refreshData},[h(x(a),{class:S({"animate-spin":l.value})},null,8,["class"]),m[0]||(m[0]=w(" 刷新数据 "))],8,E)])]),g("div",O,[g("div",z,[g("div",T,[h(x(e),{class:"card-icon"}),m[2]||(m[2]=g("h3",null,"缓存管理",-1))]),g("div",_,[m[7]||(m[7]=g("p",{class:"card-description"},"管理应用程序缓存和临时数据",-1)),g("div",A,[g("div",D,[m[3]||(m[3]=g("span",{class:"stat-label"},"缓存大小:",-1)),g("span",F,k(u.size),1)]),g("div",I,[m[4]||(m[4]=g("span",{class:"stat-label"},"缓存项数:",-1)),g("span",R,k(u.count),1)])]),g("div",U,[g("button",{class:"btn btn-outline",disabled:l.value,onClick:clearCache},[h(x(t)),m[5]||(m[5]=w(" 清理缓存 "))],8,$),g("button",{class:"btn btn-outline",disabled:l.value,onClick:refreshCache},[h(x(a)),m[6]||(m[6]=w(" 刷新缓存 "))],8,P)])])]),g("div",q,[g("div",H,[h(x(n),{class:"card-icon"}),m[8]||(m[8]=g("h3",null,"本地存储",-1))]),g("div",J,[m[13]||(m[13]=g("p",{class:"card-description"},"管理浏览器本地存储数据",-1)),g("div",V,[g("div",W,[m[9]||(m[9]=g("span",{class:"stat-label"},"存储使用:",-1)),g("span",G,k(_a.used),1)]),g("div",K,[m[10]||(m[10]=g("span",{class:"stat-label"},"可用空间:",-1)),g("span",N,k(_a.available),1)])]),g("div",Y,[g("button",{class:"btn btn-outline",onClick:viewStorageData},[h(x(i)),m[11]||(m[11]=w(" 查看数据 "))]),g("button",{class:"btn btn-outline",disabled:l.value,onClick:clearStorage},[h(x(t)),m[12]||(m[12]=w(" 清理存储 "))],8,Z)])])]),g("div",Q,[g("div",X,[h(x(o),{class:"card-icon"}),m[14]||(m[14]=g("h3",null,"日志管理",-1))]),g("div",aa,[m[19]||(m[19]=g("p",{class:"card-description"},"查看和管理应用程序日志",-1)),g("div",sa,[g("div",ea,[m[15]||(m[15]=g("span",{class:"stat-label"},"日志条数:",-1)),g("span",la,k(Aa.count),1)]),g("div",ta,[m[16]||(m[16]=g("span",{class:"stat-label"},"错误数:",-1)),g("span",na,k(Aa.errors),1)])]),g("div",ia,[g("button",{class:"btn btn-outline",onClick:viewLogs},[h(x(i)),m[17]||(m[17]=w(" 查看日志 "))]),g("button",{class:"btn btn-outline",disabled:l.value,onClick:exportLogs},[h(x(c)),m[18]||(m[18]=w(" 导出日志 "))],8,oa)])])]),g("div",ca,[g("div",ra,[h(x(r),{class:"card-icon"}),m[20]||(m[20]=g("h3",null,"性能监控",-1))]),g("div",da,[m[25]||(m[25]=g("p",{class:"card-description"},"监控应用程序性能指标",-1)),g("div",va,[g("div",ua,[m[21]||(m[21]=g("span",{class:"stat-label"},"内存使用:",-1)),g("span",ma,k(Da.memory),1)]),g("div",pa,[m[22]||(m[22]=g("span",{class:"stat-label"},"页面加载:",-1)),g("span",ba,k(Da.loadTime),1)])]),g("div",fa,[g("button",{class:"btn btn-outline",disabled:l.value,onClick:runPerformanceTest},[h(x(d)),m[23]||(m[23]=w(" 性能测试 "))],8,ga),g("button",{class:"btn btn-outline",onClick:viewPerformanceReport},[h(x(B)),m[24]||(m[24]=w(" 性能报告 "))])])])])]),g("div",ya,[m[32]||(m[32]=g("h2",{class:"section-title"},"系统信息",-1)),g("div",ha,[g("div",wa,[m[26]||(m[26]=g("span",{class:"info-label"},"浏览器:",-1)),g("span",Sa,k(Fa.browser),1)]),g("div",xa,[m[27]||(m[27]=g("span",{class:"info-label"},"操作系统:",-1)),g("span",ka,k(Fa.os),1)]),g("div",ja,[m[28]||(m[28]=g("span",{class:"info-label"},"屏幕分辨率:",-1)),g("span",Ba,k(Fa.screen),1)]),g("div",Ma,[m[29]||(m[29]=g("span",{class:"info-label"},"时区:",-1)),g("span",Ca,k(Fa.timezone),1)]),g("div",La,[m[30]||(m[30]=g("span",{class:"info-label"},"语言:",-1)),g("span",Ea,k(Fa.language),1)]),g("div",Oa,[m[31]||(m[31]=g("span",{class:"info-label"},"在线状态:",-1)),g("span",{class:S(["info-value",Fa.online?"text-green-600":"text-red-600"])},k(Fa.online?"在线":"离线"),3)])])]),l.value?(j(),f("div",za,[g("div",Ta,[h(x(v),{class:"animate-spin"}),m[33]||(m[33]=g("span",null,"处理中...",-1))])])):y("",!0)]))}}),[["__scopeId","data-v-d384c1eb"]]);export{_a as default};
