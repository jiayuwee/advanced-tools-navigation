{"version":3,"file":"ProductUploadView-CzhfueAv.js","sources":["../../src/services/productsService.ts","../../src/stores/products.ts","../../src/views/ProductUploadView.vue"],"sourcesContent":["import { supabase } from \"../lib/supabase\";\r\nimport type { Product, SearchFilters, SearchResult } from \"../types\";\r\nimport type { Database } from \"../types/database\";\r\n\r\ntype ProductInsert = Database[\"public\"][\"Tables\"][\"products\"][\"Insert\"];\r\ntype ProductUpdate = Database[\"public\"][\"Tables\"][\"products\"][\"Update\"];\r\n\r\nexport class ProductsService {\r\n  // 获取所有产品\r\n  static async getProducts(\r\n    filters?: SearchFilters,\r\n  ): Promise<SearchResult<Product>> {\r\n    try {\r\n      let query = supabase\r\n        .from(\"products\")\r\n        .select(\r\n          `\r\n          *,\r\n          category:product_categories(*)\r\n        `,\r\n        )\r\n        .eq(\"status\", \"active\");\r\n\r\n      // 应用搜索过滤器\r\n      if (filters?.query) {\r\n        query = query.or(\r\n          `name.ilike.%${filters.query}%,description.ilike.%${filters.query}%`,\r\n        );\r\n      }\r\n\r\n      if (filters?.category) {\r\n        query = query.eq(\"category_id\", filters.category);\r\n      }\r\n\r\n      if (filters?.priceRange) {\r\n        query = query\r\n          .gte(\"price\", filters.priceRange[0])\r\n          .lte(\"price\", filters.priceRange[1]);\r\n      }\r\n\r\n      // 排序\r\n      const sortBy = filters?.sortBy || \"created_at\";\r\n      const sortOrder = filters?.sortOrder || \"desc\";\r\n\r\n      if (sortBy === \"name\") {\r\n        query = query.order(\"name\", { ascending: sortOrder === \"asc\" });\r\n      } else if (sortBy === \"price\") {\r\n        query = query.order(\"price\", { ascending: sortOrder === \"asc\" });\r\n      } else if (sortBy === \"created_at\") {\r\n        query = query.order(\"created_at\", { ascending: sortOrder === \"asc\" });\r\n      } else {\r\n        query = query.order(\"sort_order\", { ascending: true });\r\n      }\r\n\r\n      // 分页\r\n      const page = filters?.page || 1;\r\n      const limit = filters?.limit || 12;\r\n      const from = (page - 1) * limit;\r\n      const to = from + limit - 1;\r\n\r\n      query = query.range(from, to);\r\n\r\n      const { data, error, count } = await query;\r\n\r\n      if (error) throw error;\r\n\r\n      const products = data?.map(this.transformProduct) || [];\r\n\r\n      return {\r\n        items: products,\r\n        total: count || 0,\r\n        page,\r\n        limit,\r\n        hasMore: (count || 0) > page * limit,\r\n      };\r\n    } catch (error) {\r\n      console.error(\"获取产品列表失败:\", error);\r\n      throw new Error(\"获取产品列表失败\");\r\n    }\r\n  }\r\n\r\n  // 获取单个产品\r\n  static async getProduct(id: string): Promise<Product> {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from(\"products\")\r\n        .select(\r\n          `\r\n          *,\r\n          category:product_categories(*),\r\n          reviews:product_reviews(\r\n            *,\r\n            user:user_profiles(*)\r\n          )\r\n        `,\r\n        )\r\n        .eq(\"id\", id)\r\n        .eq(\"status\", \"active\")\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      if (!data) throw new Error(\"产品不存在\");\r\n\r\n      return this.transformProduct(data);\r\n    } catch (error) {\r\n      console.error(\"获取产品详情失败:\", error);\r\n      throw new Error(\"获取产品详情失败\");\r\n    }\r\n  }\r\n\r\n  // 获取特色产品\r\n  static async getFeaturedProducts(limit = 6): Promise<Product[]> {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from(\"products\")\r\n        .select(\r\n          `\r\n          *,\r\n          category:product_categories(*)\r\n        `,\r\n        )\r\n        .eq(\"status\", \"active\")\r\n        .eq(\"is_featured\", true)\r\n        .order(\"sort_order\", { ascending: true })\r\n        .limit(limit);\r\n\r\n      if (error) throw error;\r\n\r\n      return data?.map(this.transformProduct) || [];\r\n    } catch (error) {\r\n      console.error(\"获取特色产品失败:\", error);\r\n      throw new Error(\"获取特色产品失败\");\r\n    }\r\n  }\r\n\r\n  // 获取相关产品\r\n  static async getRelatedProducts(\r\n    productId: string,\r\n    categoryId: string,\r\n    limit = 4,\r\n  ): Promise<Product[]> {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from(\"products\")\r\n        .select(\r\n          `\r\n          *,\r\n          category:product_categories(*)\r\n        `,\r\n        )\r\n        .eq(\"status\", \"active\")\r\n        .eq(\"category_id\", categoryId)\r\n        .neq(\"id\", productId)\r\n        .order(\"created_at\", { ascending: false })\r\n        .limit(limit);\r\n\r\n      if (error) throw error;\r\n\r\n      return data?.map(this.transformProduct) || [];\r\n    } catch (error) {\r\n      console.error(\"获取相关产品失败:\", error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  // 创建产品\r\n  static async createProduct(productData: ProductInsert): Promise<Product> {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from(\"products\")\r\n        .insert(productData)\r\n        .select(\r\n          `\r\n          *,\r\n          category:product_categories(*)\r\n        `,\r\n        )\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      if (!data) throw new Error(\"创建产品失败\");\r\n\r\n      return this.transformProduct(data);\r\n    } catch (error) {\r\n      console.error(\"创建产品失败:\", error);\r\n      throw new Error(\"创建产品失败\");\r\n    }\r\n  }\r\n\r\n  // 更新产品\r\n  static async updateProduct(\r\n    id: string,\r\n    updates: ProductUpdate,\r\n  ): Promise<Product> {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from(\"products\")\r\n        .update({ ...updates, updated_at: new Date().toISOString() })\r\n        .eq(\"id\", id)\r\n        .select(\r\n          `\r\n          *,\r\n          category:product_categories(*)\r\n        `,\r\n        )\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      if (!data) throw new Error(\"更新产品失败\");\r\n\r\n      return this.transformProduct(data);\r\n    } catch (error) {\r\n      console.error(\"更新产品失败:\", error);\r\n      throw new Error(\"更新产品失败\");\r\n    }\r\n  }\r\n\r\n  // 删除产品\r\n  static async deleteProduct(id: string): Promise<void> {\r\n    try {\r\n      const { error } = await supabase.from(\"products\").delete().eq(\"id\", id);\r\n\r\n      if (error) throw error;\r\n    } catch (error) {\r\n      console.error(\"删除产品失败:\", error);\r\n      throw new Error(\"删除产品失败\");\r\n    }\r\n  }\r\n\r\n  // 搜索产品\r\n  static async searchProducts(\r\n    query: string,\r\n    filters?: Partial<SearchFilters>,\r\n  ): Promise<SearchResult<Product>> {\r\n    return this.getProducts({\r\n      ...filters,\r\n      query,\r\n    });\r\n  }\r\n\r\n  // 上传产品图片\r\n  static async uploadProductImage(\r\n    file: File,\r\n    productId: string,\r\n  ): Promise<string> {\r\n    try {\r\n      const fileExt = file.name.split(\".\").pop();\r\n      const fileName = `${productId}-${Date.now()}.${fileExt}`;\r\n      const filePath = `products/${fileName}`;\r\n\r\n      const { error: uploadError } = await supabase.storage\r\n        .from(\"product-images\")\r\n        .upload(filePath, file);\r\n\r\n      if (uploadError) throw uploadError;\r\n\r\n      const { data } = supabase.storage\r\n        .from(\"product-images\")\r\n        .getPublicUrl(filePath);\r\n\r\n      return data.publicUrl;\r\n    } catch (error) {\r\n      console.error(\"上传产品图片失败:\", error);\r\n      throw new Error(\"上传产品图片失败\");\r\n    }\r\n  }\r\n\r\n  // 转换数据库行为业务对象\r\n  private static transformProduct(row: any): Product {\r\n    return {\r\n      id: row.id,\r\n      name: row.name,\r\n      description: row.description,\r\n      shortDescription: row.short_description,\r\n      price: row.price,\r\n      originalPrice: row.original_price,\r\n      currency: row.currency,\r\n      category: {\r\n        id: row.category.id,\r\n        name: row.category.name,\r\n        description: row.category.description,\r\n        icon: row.category.icon,\r\n        color: row.category.color,\r\n        parentId: row.category.parent_id,\r\n        count: 0, // 这里需要单独计算\r\n        sortOrder: row.category.sort_order,\r\n        isActive: row.category.is_active,\r\n        createdAt: row.category.created_at,\r\n        updatedAt: row.category.updated_at,\r\n      },\r\n      images: row.images || [],\r\n      features: row.features || [],\r\n      demoUrl: row.demo_url,\r\n      downloadUrl: row.download_url,\r\n      isFeatured: row.is_featured,\r\n      isDigital: row.is_digital,\r\n      stockQuantity: row.stock_quantity,\r\n      status: row.status,\r\n      createdAt: row.created_at,\r\n      updatedAt: row.updated_at,\r\n      createdBy: row.created_by,\r\n      metaTitle: row.meta_title,\r\n      metaDescription: row.meta_description,\r\n      sortOrder: row.sort_order,\r\n      reviews:\r\n        row.reviews?.map((review: any) => ({\r\n          id: review.id,\r\n          userId: review.user_id,\r\n          user: review.user\r\n            ? {\r\n                id: review.user.id,\r\n                email: review.user.email,\r\n                username: review.user.username,\r\n                fullName: review.user.full_name,\r\n                avatarUrl: review.user.avatar_url,\r\n                bio: review.user.bio,\r\n                website: review.user.website,\r\n                location: review.user.location,\r\n                role: review.user.role,\r\n                isActive: review.user.is_active,\r\n                emailVerified: review.user.email_verified,\r\n                createdAt: review.user.created_at,\r\n                updatedAt: review.user.updated_at,\r\n                lastLoginAt: review.user.last_login_at,\r\n              }\r\n            : undefined,\r\n          productId: review.product_id,\r\n          rating: review.rating,\r\n          title: review.title,\r\n          content: review.content,\r\n          isVerified: review.is_verified,\r\n          createdAt: review.created_at,\r\n          updatedAt: review.updated_at,\r\n        })) || [],\r\n      averageRating: row.average_rating,\r\n      totalReviews: row.total_reviews,\r\n    };\r\n  }\r\n}\r\n","import { defineStore } from \"pinia\";\r\nimport { ref, computed } from \"vue\";\r\nimport { ProductsService } from \"../services/productsService\";\r\nimport type { Product, Category, SearchFilters, SearchResult } from \"../types\";\r\n\r\nexport const useProductsStore = defineStore(\"products\", () => {\r\n  // 状态\r\n  const loading = ref(false);\r\n  const error = ref<string | null>(null);\r\n  const initialized = ref(false);\r\n\r\n  // 数据\r\n  const products = ref<Product[]>([]);\r\n  const categories = ref<Category[]>([]);\r\n  const searchResult = ref<SearchResult<Product> | null>(null);\r\n  const featuredProducts = ref<Product[]>([]);\r\n  const currentProduct = ref<Product | null>(null);\r\n\r\n  // 搜索和筛选状态\r\n  const searchQuery = ref(\"\");\r\n  const selectedCategory = ref(\"\");\r\n  const priceRange = ref<[number, number] | null>(null);\r\n  const sortBy = ref(\"created_at\");\r\n  const sortOrder = ref<\"asc\" | \"desc\">(\"desc\");\r\n\r\n  // 计算属性\r\n  const filteredProducts = computed(() => {\r\n    if (searchResult.value) {\r\n      return searchResult.value.items;\r\n    }\r\n    return products.value;\r\n  });\r\n\r\n  const totalProducts = computed(() => {\r\n    return searchResult.value\r\n      ? searchResult.value.total\r\n      : products.value.length;\r\n  });\r\n\r\n  const productsByCategory = computed(() => {\r\n    const grouped = new Map<string, Product[]>();\r\n    products.value.forEach((product) => {\r\n      const categoryId = product.category.id;\r\n      if (!grouped.has(categoryId)) {\r\n        grouped.set(categoryId, []);\r\n      }\r\n      grouped.get(categoryId)!.push(product);\r\n    });\r\n    return grouped;\r\n  });\r\n\r\n  const recentProducts = computed(() =>\r\n    [...products.value]\r\n      .sort(\r\n        (a, b) =>\r\n          new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime(),\r\n      )\r\n      .slice(0, 6),\r\n  );\r\n\r\n  // 方法\r\n  const loadProducts = async (filters?: SearchFilters) => {\r\n    try {\r\n      loading.value = true;\r\n      error.value = null;\r\n\r\n      const result = await ProductsService.getProducts(filters);\r\n\r\n      if (filters) {\r\n        searchResult.value = result;\r\n      } else {\r\n        products.value = result.items;\r\n        searchResult.value = null;\r\n      }\r\n\r\n      return result;\r\n    } catch (err) {\r\n      error.value = err instanceof Error ? err.message : \"加载产品失败\";\r\n      console.error(\"Error loading products:\", err);\r\n      throw err;\r\n    } finally {\r\n      loading.value = false;\r\n    }\r\n  };\r\n\r\n  const loadProduct = async (id: string) => {\r\n    try {\r\n      loading.value = true;\r\n      error.value = null;\r\n\r\n      const product = await ProductsService.getProduct(id);\r\n      currentProduct.value = product;\r\n\r\n      return product;\r\n    } catch (err) {\r\n      error.value = err instanceof Error ? err.message : \"加载产品详情失败\";\r\n      console.error(\"Error loading product:\", err);\r\n      throw err;\r\n    } finally {\r\n      loading.value = false;\r\n    }\r\n  };\r\n\r\n  const loadFeaturedProducts = async (limit = 6) => {\r\n    try {\r\n      const featured = await ProductsService.getFeaturedProducts(limit);\r\n      featuredProducts.value = featured;\r\n      return featured;\r\n    } catch (err) {\r\n      console.error(\"Error loading featured products:\", err);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const loadRelatedProducts = async (\r\n    productId: string,\r\n    categoryId: string,\r\n    limit = 4,\r\n  ) => {\r\n    try {\r\n      return await ProductsService.getRelatedProducts(\r\n        productId,\r\n        categoryId,\r\n        limit,\r\n      );\r\n    } catch (err) {\r\n      console.error(\"Error loading related products:\", err);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const searchProducts = async (\r\n    query: string,\r\n    filters?: Partial<SearchFilters>,\r\n  ) => {\r\n    if (!query.trim()) {\r\n      searchResult.value = null;\r\n      return;\r\n    }\r\n\r\n    try {\r\n      loading.value = true;\r\n      error.value = null;\r\n\r\n      const searchFilters: SearchFilters = {\r\n        query: query.trim(),\r\n        category: selectedCategory.value || undefined,\r\n        priceRange: priceRange.value || undefined,\r\n        sortBy: sortBy.value,\r\n        sortOrder: sortOrder.value,\r\n        limit: 20,\r\n        ...filters,\r\n      };\r\n\r\n      await loadProducts(searchFilters);\r\n    } catch (err) {\r\n      error.value = err instanceof Error ? err.message : \"搜索产品失败\";\r\n      console.error(\"Error searching products:\", err);\r\n    } finally {\r\n      loading.value = false;\r\n    }\r\n  };\r\n\r\n  const createProduct = async (productData: Partial<Product>) => {\r\n    try {\r\n      loading.value = true;\r\n      error.value = null;\r\n\r\n      const newProduct = await ProductsService.createProduct(\r\n        productData as any,\r\n      );\r\n      products.value.unshift(newProduct);\r\n\r\n      return newProduct;\r\n    } catch (err) {\r\n      error.value = err instanceof Error ? err.message : \"创建产品失败\";\r\n      console.error(\"Error creating product:\", err);\r\n      throw err;\r\n    } finally {\r\n      loading.value = false;\r\n    }\r\n  };\r\n\r\n  const updateProduct = async (id: string, productData: Partial<Product>) => {\r\n    try {\r\n      loading.value = true;\r\n      error.value = null;\r\n\r\n      const updatedProduct = await ProductsService.updateProduct(\r\n        id,\r\n        productData as any,\r\n      );\r\n\r\n      const index = products.value.findIndex((p) => p.id === id);\r\n      if (index !== -1) {\r\n        products.value[index] = updatedProduct;\r\n      }\r\n\r\n      if (currentProduct.value?.id === id) {\r\n        currentProduct.value = updatedProduct;\r\n      }\r\n\r\n      return updatedProduct;\r\n    } catch (err) {\r\n      error.value = err instanceof Error ? err.message : \"更新产品失败\";\r\n      console.error(\"Error updating product:\", err);\r\n      throw err;\r\n    } finally {\r\n      loading.value = false;\r\n    }\r\n  };\r\n\r\n  const deleteProduct = async (id: string) => {\r\n    try {\r\n      loading.value = true;\r\n      error.value = null;\r\n\r\n      await ProductsService.deleteProduct(id);\r\n      products.value = products.value.filter((p) => p.id !== id);\r\n\r\n      if (currentProduct.value?.id === id) {\r\n        currentProduct.value = null;\r\n      }\r\n    } catch (err) {\r\n      error.value = err instanceof Error ? err.message : \"删除产品失败\";\r\n      console.error(\"Error deleting product:\", err);\r\n      throw err;\r\n    } finally {\r\n      loading.value = false;\r\n    }\r\n  };\r\n\r\n  const uploadProductImage = async (file: File, productId: string) => {\r\n    try {\r\n      loading.value = true;\r\n      error.value = null;\r\n\r\n      const imageUrl = await ProductsService.uploadProductImage(\r\n        file,\r\n        productId,\r\n      );\r\n      return imageUrl;\r\n    } catch (err) {\r\n      error.value = err instanceof Error ? err.message : \"上传图片失败\";\r\n      console.error(\"Error uploading product image:\", err);\r\n      throw err;\r\n    } finally {\r\n      loading.value = false;\r\n    }\r\n  };\r\n\r\n  // 筛选和排序方法\r\n  const setSearchQuery = (query: string) => {\r\n    searchQuery.value = query;\r\n    if (query.trim()) {\r\n      searchProducts(query);\r\n    } else {\r\n      searchResult.value = null;\r\n    }\r\n  };\r\n\r\n  const setSelectedCategory = (categoryId: string) => {\r\n    selectedCategory.value = categoryId;\r\n    if (searchQuery.value.trim()) {\r\n      searchProducts(searchQuery.value);\r\n    }\r\n  };\r\n\r\n  const setPriceRange = (range: [number, number] | null) => {\r\n    priceRange.value = range;\r\n    if (searchQuery.value.trim()) {\r\n      searchProducts(searchQuery.value);\r\n    }\r\n  };\r\n\r\n  const setSortBy = (sort: string) => {\r\n    sortBy.value = sort;\r\n    if (searchQuery.value.trim()) {\r\n      searchProducts(searchQuery.value);\r\n    }\r\n  };\r\n\r\n  const setSortOrder = (order: \"asc\" | \"desc\") => {\r\n    sortOrder.value = order;\r\n    if (searchQuery.value.trim()) {\r\n      searchProducts(searchQuery.value);\r\n    }\r\n  };\r\n\r\n  const clearFilters = () => {\r\n    searchQuery.value = \"\";\r\n    selectedCategory.value = \"\";\r\n    priceRange.value = null;\r\n    sortBy.value = \"created_at\";\r\n    sortOrder.value = \"desc\";\r\n    searchResult.value = null;\r\n  };\r\n\r\n  const clearError = () => {\r\n    error.value = null;\r\n  };\r\n\r\n  // 初始化\r\n  const initialize = async () => {\r\n    if (initialized.value) return;\r\n\r\n    try {\r\n      await Promise.all([loadProducts(), loadFeaturedProducts()]);\r\n      initialized.value = true;\r\n    } catch (err) {\r\n      console.error(\"Error initializing products store:\", err);\r\n    }\r\n  };\r\n\r\n  return {\r\n    // 状态\r\n    loading,\r\n    error,\r\n    initialized,\r\n\r\n    // 数据\r\n    products,\r\n    categories,\r\n    searchResult,\r\n    featuredProducts,\r\n    currentProduct,\r\n\r\n    // 搜索和筛选状态\r\n    searchQuery,\r\n    selectedCategory,\r\n    priceRange,\r\n    sortBy,\r\n    sortOrder,\r\n\r\n    // 计算属性\r\n    filteredProducts,\r\n    totalProducts,\r\n    productsByCategory,\r\n    recentProducts,\r\n\r\n    // 方法\r\n    initialize,\r\n    loadProducts,\r\n    loadProduct,\r\n    loadFeaturedProducts,\r\n    loadRelatedProducts,\r\n    searchProducts,\r\n    createProduct,\r\n    updateProduct,\r\n    deleteProduct,\r\n    uploadProductImage,\r\n\r\n    // 筛选和排序方法\r\n    setSearchQuery,\r\n    setSelectedCategory,\r\n    setPriceRange,\r\n    setSortBy,\r\n    setSortOrder,\r\n    clearFilters,\r\n    clearError,\r\n  };\r\n});\r\n","<template>\r\n  <div class=\"min-h-screen bg-gray-50\">\r\n    <!-- 页面头部 -->\r\n    <div class=\"bg-white shadow-sm\">\r\n      <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        <div class=\"text-center\">\r\n          <h1 class=\"text-3xl font-bold text-gray-900\">产品上传</h1>\r\n          <p class=\"mt-4 text-lg text-gray-600\">\r\n            分享您的优质产品，让更多用户发现和使用\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 主要内容 -->\r\n    <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\r\n      <!-- 上传须知 -->\r\n      <div class=\"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8\">\r\n        <h2 class=\"text-lg font-semibold text-blue-900 mb-3 flex items-center\">\r\n          <Info class=\"w-5 h-5 mr-2\" />\r\n          上传须知\r\n        </h2>\r\n        <ul class=\"text-sm text-blue-800 space-y-2\">\r\n          <li>• 产品必须是原创或拥有合法授权</li>\r\n          <li>• 提供详细的产品描述和使用说明</li>\r\n          <li>• 上传高质量的产品截图或演示视频</li>\r\n          <li>• 设置合理的价格，支持免费产品</li>\r\n          <li>• 审核通过后产品将在1-3个工作日内上线</li>\r\n        </ul>\r\n      </div>\r\n\r\n      <!-- 上传表单 -->\r\n      <div class=\"bg-white rounded-lg shadow-md p-8\">\r\n        <form class=\"space-y-8\" @submit.prevent=\"submitProduct\">\r\n          <!-- 基本信息 -->\r\n          <div>\r\n            <h3 class=\"text-xl font-semibold text-gray-900 mb-6\">基本信息</h3>\r\n            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <!-- 产品名称 -->\r\n              <div class=\"md:col-span-2\">\r\n                <label\r\n                  for=\"name\"\r\n                  class=\"block text-sm font-medium text-gray-700 mb-2\"\r\n                >\r\n                  产品名称 <span class=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  id=\"name\"\r\n                  v-model=\"form.name\"\r\n                  type=\"text\"\r\n                  required\r\n                  class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  placeholder=\"请输入产品名称\"\r\n                />\r\n              </div>\r\n\r\n              <!-- 产品分类 -->\r\n              <div>\r\n                <label\r\n                  for=\"category\"\r\n                  class=\"block text-sm font-medium text-gray-700 mb-2\"\r\n                >\r\n                  产品分类 <span class=\"text-red-500\">*</span>\r\n                </label>\r\n                <select\r\n                  id=\"category\"\r\n                  v-model=\"form.category_id\"\r\n                  required\r\n                  class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                >\r\n                  <option value=\"\">请选择分类</option>\r\n                  <option\r\n                    v-for=\"category in categories\"\r\n                    :key=\"category.id\"\r\n                    :value=\"category.id\"\r\n                  >\r\n                    {{ category.name }}\r\n                  </option>\r\n                </select>\r\n              </div>\r\n\r\n              <!-- 产品类型 -->\r\n              <div>\r\n                <label\r\n                  for=\"type\"\r\n                  class=\"block text-sm font-medium text-gray-700 mb-2\"\r\n                >\r\n                  产品类型 <span class=\"text-red-500\">*</span>\r\n                </label>\r\n                <select\r\n                  id=\"type\"\r\n                  v-model=\"form.type\"\r\n                  required\r\n                  class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                >\r\n                  <option value=\"\">请选择类型</option>\r\n                  <option value=\"software\">软件工具</option>\r\n                  <option value=\"template\">模板素材</option>\r\n                  <option value=\"course\">教程课程</option>\r\n                  <option value=\"service\">服务</option>\r\n                  <option value=\"other\">其他</option>\r\n                </select>\r\n              </div>\r\n\r\n              <!-- 价格设置 -->\r\n              <div>\r\n                <label\r\n                  for=\"price\"\r\n                  class=\"block text-sm font-medium text-gray-700 mb-2\"\r\n                >\r\n                  价格（元） <span class=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  id=\"price\"\r\n                  v-model.number=\"form.price\"\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                  required\r\n                  class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  placeholder=\"0.00（免费请输入0）\"\r\n                />\r\n              </div>\r\n\r\n              <!-- 产品链接 -->\r\n              <div>\r\n                <label\r\n                  for=\"url\"\r\n                  class=\"block text-sm font-medium text-gray-700 mb-2\"\r\n                >\r\n                  产品链接\r\n                </label>\r\n                <input\r\n                  id=\"url\"\r\n                  v-model=\"form.url\"\r\n                  type=\"url\"\r\n                  class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                  placeholder=\"https://example.com\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 产品描述 -->\r\n          <div>\r\n            <h3 class=\"text-xl font-semibold text-gray-900 mb-6\">产品描述</h3>\r\n\r\n            <!-- 简短描述 -->\r\n            <div class=\"mb-6\">\r\n              <label\r\n                for=\"description\"\r\n                class=\"block text-sm font-medium text-gray-700 mb-2\"\r\n              >\r\n                简短描述 <span class=\"text-red-500\">*</span>\r\n              </label>\r\n              <textarea\r\n                id=\"description\"\r\n                v-model=\"form.description\"\r\n                rows=\"3\"\r\n                required\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\r\n                placeholder=\"请简要描述您的产品特点和用途...\"\r\n              ></textarea>\r\n              <div class=\"mt-1 text-sm text-gray-500\">\r\n                {{ form.description.length }}/200 字符\r\n              </div>\r\n            </div>\r\n\r\n            <!-- 详细介绍 -->\r\n            <div>\r\n              <label\r\n                for=\"content\"\r\n                class=\"block text-sm font-medium text-gray-700 mb-2\"\r\n              >\r\n                详细介绍\r\n              </label>\r\n              <textarea\r\n                id=\"content\"\r\n                v-model=\"form.content\"\r\n                rows=\"8\"\r\n                class=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\r\n                placeholder=\"请详细介绍产品功能、使用方法、适用场景等...\"\r\n              ></textarea>\r\n              <div class=\"mt-1 text-sm text-gray-500\">\r\n                {{ form.content.length }}/2000 字符\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 产品图片 -->\r\n          <div>\r\n            <h3 class=\"text-xl font-semibold text-gray-900 mb-6\">产品图片</h3>\r\n\r\n            <!-- 主图上传 -->\r\n            <div class=\"mb-6\">\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                产品主图 <span class=\"text-red-500\">*</span>\r\n              </label>\r\n              <div\r\n                class=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\"\r\n              >\r\n                <div v-if=\"!form.main_image\" class=\"space-y-2\">\r\n                  <Upload class=\"w-12 h-12 text-gray-400 mx-auto\" />\r\n                  <p class=\"text-sm text-gray-600\">点击上传产品主图</p>\r\n                  <p class=\"text-xs text-gray-500\">\r\n                    支持 JPG、PNG 格式，建议尺寸 800x600\r\n                  </p>\r\n                </div>\r\n                <div v-else class=\"space-y-2\">\r\n                  <img\r\n                    :src=\"form.main_image\"\r\n                    alt=\"产品主图\"\r\n                    class=\"w-32 h-24 object-cover mx-auto rounded\"\r\n                  />\r\n                </div>\r\n                <input\r\n                  ref=\"mainImageInput\"\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  class=\"hidden\"\r\n                  @change=\"handleMainImageUpload\"\r\n                />\r\n                <button\r\n                  class=\"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium\"\r\n                  type=\"button\"\r\n                  @click=\"handleMainImageClick\"\r\n                >\r\n                  {{ form.main_image ? \"更换图片\" : \"选择图片\" }}\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- 附加图片 -->\r\n            <div>\r\n              <label class=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                附加图片（可选）\r\n              </label>\r\n              <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                <template\r\n                  v-for=\"(image, index) in form.additional_images\"\r\n                  :key=\"index\"\r\n                >\r\n                  <div class=\"relative\">\r\n                    <img\r\n                      :src=\"image\"\r\n                      alt=\"附加图片\"\r\n                      class=\"w-full h-20 object-cover rounded\"\r\n                    />\r\n                    <button\r\n                      class=\"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600\"\r\n                      type=\"button\"\r\n                      @click=\"removeAdditionalImage(index)\"\r\n                    >\r\n                      <X class=\"w-3 h-3\" />\r\n                    </button>\r\n                  </div>\r\n                </template>\r\n                <div\r\n                  v-if=\"form.additional_images.length < 4\"\r\n                  class=\"border-2 border-dashed border-gray-300 rounded-lg p-4 flex flex-col items-center justify-center cursor-pointer hover:border-gray-400\"\r\n                  @click=\"handleAdditionalImagesClick\"\r\n                >\r\n                  <Plus class=\"w-6 h-6 text-gray-400 mb-1\" />\r\n                  <span class=\"text-xs text-gray-500\">添加图片</span>\r\n                </div>\r\n              </div>\r\n              <input\r\n                ref=\"additionalImageInput\"\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                multiple\r\n                class=\"hidden\"\r\n                @change=\"handleAdditionalImagesUpload\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 标签 -->\r\n          <div>\r\n            <h3 class=\"text-xl font-semibold text-gray-900 mb-6\">产品标签</h3>\r\n            <div class=\"space-y-4\">\r\n              <div>\r\n                <label\r\n                  for=\"tags\"\r\n                  class=\"block text-sm font-medium text-gray-700 mb-2\"\r\n                >\r\n                  添加标签\r\n                </label>\r\n                <div class=\"flex space-x-2\">\r\n                  <input\r\n                    v-model=\"newTag\"\r\n                    type=\"text\"\r\n                    class=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    placeholder=\"输入标签名称\"\r\n                    @keyup.enter=\"addTag\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                    @click=\"addTag\"\r\n                  >\r\n                    添加\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <!-- 标签列表 -->\r\n              <div v-if=\"form.tags.length > 0\" class=\"flex flex-wrap gap-2\">\r\n                <span\r\n                  v-for=\"(tag, index) in form.tags\"\r\n                  :key=\"index\"\r\n                  class=\"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm\"\r\n                >\r\n                  {{ tag }}\r\n                  <button\r\n                    class=\"ml-2 text-blue-600 hover:text-blue-800\"\r\n                    type=\"button\"\r\n                    @click=\"removeTag(index)\"\r\n                  >\r\n                    <X class=\"w-3 h-3\" />\r\n                  </button>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 提交按钮 -->\r\n          <div class=\"flex justify-end space-x-4 pt-6 border-t border-gray-200\">\r\n            <button\r\n              class=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\r\n              type=\"button\"\r\n              @click=\"resetForm\"\r\n            >\r\n              重置\r\n            </button>\r\n            <button\r\n              class=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center\"\r\n              type=\"submit\"\r\n              :disabled=\"isSubmitting\"\r\n            >\r\n              <Loader2 v-if=\"isSubmitting\" class=\"w-4 h-4 mr-2 animate-spin\" />\r\n              {{ isSubmitting ? \"提交中...\" : \"提交审核\" }}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <!-- 审核流程说明 -->\r\n      <div class=\"mt-12 bg-gray-100 rounded-lg p-6\">\r\n        <h3 class=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\r\n          <Clock class=\"w-5 h-5 mr-2 text-gray-600\" />\r\n          审核流程\r\n        </h3>\r\n        <div class=\"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm\">\r\n          <div class=\"text-center\">\r\n            <div\r\n              class=\"w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-2 font-semibold\"\r\n            >\r\n              1\r\n            </div>\r\n            <p class=\"font-medium\">提交产品</p>\r\n            <p class=\"text-gray-600\">填写完整信息</p>\r\n          </div>\r\n          <div class=\"text-center\">\r\n            <div\r\n              class=\"w-8 h-8 bg-yellow-100 text-yellow-600 rounded-full flex items-center justify-center mx-auto mb-2 font-semibold\"\r\n            >\r\n              2\r\n            </div>\r\n            <p class=\"font-medium\">初步审核</p>\r\n            <p class=\"text-gray-600\">1个工作日内</p>\r\n          </div>\r\n          <div class=\"text-center\">\r\n            <div\r\n              class=\"w-8 h-8 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mx-auto mb-2 font-semibold\"\r\n            >\r\n              3\r\n            </div>\r\n            <p class=\"font-medium\">详细审核</p>\r\n            <p class=\"text-gray-600\">2-3个工作日</p>\r\n          </div>\r\n          <div class=\"text-center\">\r\n            <div\r\n              class=\"w-8 h-8 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-2 font-semibold\"\r\n            >\r\n              4\r\n            </div>\r\n            <p class=\"font-medium\">上线发布</p>\r\n            <p class=\"text-gray-600\">审核通过后</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive } from \"vue\";\r\nimport type { Ref } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useProductsStore } from \"@/stores/products\";\r\nimport { Info, Upload, X, Plus, Clock, Loader2 } from \"lucide-vue-next\";\r\n\r\nconst router = useRouter();\r\nconst productsStore = useProductsStore();\r\n\r\n// 分类数据\r\nconst categories = ref([\r\n  { id: 1, name: \"开发工具\" },\r\n  { id: 2, name: \"设计工具\" },\r\n  { id: 3, name: \"办公软件\" },\r\n  { id: 4, name: \"学习资源\" },\r\n  { id: 5, name: \"其他工具\" },\r\n]);\r\n\r\n// 表单数据\r\nconst mainImageInput = ref<HTMLInputElement>();\r\nconst additionalImageInput = ref<HTMLInputElement>();\r\n\r\nconst form = reactive({\r\n  name: \"\",\r\n  category_id: \"\",\r\n  type: \"\",\r\n  price: 0,\r\n  url: \"\",\r\n  description: \"\",\r\n  content: \"\",\r\n  main_image: \"\" as string,\r\n  additional_images: [] as string[],\r\n  tags: [] as string[],\r\n});\r\n\r\n// 状态\r\nconst isSubmitting = ref(false);\r\nconst newTag = ref(\"\");\r\n\r\n// 方法\r\nconst handleMainImageUpload = (event: Event) => {\r\n  const target = event.target as HTMLInputElement;\r\n  if (target.files && target.files[0]) {\r\n    const file = target.files[0];\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      form.main_image = e.target?.result as string;\r\n    };\r\n    reader.readAsDataURL(file);\r\n  }\r\n};\r\n\r\nconst handleAdditionalImagesUpload = (event: Event) => {\r\n  const target = event.target as HTMLInputElement;\r\n  if (target.files) {\r\n    const files = Array.from(target.files);\r\n    files.forEach((file) => {\r\n      if (form.additional_images.length < 4) {\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n          form.additional_images.push(e.target?.result as string);\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nconst removeAdditionalImage = (index: number) => {\r\n  form.additional_images.splice(index, 1);\r\n};\r\n\r\nconst addTag = () => {\r\n  if (newTag.value.trim() && !form.tags.includes(newTag.value.trim())) {\r\n    form.tags.push(newTag.value.trim());\r\n    newTag.value = \"\";\r\n  }\r\n};\r\n\r\nconst removeTag = (index: number) => {\r\n  form.tags.splice(index, 1);\r\n};\r\n\r\nconst resetForm = () => {\r\n  Object.assign(form, {\r\n    name: \"\",\r\n    category_id: \"\",\r\n    type: \"\",\r\n    price: 0,\r\n    url: \"\",\r\n    description: \"\",\r\n    content: \"\",\r\n    main_image: \"\",\r\n    additional_images: [],\r\n    tags: [],\r\n  });\r\n  newTag.value = \"\";\r\n};\r\n\r\n// 点击处理函数\r\nconst handleMainImageClick = () => {\r\n  mainImageInput.value?.click();\r\n};\r\n\r\nconst handleAdditionalImagesClick = () => {\r\n  additionalImageInput.value?.click();\r\n};\r\n\r\nconst submitProduct = async () => {\r\n  if (\r\n    !form.name ||\r\n    !form.category_id ||\r\n    !form.type ||\r\n    !form.description ||\r\n    !form.main_image\r\n  ) {\r\n    alert(\"请填写必填字段\");\r\n    return;\r\n  }\r\n\r\n  isSubmitting.value = true;\r\n\r\n  try {\r\n    // 准备产品数据\r\n    const productData = {\r\n      name: form.name,\r\n      category_id: form.category_id,\r\n      type: form.type,\r\n      price: form.price,\r\n      url: form.url,\r\n      description: form.description,\r\n      content: form.content,\r\n      tags: form.tags,\r\n      main_image: form.main_image,\r\n      additional_images: form.additional_images,\r\n    };\r\n\r\n    // 调用store创建产品\r\n    await productsStore.createProduct(productData);\r\n\r\n    // 提交成功后重置表单并跳转\r\n    resetForm();\r\n    router.push({ name: \"Products\" });\r\n    alert(\"产品提交成功！我们会在1-3个工作日内完成审核。\");\r\n  } catch (error) {\r\n    console.error(\"产品提交失败:\", error);\r\n    alert(\"产品提交失败，请稍后重试\");\r\n  } finally {\r\n    isSubmitting.value = false;\r\n  }\r\n};\r\n</script>\r\n"],"names":["ProductsService","getProducts","filters","query","supabase","from","select","eq","or","category","priceRange","gte","lte","sortBy","sortOrder","order","ascending","page","limit","to","range","data","error","count","items","map","this","transformProduct","total","hasMore","console","Error","getProduct","id","single","getFeaturedProducts","getRelatedProducts","productId","categoryId","neq","createProduct","productData","insert","updateProduct","updates","update","updated_at","Date","toISOString","deleteProduct","delete","searchProducts","uploadProductImage","file","fileExt","name","split","pop","filePath","now","uploadError","storage","upload","getPublicUrl","publicUrl","row","description","shortDescription","short_description","price","originalPrice","original_price","currency","icon","color","parentId","parent_id","sort_order","isActive","is_active","createdAt","created_at","updatedAt","images","features","demoUrl","demo_url","downloadUrl","download_url","isFeatured","is_featured","isDigital","is_digital","stockQuantity","stock_quantity","status","createdBy","created_by","metaTitle","meta_title","metaDescription","meta_description","reviews","_a","review","userId","user_id","user","email","username","fullName","full_name","avatarUrl","avatar_url","bio","website","location","role","emailVerified","email_verified","lastLoginAt","last_login_at","product_id","rating","title","content","isVerified","is_verified","averageRating","average_rating","totalReviews","total_reviews","useProductsStore","defineStore","loading","ref","initialized","products","categories","searchResult","featuredProducts","currentProduct","searchQuery","selectedCategory","filteredProducts","computed","value","totalProducts","length","productsByCategory","grouped","Map","forEach","product","has","set","get","push","recentProducts","sort","a","b","getTime","slice","loadProducts","async","result","err","message","loadFeaturedProducts","featured","trim","searchFilters","initialize","Promise","all","loadProduct","loadRelatedProducts","newProduct","unshift","updatedProduct","index","findIndex","p","filter","setSearchQuery","setSelectedCategory","setPriceRange","setSortBy","setSortOrder","clearFilters","clearError","router","useRouter","productsStore","mainImageInput","additionalImageInput","form","reactive","category_id","type","url","main_image","additional_images","tags","isSubmitting","newTag","handleMainImageUpload","event","target","files","reader","FileReader","onload","e","readAsDataURL","handleAdditionalImagesUpload","Array","addTag","includes","resetForm","Object","assign","handleMainImageClick","click","handleAdditionalImagesClick","submitProduct","alert","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_unref","Info","class","_hoisted_5","onSubmit","_cache","_hoisted_6","_hoisted_7","for","$event","required","placeholder","_vModelText","_Fragment","_renderList","key","_toDisplayString","_hoisted_8","_vModelSelect","min","step","number","_hoisted_9","rows","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_15","src","alt","_hoisted_14","Upload","accept","onChange","onClick","_hoisted_17","image","splice","removeAdditionalImage","X","Plus","multiple","_hoisted_20","_hoisted_21","onKeyup","_hoisted_22","tag","_createTextVNode","removeTag","_hoisted_24","disabled","_createBlock","Loader2","_hoisted_26","_hoisted_27","Clock"],"mappings":"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"}