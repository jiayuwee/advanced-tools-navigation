import{d as a,r as e,c as l,o as s,m as o,q as i,t,y as c,N as r,u,aE as n,A as d,a2 as v,B as p,D as m,a7 as g,aG as b,F as f,z as y,C as h,H as k,aQ as C,aR as P,X as w,x,G as U}from"./vendor-DNhI5biu.js";import{_ as V}from"./index-B1TH_aNL.js";const q={class:"products-manage-view"},I={class:"page-header"},_={class:"filters"},D={class:"search-box"},L={class:"products-table"},j={key:0,class:"loading-state"},A={key:1,class:"empty-state"},N={key:2,class:"table-body"},S={class:"col-image"},G=["src","alt"],O={class:"col-name"},R={class:"product-name"},z={class:"product-description"},B={class:"col-category"},E={class:"category-tag"},F={class:"col-price"},H={class:"price"},M={key:0,class:"original-price"},Q={class:"col-status"},T={class:"col-actions"},J=["onClick"],K=["onClick"],W={class:"modal-header"},X={class:"modal-body"},Y={class:"form-group"},Z={class:"form-group"},$={class:"form-row"},aa={class:"form-group"},ea={class:"form-group"},la={class:"form-group"},sa={class:"form-group"},oa={class:"form-group"},ia={class:"modal-footer"},ta=["disabled"],ca=V(a({__name:"ProductsManageView",setup(a){const V=e(!0),ca=e(!1),ra=e(""),ua=e(""),na=e(!1),da=e(!1),va=e(null),pa=e({name:"",description:"",price:0,originalPrice:null,image:"",category:"",status:"active"}),ma=e([{id:1,name:"高效办公套件",description:"提升办公效率的完整解决方案",price:299,originalPrice:399,image:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=100&h=100&fit=crop",category:"办公工具",status:"active"},{id:2,name:"设计师工具包",description:"专业设计师必备工具集合",price:199,image:"https://images.unsplash.com/photo-1558655146-9f40138edfeb?w=100&h=100&fit=crop",category:"设计工具",status:"active"},{id:3,name:"开发者助手",description:"程序员开发必备工具",price:399,originalPrice:499,image:"https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=100&h=100&fit=crop",category:"开发工具",status:"draft"}]),ga=l(()=>{let a=ma.value;if(ra.value.trim()){const e=ra.value.toLowerCase();a=a.filter(a=>a.name.toLowerCase().includes(e)||a.description.toLowerCase().includes(e))}return ua.value&&(a=a.filter(a=>a.status===ua.value)),a}),ba=async()=>{try{if(ca.value=!0,!pa.value.name||!pa.value.description||!pa.value.price)return void alert("请填写所有必填字段");if(na.value){const a={id:Date.now(),...pa.value};ma.value.push(a),console.log("添加产品:",a)}else if(da.value&&va.value){const a=ma.value.findIndex(a=>a.id===va.value.id);-1!==a&&(ma.value[a]={...va.value,...pa.value},console.log("更新产品:",ma.value[a]))}ya(),fa()}catch(a){console.error("保存产品失败:",a),alert("保存产品失败，请重试")}finally{ca.value=!1}},fa=()=>{pa.value={name:"",description:"",price:0,originalPrice:null,image:"",category:"",status:"active"}},ya=()=>{na.value=!1,da.value=!1,va.value=null,fa()};return s(()=>{setTimeout(()=>{V.value=!1},1e3)}),(a,e)=>(U(),o("div",q,[i("div",I,[e[12]||(e[12]=i("h2",{class:"page-title"},"产品管理",-1)),i("button",{class:"add-btn",onClick:e[0]||(e[0]=a=>na.value=!0)},[c(u(n),{class:"icon"}),e[11]||(e[11]=r(" 添加产品 "))])]),i("div",_,[i("div",D,[c(u(v),{class:"search-icon"}),d(i("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>ra.value=a),type:"text",placeholder:"搜索产品...",class:"search-input"},null,512),[[p,ra.value]])]),d(i("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>ua.value=a),class:"status-filter"},e[13]||(e[13]=[i("option",{value:""},"全部状态",-1),i("option",{value:"active"},"已发布",-1),i("option",{value:"draft"},"草稿",-1),i("option",{value:"inactive"},"已下架",-1)]),512),[[m,ua.value]])]),i("div",L,[e[17]||(e[17]=g('<div class="table-header" data-v-113201b5><div class="col-image" data-v-113201b5>图片</div><div class="col-name" data-v-113201b5>产品名称</div><div class="col-category" data-v-113201b5>分类</div><div class="col-price" data-v-113201b5>价格</div><div class="col-status" data-v-113201b5>状态</div><div class="col-actions" data-v-113201b5>操作</div></div>',1)),V.value?(U(),o("div",j,e[14]||(e[14]=[i("div",{class:"loading-spinner"},null,-1),i("p",null,"加载中...",-1)]))):0===ga.value.length?(U(),o("div",A,[c(u(b),{class:"empty-icon"}),e[15]||(e[15]=i("h3",null,"暂无产品",-1)),e[16]||(e[16]=i("p",null,"还没有添加任何产品",-1))])):(U(),o("div",N,[(U(!0),o(f,null,y(ga.value,a=>{return U(),o("div",{key:a.id,class:"table-row"},[i("div",S,[i("img",{src:a.image,alt:a.name,class:"product-image"},null,8,G)]),i("div",O,[i("div",R,h(a.name),1),i("div",z,h(a.description),1)]),i("div",B,[i("span",E,h(a.category),1)]),i("div",F,[i("div",H,"¥"+h(a.price),1),a.originalPrice?(U(),o("div",M," ¥"+h(a.originalPrice),1)):t("",!0)]),i("div",Q,[i("span",{class:k(["status-badge",a.status])},h((e=a.status,{active:"已发布",draft:"草稿",inactive:"已下架"}[e]||e)),3)]),i("div",T,[i("button",{class:"action-btn edit",onClick:e=>(a=>{va.value=a,pa.value={name:a.name,description:a.description,price:a.price,originalPrice:a.originalPrice,image:a.image,category:a.category,status:a.status},da.value=!0})(a)},[c(u(C),{class:"icon"})],8,J),i("button",{class:"action-btn delete",onClick:e=>{return l=a.id,void(confirm("确定要删除这个产品吗？")&&(ma.value=ma.value.filter(a=>a.id!==l),console.log("删除产品:",l)));var l}},[c(u(P),{class:"icon"})],8,K)])]);var e}),128))]))]),na.value||da.value?(U(),o("div",{key:0,class:"modal-overlay",onClick:ya},[i("div",{class:"modal-content",onClick:e[10]||(e[10]=x(()=>{},["stop"]))},[i("div",W,[i("h3",null,h(na.value?"添加产品":"编辑产品"),1),i("button",{class:"close-btn",onClick:ya},[c(u(w),{class:"icon"})])]),i("div",X,[i("form",{onSubmit:x(ba,["prevent"]),class:"product-form"},[i("div",Y,[e[18]||(e[18]=i("label",{for:"productName",class:"form-label"},"产品名称",-1)),d(i("input",{id:"productName","onUpdate:modelValue":e[3]||(e[3]=a=>pa.value.name=a),type:"text",class:"form-input",placeholder:"请输入产品名称",required:""},null,512),[[p,pa.value.name]])]),i("div",Z,[e[19]||(e[19]=i("label",{for:"productDescription",class:"form-label"},"产品描述",-1)),d(i("textarea",{id:"productDescription","onUpdate:modelValue":e[4]||(e[4]=a=>pa.value.description=a),class:"form-textarea",placeholder:"请输入产品描述",rows:"3",required:""},null,512),[[p,pa.value.description]])]),i("div",$,[i("div",aa,[e[20]||(e[20]=i("label",{for:"productPrice",class:"form-label"},"价格",-1)),d(i("input",{id:"productPrice","onUpdate:modelValue":e[5]||(e[5]=a=>pa.value.price=a),type:"number",class:"form-input",placeholder:"0.00",min:"0",step:"0.01",required:""},null,512),[[p,pa.value.price,void 0,{number:!0}]])]),i("div",ea,[e[21]||(e[21]=i("label",{for:"productOriginalPrice",class:"form-label"},"原价（可选）",-1)),d(i("input",{id:"productOriginalPrice","onUpdate:modelValue":e[6]||(e[6]=a=>pa.value.originalPrice=a),type:"number",class:"form-input",placeholder:"0.00",min:"0",step:"0.01"},null,512),[[p,pa.value.originalPrice,void 0,{number:!0}]])])]),i("div",la,[e[23]||(e[23]=i("label",{for:"productCategory",class:"form-label"},"分类",-1)),d(i("select",{id:"productCategory","onUpdate:modelValue":e[7]||(e[7]=a=>pa.value.category=a),class:"form-select",required:""},e[22]||(e[22]=[g('<option value="" data-v-113201b5>请选择分类</option><option value="办公工具" data-v-113201b5>办公工具</option><option value="设计工具" data-v-113201b5>设计工具</option><option value="开发工具" data-v-113201b5>开发工具</option><option value="AI工具" data-v-113201b5>AI工具</option><option value="其他" data-v-113201b5>其他</option>',6)]),512),[[m,pa.value.category]])]),i("div",sa,[e[24]||(e[24]=i("label",{for:"productImage",class:"form-label"},"产品图片URL",-1)),d(i("input",{id:"productImage","onUpdate:modelValue":e[8]||(e[8]=a=>pa.value.image=a),type:"url",class:"form-input",placeholder:"https://example.com/image.jpg",required:""},null,512),[[p,pa.value.image]])]),i("div",oa,[e[26]||(e[26]=i("label",{for:"productStatus",class:"form-label"},"状态",-1)),d(i("select",{id:"productStatus","onUpdate:modelValue":e[9]||(e[9]=a=>pa.value.status=a),class:"form-select",required:""},e[25]||(e[25]=[i("option",{value:"active"},"已发布",-1),i("option",{value:"draft"},"草稿",-1),i("option",{value:"inactive"},"已下架",-1)]),512),[[m,pa.value.status]])])],32)]),i("div",ia,[i("button",{type:"button",class:"btn secondary",onClick:ya}," 取消 "),i("button",{type:"button",class:"btn primary",onClick:ba,disabled:ca.value},h(ca.value?"保存中...":na.value?"添加":"保存"),9,ta)])])])):t("",!0)]))}}),[["__scopeId","data-v-113201b5"]]);export{ca as default};
