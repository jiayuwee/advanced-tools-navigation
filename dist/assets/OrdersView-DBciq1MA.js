import{d as e,r as t,c as a,o as s,ax as r,a5 as l,t as i,v as n,F as d,B as o,J as c,Y as u,E as p,x as m,A as v,a6 as y,I as g}from"./vendor-BUZxw6e1.js";import{u as k,_ as f}from"./index-BxdVNC7e.js";const w={class:"orders-view"},S={class:"orders-filters"},b=["onClick"],O={class:"filter-count"},D={class:"orders-content"},h={key:0,class:"loading-state"},I={key:1,class:"orders-list"},C={class:"order-header"},A={class:"order-info"},_={class:"order-number"},x={class:"order-date"},F={class:"order-status"},P={class:"order-items"},j={class:"item-image"},E=["src","alt"],T={class:"item-info"},q={class:"item-name"},N={class:"item-description"},Y={class:"item-meta"},V={class:"item-quantity"},z={class:"item-price"},B={class:"item-total"},J={class:"order-footer"},L={class:"order-total"},M={class:"total-amount"},U={class:"order-actions"},$=["onClick"],G=["onClick"],H=["onClick"],K=["onClick"],Q={key:2,class:"empty-state"};const R=f(e({__name:"OrdersView",setup(e,{expose:l}){l();const i=k(),n=t(!0),d=t("all"),o=t([]),c=a(()=>"all"===d.value?o.value:o.value.filter(e=>e.status===d.value)),u=async()=>{try{n.value=!0,await new Promise(e=>setTimeout(e,1e3)),o.value=[{id:"order-1",userId:"user-1",items:[{id:"item-1",orderId:"order-1",productId:"product-1",quantity:1,unitPrice:299,totalPrice:299,createdAt:(new Date).toISOString(),product:{id:"product-1",name:"é«˜æ•ˆåŠå…¬å¥—ä»¶",shortDescription:"æå‡åŠå…¬æ•ˆç‡çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ",images:["/placeholder.jpg"]}}],totalAmount:299,currency:"CNY",status:"paid",paymentMethod:"alipay",createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:(new Date).toISOString(),completedAt:(new Date).toISOString()},{id:"order-2",userId:"user-1",items:[{id:"item-2",orderId:"order-2",productId:"product-2",quantity:1,unitPrice:199,totalPrice:199,createdAt:(new Date).toISOString(),product:{id:"product-2",name:"è®¾è®¡å¸ˆå·¥å…·åŒ…",shortDescription:"ä¸“ä¸šè®¾è®¡å¸ˆå¿…å¤‡å·¥å…·é›†åˆ",images:["/placeholder.jpg"]}}],totalAmount:199,currency:"CNY",status:"pending",createdAt:new Date(Date.now()-36e5).toISOString(),updatedAt:(new Date).toISOString()}]}catch(e){console.error("åŠ è½½è®¢å•å¤±è´¥:",e)}finally{n.value=!1}};s(()=>{u()});const p={router:i,loading:n,activeFilter:d,orders:o,statusFilters:[{key:"all",label:"å…¨éƒ¨è®¢å•"},{key:"pending",label:"å¾…æ”¯ä»˜"},{key:"paid",label:"å·²æ”¯ä»˜"},{key:"cancelled",label:"å·²å–æ¶ˆ"},{key:"refunded",label:"å·²é€€æ¬¾"}],filteredOrders:c,getFilterCount:e=>"all"===e?o.value.length:o.value.filter(t=>t.status===e).length,loadOrders:u,getStatusText:e=>({pending:"å¾…æ”¯ä»˜",paid:"å·²æ”¯ä»˜",cancelled:"å·²å–æ¶ˆ",refunded:"å·²é€€æ¬¾"}[e]||e),getEmptyStateTitle:()=>({all:"æš‚æ— è®¢å•",pending:"æš‚æ— å¾…æ”¯ä»˜è®¢å•",paid:"æš‚æ— å·²æ”¯ä»˜è®¢å•",cancelled:"æš‚æ— å·²å–æ¶ˆè®¢å•",refunded:"æš‚æ— å·²é€€æ¬¾è®¢å•"}[d.value]||"æš‚æ— è®¢å•"),getEmptyStateDescription:()=>({all:"æ‚¨è¿˜æ²¡æœ‰ä»»ä½•è®¢å•ï¼Œå»è´­ä¹°ä¸€äº›äº§å“å§ï¼",pending:"æ‚¨æ²¡æœ‰å¾…æ”¯ä»˜çš„è®¢å•",paid:"æ‚¨æ²¡æœ‰å·²æ”¯ä»˜çš„è®¢å•",cancelled:"æ‚¨æ²¡æœ‰å·²å–æ¶ˆçš„è®¢å•",refunded:"æ‚¨æ²¡æœ‰å·²é€€æ¬¾çš„è®¢å•"}[d.value]||"æš‚æ— ç›¸å…³è®¢å•"),formatDate:e=>new Date(e).toLocaleString("zh-CN"),payOrder:e=>{i.push(`/payment?order=${e.id}`)},cancelOrder:async e=>{if(confirm("ç¡®å®šè¦å–æ¶ˆè¿™ä¸ªè®¢å•å—ï¼Ÿ"))try{const t=o.value.findIndex(t=>t.id===e.id);-1!==t&&(o.value[t].status="cancelled")}catch(t){console.error("å–æ¶ˆè®¢å•å¤±è´¥:",t)}},downloadOrder:e=>{console.log("ä¸‹è½½è®¢å•äº§å“:",e.id)},viewOrderDetail:e=>{console.log("æŸ¥çœ‹è®¢å•è¯¦æƒ…:",e.id)},get DownloadIcon(){return r}};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),[["render",function(e,t,a,s,r,k){const f=l("router-link");return g(),i("div",w,[t[5]||(t[5]=n("div",{class:"orders-header"},[n("h1",null,"æˆ‘çš„è®¢å•"),n("p",null,"æŸ¥çœ‹å’Œç®¡ç†æ‚¨çš„è®¢å•å†å²")],-1)),n("div",S,[(g(),i(d,null,o(s.statusFilters,e=>n("button",{key:e.key,class:c(["filter-btn",{active:s.activeFilter===e.key}]),onClick:t=>s.activeFilter=e.key},[u(p(e.label)+" ",1),n("span",O,p(s.getFilterCount(e.key)),1)],10,b)),64))]),n("div",D,[s.loading?(g(),i("div",h,t[0]||(t[0]=[n("div",{class:"loading-spinner"},null,-1),n("p",null,"æ­£åœ¨åŠ è½½è®¢å•...",-1)]))):s.filteredOrders.length>0?(g(),i("div",I,[(g(!0),i(d,null,o(s.filteredOrders,e=>(g(),i("div",{key:e.id,class:"order-item"},[n("div",C,[n("div",A,[n("h3",_," è®¢å•å·: "+p(e.id.slice(-8).toUpperCase()),1),n("p",x," ä¸‹å•æ—¶é—´: "+p(s.formatDate(e.createdAt)),1)]),n("div",F,[n("span",{class:c(["status-badge",e.status])},p(s.getStatusText(e.status)),3)])]),n("div",P,[(g(!0),i(d,null,o(e.items,e=>{var t,a,s,r,l;return g(),i("div",{key:e.id,class:"order-item-detail"},[n("div",j,[n("img",{src:(null==(a=null==(t=e.product)?void 0:t.images)?void 0:a[0])||"/placeholder.jpg",alt:null==(s=e.product)?void 0:s.name},null,8,E)]),n("div",T,[n("h4",q,p(null==(r=e.product)?void 0:r.name),1),n("p",N,p(null==(l=e.product)?void 0:l.shortDescription),1),n("div",Y,[n("span",V,"æ•°é‡: "+p(e.quantity),1),n("span",z,"å•ä»·: Â¥"+p(e.unitPrice),1)])]),n("div",B,"Â¥"+p(e.totalPrice),1)])}),128))]),n("div",J,[n("div",L,[t[1]||(t[1]=n("span",{class:"total-label"},"è®¢å•æ€»é¢:",-1)),n("span",M,"Â¥"+p(e.totalAmount),1)]),n("div",U,["pending"===e.status?(g(),i("button",{key:0,class:"action-btn primary",onClick:t=>s.payOrder(e)}," ç«‹å³æ”¯ä»˜ ",8,$)):m("",!0),"pending"===e.status?(g(),i("button",{key:1,class:"action-btn secondary",onClick:t=>s.cancelOrder(e)}," å–æ¶ˆè®¢å• ",8,G)):m("",!0),"paid"===e.status?(g(),i("button",{key:2,class:"action-btn secondary",onClick:t=>s.downloadOrder(e)},[v(s.DownloadIcon,{class:"icon"}),t[2]||(t[2]=u(" ä¸‹è½½äº§å“ "))],8,H)):m("",!0),n("button",{class:"action-btn secondary",onClick:t=>s.viewOrderDetail(e)}," æŸ¥çœ‹è¯¦æƒ… ",8,K)])])]))),128))])):(g(),i("div",Q,[t[4]||(t[4]=n("div",{class:"empty-icon"},"ğŸ“¦",-1)),n("h3",null,p(s.getEmptyStateTitle()),1),n("p",null,p(s.getEmptyStateDescription()),1),v(f,{to:"/products",class:"empty-action"},{default:y(()=>t[3]||(t[3]=[u("å»è´­ä¹°äº§å“")])),_:1,__:[3]})]))])])}],["__scopeId","data-v-b1a7e600"],["__file","/mnt/persist/workspace/src/views/user/OrdersView.vue"]]);export{R as default};
