const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./orderService-DsrkZM7H.js","./index-DnVHVpUO.js","./vendor-dtMHlISa.js","./index-C3KXLEkF.css"])))=>i.map(i=>d[i]);
import{t as s,j as a,k as e,d as t,o as c,_ as l}from"./index-DnVHVpUO.js";import{D as o}from"./download-C6OAg1E3.js";import{F as n}from"./file-text-Dat_PjbD.js";import{d as r,r as i,o as u,m as d,q as p,y as m,u as v,D as _,M as f,E as h,L as w,A as y}from"./vendor-dtMHlISa.js";const b={class:"payment-success-view"},S={class:"success-container"},j={class:"success-content"},x={class:"success-icon"},O={class:"order-info"},A={class:"info-item"},D={class:"value"},E={class:"info-item"},g={class:"value amount"},k={class:"info-item"},q={class:"value"},C={class:"info-item"},I={class:"value"},L={class:"next-steps"},P={class:"steps-list"},R={class:"step-item"},T={class:"step-item"},V={class:"step-item"},z={class:"step-content"},F={class:"action-buttons"},B={class:"support-info"},M={class:"contact-methods"},N={href:"mailto:support@example.com",class:"contact-item"},U={href:"tel:400-123-4567",class:"contact-item"},$=l(r({__name:"PaymentSuccessView",setup(l){const r=t(),$=i("ORD-20241224-001"),G=i(299),H=i(""),J=i("支付宝"),downloadProducts=async()=>{var s;try{console.log("开始下载产品...");const a=r.query.order;if(!a)return void alert("订单信息不存在");const{OrderService:e}=await c(async()=>{const{OrderService:s}=await import("./orderService-DsrkZM7H.js");return{OrderService:s}},__vite__mapDeps([0,1,2,3]),import.meta.url),{useAuthStore:t}=await c(async()=>{const{useAuthStore:s}=await import("./index-DnVHVpUO.js").then(s=>s.w);return{useAuthStore:s}},__vite__mapDeps([1,2,3]),import.meta.url),l=t();if(!l.user)return void alert("请先登录");const o=await e.getOrderById(a,l.user.id);if(!o||"paid"!==o.status)return void alert("订单不存在或未支付");for(const c of o.items)if(null==(s=c.product)?void 0:s.download_url){const s=document.createElement("a");s.href=c.product.download_url,s.download=`${c.product.name}.zip`,s.target="_blank",document.body.appendChild(s),s.click(),document.body.removeChild(s),await new Promise(s=>setTimeout(s,500))}}catch(a){console.error("下载失败:",a),alert("下载失败，请稍后重试")}};return u(()=>{(()=>{const s=r.query.order,a=r.query.amount;s&&($.value=s),a&&(G.value=parseFloat(a)),H.value=(new Date).toLocaleString("zh-CN")})()}),(t,c)=>{const l=w("router-link");return y(),d("div",b,[p("div",S,[p("div",j,[p("div",x,[m(v(s),{class:"icon"})]),c[16]||(c[16]=p("h1",{class:"success-title"},"支付成功！",-1)),c[17]||(c[17]=p("p",{class:"success-message"},"您的订单已成功支付，感谢您的购买",-1)),p("div",O,[p("div",A,[c[0]||(c[0]=p("span",{class:"label"},"订单号:",-1)),p("span",D,_($.value),1)]),p("div",E,[c[1]||(c[1]=p("span",{class:"label"},"支付金额:",-1)),p("span",g,"¥"+_(G.value),1)]),p("div",k,[c[2]||(c[2]=p("span",{class:"label"},"支付时间:",-1)),p("span",q,_(H.value),1)]),p("div",C,[c[3]||(c[3]=p("span",{class:"label"},"支付方式:",-1)),p("span",I,_(J.value),1)])]),p("div",L,[c[10]||(c[10]=p("h3",null,"接下来您可以：",-1)),p("div",P,[p("div",R,[m(v(o),{class:"step-icon"}),p("div",{class:"step-content"},[c[4]||(c[4]=p("h4",null,"下载产品",-1)),c[5]||(c[5]=p("p",null,"立即下载您购买的数字产品",-1)),p("button",{class:"step-action",onClick:downloadProducts}," 立即下载 ")])]),p("div",T,[m(v(a),{class:"step-icon"}),c[6]||(c[6]=p("div",{class:"step-content"},[p("h4",null,"查看邮件"),p("p",null,"我们已向您的邮箱发送了订单确认邮件")],-1))]),p("div",V,[m(v(n),{class:"step-icon"}),p("div",z,[c[8]||(c[8]=p("h4",null,"查看订单",-1)),c[9]||(c[9]=p("p",null,"在个人中心查看完整的订单详情",-1)),m(l,{to:"/user/orders",class:"step-action"},{default:f(()=>c[7]||(c[7]=[h(" 查看订单 ")])),_:1,__:[7]})])])])]),p("div",F,[m(l,{to:"/",class:"btn btn-secondary"},{default:f(()=>c[11]||(c[11]=[h(" 返回首页 ")])),_:1,__:[11]}),m(l,{to:"/products",class:"btn btn-primary"},{default:f(()=>c[12]||(c[12]=[h(" 继续购物 ")])),_:1,__:[12]})]),p("div",B,[c[15]||(c[15]=p("p",null,"如有任何问题，请联系我们的客服团队",-1)),p("div",M,[p("a",N,[m(v(a),{class:"contact-icon"}),c[13]||(c[13]=h(" support@example.com "))]),p("a",U,[m(v(e),{class:"contact-icon"}),c[14]||(c[14]=h(" 400-123-4567 "))])])])])])])}}}),[["__scopeId","data-v-708aca6d"]]);export{$ as default};
//# sourceMappingURL=PaymentSuccessView-B9e1kR50.js.map
