{"version":3,"file":"ForgotPasswordView-DUcRiLu4.js","sources":["../../src/views/auth/ForgotPasswordView.vue"],"sourcesContent":["<template>\r\n  <div class=\"forgot-password-view\">\r\n    <div class=\"forgot-header\">\r\n      <h1>忘记密码</h1>\r\n      <p>输入您的邮箱地址，我们将发送重置密码的链接</p>\r\n    </div>\r\n\r\n    <form\r\n      v-if=\"!emailSent\"\r\n      class=\"forgot-form\"\r\n      @submit.prevent=\"handleForgotPassword\"\r\n    >\r\n      <div class=\"form-group\">\r\n        <label for=\"email\">邮箱地址</label>\r\n        <input\r\n          id=\"email\"\r\n          v-model=\"email\"\r\n          type=\"email\"\r\n          required\r\n          placeholder=\"请输入您的邮箱地址\"\r\n          :disabled=\"loading\"\r\n        />\r\n      </div>\r\n\r\n      <button type=\"submit\" class=\"submit-btn\" :disabled=\"loading || !email\">\r\n        <div v-if=\"loading\" class=\"loading-spinner\"></div>\r\n        <span>{{ loading ? \"发送中...\" : \"发送重置链接\" }}</span>\r\n      </button>\r\n\r\n      <div v-if=\"error\" class=\"error-message\">\r\n        {{ error }}\r\n      </div>\r\n    </form>\r\n\r\n    <div v-else class=\"success-state\">\r\n      <div class=\"success-icon\">✅</div>\r\n      <h3>邮件已发送</h3>\r\n      <p>\r\n        我们已向 <strong>{{ email }}</strong> 发送了重置密码的链接\r\n      </p>\r\n      <p class=\"help-text\">\r\n        请检查您的邮箱（包括垃圾邮件文件夹），并点击链接重置密码\r\n      </p>\r\n\r\n      <div class=\"success-actions\">\r\n        <button\r\n          class=\"resend-btn\"\r\n          :disabled=\"resendCooldown > 0\"\r\n          @click=\"handleResend\"\r\n        >\r\n          {{ resendCooldown > 0 ? `${resendCooldown}秒后可重发` : \"重新发送\" }}\r\n        </button>\r\n        <router-link to=\"/auth/login\" class=\"back-btn\">返回登录</router-link>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"forgot-footer\">\r\n      <p>\r\n        记起密码了？\r\n        <router-link to=\"/auth/login\" class=\"login-link\">立即登录</router-link>\r\n      </p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onUnmounted } from \"vue\";\r\n\r\n// 响应式状态\r\nconst loading = ref(false);\r\nconst error = ref<string | null>(null);\r\nconst email = ref(\"\");\r\nconst emailSent = ref(false);\r\nconst resendCooldown = ref(0);\r\n\r\nlet cooldownTimer: number | null = null;\r\n\r\n// 方法\r\nconst handleForgotPassword = async () => {\r\n  try {\r\n    loading.value = true;\r\n    error.value = null;\r\n\r\n    // TODO: 实现忘记密码逻辑\r\n    // await AuthService.forgotPassword(email.value)\r\n\r\n    // 模拟发送邮件\r\n    await new Promise((resolve) => setTimeout(resolve, 1000));\r\n\r\n    emailSent.value = true;\r\n    startResendCooldown();\r\n  } catch (err) {\r\n    error.value = err instanceof Error ? err.message : \"发送失败，请重试\";\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nconst handleResend = async () => {\r\n  if (resendCooldown.value > 0) return;\r\n\r\n  try {\r\n    loading.value = true;\r\n    error.value = null;\r\n\r\n    // TODO: 实现重新发送逻辑\r\n    // await AuthService.forgotPassword(email.value)\r\n\r\n    // 模拟重新发送\r\n    await new Promise((resolve) => setTimeout(resolve, 500));\r\n\r\n    startResendCooldown();\r\n  } catch (err) {\r\n    error.value = err instanceof Error ? err.message : \"重新发送失败，请重试\";\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n\r\nconst startResendCooldown = () => {\r\n  resendCooldown.value = 60;\r\n  cooldownTimer = setInterval(() => {\r\n    resendCooldown.value--;\r\n    if (resendCooldown.value <= 0) {\r\n      clearInterval(cooldownTimer!);\r\n      cooldownTimer = null;\r\n    }\r\n  }, 1000);\r\n};\r\n\r\n// 生命周期\r\nonUnmounted(() => {\r\n  if (cooldownTimer) {\r\n    clearInterval(cooldownTimer);\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.forgot-password-view {\r\n  width: 100%;\r\n}\r\n\r\n.forgot-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.forgot-header h1 {\r\n  font-size: 2rem;\r\n  font-weight: 700;\r\n  color: #323130;\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.forgot-header p {\r\n  color: #605e5c;\r\n  margin: 0;\r\n  line-height: 1.5;\r\n}\r\n\r\n.forgot-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.form-group label {\r\n  font-weight: 600;\r\n  color: #323130;\r\n}\r\n\r\n.form-group input {\r\n  padding: 0.75rem;\r\n  border: 1px solid #e1dfdd;\r\n  border-radius: 0.5rem;\r\n  font-size: 1rem;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.form-group input:focus {\r\n  outline: none;\r\n  border-color: #0078d4;\r\n  box-shadow: 0 0 0 2px rgba(0, 120, 212, 0.2);\r\n}\r\n\r\n.form-group input:disabled {\r\n  background: #f3f2f1;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.submit-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  padding: 0.875rem;\r\n  background: #0078d4;\r\n  border: none;\r\n  border-radius: 0.5rem;\r\n  color: white;\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.submit-btn:hover:not(:disabled) {\r\n  background: #106ebe;\r\n}\r\n\r\n.submit-btn:disabled {\r\n  background: #c8c6c4;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 1rem;\r\n  height: 1rem;\r\n  border: 2px solid transparent;\r\n  border-top: 2px solid white;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% {\r\n    transform: rotate(0deg);\r\n  }\r\n  100% {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.error-message {\r\n  padding: 0.75rem;\r\n  background: #fef2f2;\r\n  border: 1px solid #fecaca;\r\n  border-radius: 0.5rem;\r\n  color: #dc2626;\r\n  font-size: 0.875rem;\r\n  text-align: center;\r\n}\r\n\r\n.success-state {\r\n  text-align: center;\r\n  padding: 1rem 0;\r\n}\r\n\r\n.success-icon {\r\n  font-size: 3rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.success-state h3 {\r\n  font-size: 1.5rem;\r\n  font-weight: 600;\r\n  color: #323130;\r\n  margin: 0 0 1rem 0;\r\n}\r\n\r\n.success-state p {\r\n  color: #605e5c;\r\n  margin: 0 0 0.75rem 0;\r\n  line-height: 1.5;\r\n}\r\n\r\n.help-text {\r\n  font-size: 0.875rem;\r\n  color: #8a8886;\r\n}\r\n\r\n.success-actions {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n  margin-top: 2rem;\r\n}\r\n\r\n.resend-btn {\r\n  padding: 0.75rem;\r\n  background: transparent;\r\n  border: 1px solid #0078d4;\r\n  border-radius: 0.5rem;\r\n  color: #0078d4;\r\n  font-size: 0.875rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.resend-btn:hover:not(:disabled) {\r\n  background: rgba(0, 120, 212, 0.1);\r\n}\r\n\r\n.resend-btn:disabled {\r\n  border-color: #c8c6c4;\r\n  color: #c8c6c4;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.back-btn {\r\n  display: inline-block;\r\n  padding: 0.75rem;\r\n  background: #0078d4;\r\n  border-radius: 0.5rem;\r\n  color: white;\r\n  text-decoration: none;\r\n  font-size: 0.875rem;\r\n  font-weight: 500;\r\n  text-align: center;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.back-btn:hover {\r\n  background: #106ebe;\r\n}\r\n\r\n.forgot-footer {\r\n  text-align: center;\r\n  margin-top: 1.5rem;\r\n  padding-top: 1.5rem;\r\n  border-top: 1px solid #e1dfdd;\r\n}\r\n\r\n.forgot-footer p {\r\n  color: #605e5c;\r\n  margin: 0;\r\n}\r\n\r\n.login-link {\r\n  color: #0078d4;\r\n  text-decoration: none;\r\n  font-weight: 600;\r\n}\r\n\r\n.login-link:hover {\r\n  text-decoration: underline;\r\n}\r\n</style>\r\n"],"names":["loading","ref","error","email","emailSent","resendCooldown","cooldownTimer","handleForgotPassword","async","value","Promise","resolve","setTimeout","startResendCooldown","err","Error","message","handleResend","setInterval","clearInterval","onUnmounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","class","_hoisted_7","_cache","_hoisted_8","disabled","onClick","_toDisplayString","_hoisted_9","_createVNode","_component_router_link","to","onSubmit","_hoisted_2","for","id","$event","type","required","placeholder","_hoisted_5","_hoisted_6","_hoisted_10"],"mappings":"keAqEA,MAAMA,EAAUC,GAAI,GACdC,EAAQD,EAAmB,MAC3BE,EAAQF,EAAI,IACZG,EAAYH,GAAI,GAChBI,EAAiBJ,EAAI,GAE3B,IAAIK,EAA+B,KAGnC,MAAMC,qBAAuBC,UAC3B,IACER,EAAQS,OAAQ,EAChBP,EAAMO,MAAQ,WAMR,IAAIC,QAASC,GAAYC,WAAWD,EAAS,MAEnDP,EAAUK,OAAQ,EAClBI,qBACF,OAASC,GACPZ,EAAMO,MAAQK,aAAeC,MAAQD,EAAIE,QAAU,UACrD,CAAA,QACEhB,EAAQS,OAAQ,CAClB,GAGIQ,aAAeT,UACnB,KAAIH,EAAeI,MAAQ,GAE3B,IACET,EAAQS,OAAQ,EAChBP,EAAMO,MAAQ,WAMR,IAAIC,QAASC,GAAYC,WAAWD,EAAS,MAEnDE,qBACF,OAASC,GACPZ,EAAMO,MAAQK,aAAeC,MAAQD,EAAIE,QAAU,YACrD,CAAA,QACEhB,EAAQS,OAAQ,CAClB,GAGII,oBAAsB,KAC1BR,EAAeI,MAAQ,GACvBH,EAAgBY,YAAY,KAC1Bb,EAAeI,QACXJ,EAAeI,OAAS,IAC1BU,cAAcb,GACdA,EAAgB,OAEjB,aAILc,EAAY,KACNd,GACFa,cAAcb,sCApIhB,OAAAe,IAAAC,EA6DM,MA7DNC,EA6DM,eA5DJC,EAGM,MAAA,CAHDC,MAAM,iBAAe,CACxBD,EAAa,UAAT,QACJA,EAA4B,SAAzB,+BAIIpB,EAAAK,OA0BTY,IAAAC,EAoBM,MApBNI,EAoBM,CAnBJC,EAAA,KAAAA,EAAA,GAAAH,EAAiC,MAAA,CAA5BC,MAAM,gBAAe,KAAC,IAC3BE,EAAA,KAAAA,EAAA,GAAAH,EAAc,UAAV,SAAK,IACTA,EAEI,IAAA,KAAA,eAFD,WACIA,EAA4B,gBAAjBrB,EAAAM,OAAK,iBAAY,mBAEnCkB,EAAA,KAAAA,EAAA,GAAAH,EAEI,IAAA,CAFDC,MAAM,aAAY,kCAErB,IAEAD,EASM,MATNI,EASM,CARJJ,EAMS,SAAA,CALPC,MAAM,aACLI,SAAUxB,EAAAI,MAAc,EACxBqB,QAAOb,cAELc,EAAA1B,EAAAI,WAAwBJ,EAAAI,aAAc,QAAA,EAAAuB,GAE3CC,EAAiEC,EAAA,CAApDC,GAAG,cAAcV,MAAM,uBAAW,IAAIE,EAAA,KAAAA,EAAA,GAAA,GAAJ,kCA7CnDL,EAyBO,OAAA,OAvBLG,MAAM,cACLW,WAAgB7B,qBAAoB,CAAA,cAErCiB,EAUM,MAVNa,EAUM,CATJV,EAAA,KAAAA,EAAA,GAAAH,EAA+B,QAAA,CAAxBc,IAAI,SAAQ,QAAI,MACvBd,EAOE,QAAA,CANAe,GAAG,6CACMpC,EAAKM,MAAA+B,GACdC,KAAK,QACLC,SAAA,GACAC,YAAY,YACXd,SAAU7B,EAAAS,qBAJFN,EAAAM,WAQbe,EAGS,SAAA,CAHDiB,KAAK,SAAShB,MAAM,aAAcI,SAAU7B,EAAAS,QAAYN,EAAAM,QACnDT,EAAAS,OAAXY,IAAAC,EAAkD,MAAlDsB,aACApB,EAAgD,cAAvCxB,EAAAS,MAAO,SAAA,UAAA,SAGPP,EAAAO,WAAXa,EAEM,MAFNuB,EAEMd,EADD7B,EAAAO,OAAK,mBA0BZe,EAKM,MALNsB,EAKM,CAJJtB,EAGI,IAAA,KAAA,eAHD,aAEDS,EAAmEC,EAAA,CAAtDC,GAAG,cAAcV,MAAM,yBAAa,IAAIE,EAAA,KAAAA,EAAA,GAAA,GAAJ"}