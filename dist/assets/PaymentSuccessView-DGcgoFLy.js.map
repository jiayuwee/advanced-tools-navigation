{"version":3,"mappings":"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","names":["route","useRoute","orderId","ref","amount","paymentTime","paymentMethod","downloadProducts","async","console","log","orderParam","query","order","alert","OrderService","__vitePreload","import","useAuthStore","then","n","w","authStore","user","getOrderById","id","status","item","items","_a","product","download_url","link","document","createElement","href","download","name","target","body","appendChild","click","removeChild","Promise","resolve","setTimeout","error","onMounted","amountParam","value","parseFloat","Date","toLocaleString","loadPaymentInfo","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_unref","CheckCircleIcon","class","_cache","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","DownloadIcon","onClick","_hoisted_17","MailIcon","_hoisted_18","FileTextIcon","_hoisted_19","_component_router_link","to","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","PhoneIcon"],"ignoreList":[],"sources":["../../src/views/PaymentSuccessView.vue"],"sourcesContent":["<template>\r\n  <div class=\"payment-success-view\">\r\n    <div class=\"success-container\">\r\n      <div class=\"success-content\">\r\n        <div class=\"success-icon\">\r\n          <CheckCircleIcon class=\"icon\" />\r\n        </div>\r\n\r\n        <h1 class=\"success-title\">支付成功！</h1>\r\n        <p class=\"success-message\">您的订单已成功支付，感谢您的购买</p>\r\n\r\n        <div class=\"order-info\">\r\n          <div class=\"info-item\">\r\n            <span class=\"label\">订单号:</span>\r\n            <span class=\"value\">{{ orderId }}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"label\">支付金额:</span>\r\n            <span class=\"value amount\">¥{{ amount }}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"label\">支付时间:</span>\r\n            <span class=\"value\">{{ paymentTime }}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"label\">支付方式:</span>\r\n            <span class=\"value\">{{ paymentMethod }}</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"next-steps\">\r\n          <h3>接下来您可以：</h3>\r\n          <div class=\"steps-list\">\r\n            <div class=\"step-item\">\r\n              <DownloadIcon class=\"step-icon\" />\r\n              <div class=\"step-content\">\r\n                <h4>下载产品</h4>\r\n                <p>立即下载您购买的数字产品</p>\r\n                <button class=\"step-action\" @click=\"downloadProducts\">\r\n                  立即下载\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"step-item\">\r\n              <MailIcon class=\"step-icon\" />\r\n              <div class=\"step-content\">\r\n                <h4>查看邮件</h4>\r\n                <p>我们已向您的邮箱发送了订单确认邮件</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"step-item\">\r\n              <FileTextIcon class=\"step-icon\" />\r\n              <div class=\"step-content\">\r\n                <h4>查看订单</h4>\r\n                <p>在个人中心查看完整的订单详情</p>\r\n                <router-link to=\"/user/orders\" class=\"step-action\">\r\n                  查看订单\r\n                </router-link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"action-buttons\">\r\n          <router-link to=\"/\" class=\"btn btn-secondary\"> 返回首页 </router-link>\r\n          <router-link to=\"/products\" class=\"btn btn-primary\">\r\n            继续购物\r\n          </router-link>\r\n        </div>\r\n\r\n        <div class=\"support-info\">\r\n          <p>如有任何问题，请联系我们的客服团队</p>\r\n          <div class=\"contact-methods\">\r\n            <a href=\"mailto:support@example.com\" class=\"contact-item\">\r\n              <MailIcon class=\"contact-icon\" />\r\n              support@example.com\r\n            </a>\r\n            <a href=\"tel:400-123-4567\" class=\"contact-item\">\r\n              <PhoneIcon class=\"contact-icon\" />\r\n              400-123-4567\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport {\r\n  CheckCircleIcon,\r\n  DownloadIcon,\r\n  MailIcon,\r\n  FileTextIcon,\r\n  PhoneIcon,\r\n} from \"lucide-vue-next\";\r\n\r\nconst route = useRoute();\r\n\r\n// 响应式状态\r\nconst orderId = ref(\"ORD-20241224-001\");\r\nconst amount = ref(299);\r\nconst paymentTime = ref(\"\");\r\nconst paymentMethod = ref(\"支付宝\");\r\n\r\n// 方法\r\nconst loadPaymentInfo = () => {\r\n  // TODO: 从路由参数或API加载支付信息\r\n  const orderParam = route.query.order;\r\n  const amountParam = route.query.amount;\r\n\r\n  if (orderParam) {\r\n    orderId.value = orderParam as string;\r\n  }\r\n\r\n  if (amountParam) {\r\n    amount.value = parseFloat(amountParam as string);\r\n  }\r\n\r\n  // 设置支付时间为当前时间\r\n  paymentTime.value = new Date().toLocaleString(\"zh-CN\");\r\n};\r\n\r\nconst downloadProducts = async () => {\r\n  try {\r\n    console.log(\"开始下载产品...\");\r\n\r\n    // 获取订单信息\r\n    const orderParam = route.query.order;\r\n    if (!orderParam) {\r\n      alert(\"订单信息不存在\");\r\n      return;\r\n    }\r\n\r\n    // 导入订单服务\r\n    const { OrderService } = await import(\"@/services/orderService\");\r\n    const { useAuthStore } = await import(\"@/stores/auth\");\r\n\r\n    const authStore = useAuthStore();\r\n    if (!authStore.user) {\r\n      alert(\"请先登录\");\r\n      return;\r\n    }\r\n\r\n    // 获取订单详情\r\n    const order = await OrderService.getOrderById(\r\n      orderParam as string,\r\n      authStore.user.id,\r\n    );\r\n    if (!order || order.status !== \"paid\") {\r\n      alert(\"订单不存在或未支付\");\r\n      return;\r\n    }\r\n\r\n    // 下载所有产品\r\n    for (const item of order.items) {\r\n      if (item.product?.download_url) {\r\n        const link = document.createElement(\"a\");\r\n        link.href = item.product.download_url;\r\n        link.download = `${item.product.name}.zip`;\r\n        link.target = \"_blank\";\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n\r\n        // 延迟一下避免浏览器阻止多个下载\r\n        await new Promise((resolve) => setTimeout(resolve, 500));\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(\"下载失败:\", error);\r\n    alert(\"下载失败，请稍后重试\");\r\n  }\r\n};\r\n\r\n// 生命周期\r\nonMounted(() => {\r\n  loadPaymentInfo();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.payment-success-view {\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 2rem;\r\n}\r\n\r\n.success-container {\r\n  max-width: 600px;\r\n  width: 100%;\r\n  background: rgba(255, 255, 255, 0.95);\r\n  backdrop-filter: blur(20px);\r\n  border-radius: 1rem;\r\n  padding: 3rem 2rem;\r\n  box-shadow: 0 1rem 3rem rgba(0, 0, 0, 0.1);\r\n  text-align: center;\r\n}\r\n\r\n.success-icon {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.success-icon .icon {\r\n  width: 80px;\r\n  height: 80px;\r\n  color: #10b981;\r\n}\r\n\r\n.success-title {\r\n  font-size: 2.5rem;\r\n  font-weight: 700;\r\n  color: #323130;\r\n  margin: 0 0 1rem 0;\r\n}\r\n\r\n.success-message {\r\n  font-size: 1.125rem;\r\n  color: #605e5c;\r\n  margin: 0 0 2rem 0;\r\n  line-height: 1.6;\r\n}\r\n\r\n.order-info {\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  margin-bottom: 2rem;\r\n  text-align: left;\r\n}\r\n\r\n.info-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.75rem 0;\r\n  border-bottom: 1px solid #e1dfdd;\r\n}\r\n\r\n.info-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.label {\r\n  font-weight: 500;\r\n  color: #605e5c;\r\n}\r\n\r\n.value {\r\n  font-weight: 600;\r\n  color: #323130;\r\n}\r\n\r\n.value.amount {\r\n  color: #d13438;\r\n  font-size: 1.125rem;\r\n}\r\n\r\n.next-steps {\r\n  margin-bottom: 2rem;\r\n  text-align: left;\r\n}\r\n\r\n.next-steps h3 {\r\n  font-size: 1.25rem;\r\n  font-weight: 600;\r\n  color: #323130;\r\n  margin: 0 0 1.5rem 0;\r\n  text-align: center;\r\n}\r\n\r\n.steps-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.step-item {\r\n  display: flex;\r\n  gap: 1rem;\r\n  padding: 1rem;\r\n  background: white;\r\n  border-radius: 8px;\r\n  border: 1px solid #e1dfdd;\r\n}\r\n\r\n.step-icon {\r\n  width: 24px;\r\n  height: 24px;\r\n  color: #0078d4;\r\n  flex-shrink: 0;\r\n  margin-top: 0.25rem;\r\n}\r\n\r\n.step-content {\r\n  flex: 1;\r\n}\r\n\r\n.step-content h4 {\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  color: #323130;\r\n  margin: 0 0 0.25rem 0;\r\n}\r\n\r\n.step-content p {\r\n  font-size: 0.875rem;\r\n  color: #605e5c;\r\n  margin: 0 0 0.75rem 0;\r\n  line-height: 1.4;\r\n}\r\n\r\n.step-action {\r\n  display: inline-block;\r\n  padding: 0.5rem 1rem;\r\n  background: #0078d4;\r\n  color: white;\r\n  text-decoration: none;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 0.875rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.step-action:hover {\r\n  background: #106ebe;\r\n}\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 1rem;\r\n  justify-content: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.btn {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  padding: 0.875rem 1.5rem;\r\n  border: none;\r\n  border-radius: 0.5rem;\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.btn-primary {\r\n  background: #0078d4;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover {\r\n  background: #106ebe;\r\n}\r\n\r\n.btn-secondary {\r\n  background: transparent;\r\n  color: #0078d4;\r\n  border: 1px solid #0078d4;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: rgba(0, 120, 212, 0.1);\r\n}\r\n\r\n.support-info {\r\n  border-top: 1px solid #e1dfdd;\r\n  padding-top: 1.5rem;\r\n}\r\n\r\n.support-info p {\r\n  color: #605e5c;\r\n  margin: 0 0 1rem 0;\r\n}\r\n\r\n.contact-methods {\r\n  display: flex;\r\n  gap: 1.5rem;\r\n  justify-content: center;\r\n}\r\n\r\n.contact-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  color: #0078d4;\r\n  text-decoration: none;\r\n  font-size: 0.875rem;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.contact-item:hover {\r\n  color: #106ebe;\r\n}\r\n\r\n.contact-icon {\r\n  width: 16px;\r\n  height: 16px;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .payment-success-view {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .success-container {\r\n    padding: 2rem 1.5rem;\r\n  }\r\n\r\n  .success-title {\r\n    font-size: 2rem;\r\n  }\r\n\r\n  .action-buttons {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .contact-methods {\r\n    flex-direction: column;\r\n    gap: 0.75rem;\r\n  }\r\n\r\n  .step-item {\r\n    flex-direction: column;\r\n    text-align: center;\r\n  }\r\n\r\n  .step-icon {\r\n    align-self: center;\r\n  }\r\n}\r\n</style>\r\n"],"file":"assets/PaymentSuccessView-DGcgoFLy.js"}