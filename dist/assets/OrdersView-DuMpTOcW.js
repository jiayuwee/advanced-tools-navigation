import{a as e,_ as t}from"./index-BBkjtX5T.js";import{d as a,i as s,m as l,j as n,c as i,a as r,F as d,s as o,q as c,h as u,t as p,p as v,e as m,u as y,ag as g,w as k,r as h,o as b}from"./vendor-gTrNmiX-.js";const f={class:"orders-view"},w={class:"orders-filters"},I=["onClick"],S={class:"filter-count"},C={class:"orders-content"},D={key:0,class:"loading-state"},A={key:1,class:"orders-list"},O={class:"order-header"},_={class:"order-info"},P={class:"order-number"},j={class:"order-date"},q={class:"order-status"},x={class:"order-items"},N={class:"item-image"},Y=["src","alt"],z={class:"item-info"},F={class:"item-name"},L={class:"item-description"},M={class:"item-meta"},T={class:"item-quantity"},U={class:"item-price"},V={class:"item-total"},$={class:"order-footer"},B={class:"order-total"},E={class:"total-amount"},G={class:"order-actions"},H=["onClick"],J=["onClick"],K=["onClick"],Q=["onClick"],R={key:2,class:"empty-state"},W=t(a({__name:"OrdersView",setup(t){const a=e(),W=s(!0),X=s("all"),Z=s([]),ee=[{key:"all",label:"å…¨éƒ¨è®¢å•"},{key:"pending",label:"å¾…æ”¯ä»˜"},{key:"paid",label:"å·²æ”¯ä»˜"},{key:"cancelled",label:"å·²å–æ¶ˆ"},{key:"refunded",label:"å·²é€€æ¬¾"}],te=l(()=>"all"===X.value?Z.value:Z.value.filter(e=>e.status===X.value));return n(()=>{(async()=>{try{W.value=!0,await new Promise(e=>setTimeout(e,1e3)),Z.value=[{id:"order-1",userId:"user-1",items:[{id:"item-1",orderId:"order-1",productId:"product-1",quantity:1,unitPrice:299,totalPrice:299,createdAt:(new Date).toISOString(),product:{id:"product-1",name:"é«˜æ•ˆåŠå…¬å¥—ä»¶",shortDescription:"æå‡åŠå…¬æ•ˆç‡çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ",images:["/placeholder.jpg"]}}],totalAmount:299,currency:"CNY",status:"paid",paymentMethod:"alipay",createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:(new Date).toISOString(),completedAt:(new Date).toISOString()},{id:"order-2",userId:"user-1",items:[{id:"item-2",orderId:"order-2",productId:"product-2",quantity:1,unitPrice:199,totalPrice:199,createdAt:(new Date).toISOString(),product:{id:"product-2",name:"è®¾è®¡å¸ˆå·¥å…·åŒ…",shortDescription:"ä¸“ä¸šè®¾è®¡å¸ˆå¿…å¤‡å·¥å…·é›†åˆ",images:["/placeholder.jpg"]}}],totalAmount:199,currency:"CNY",status:"pending",createdAt:new Date(Date.now()-36e5).toISOString(),updatedAt:(new Date).toISOString()}]}catch(e){console.error("åŠ è½½è®¢å•å¤±è´¥:",e)}finally{W.value=!1}})()}),(e,t)=>{const s=h("router-link");return b(),i("div",f,[t[5]||(t[5]=r("div",{class:"orders-header"},[r("h1",null,"æˆ‘çš„è®¢å•"),r("p",null,"æŸ¥çœ‹å’Œç®¡ç†æ‚¨çš„è®¢å•å†å²")],-1)),r("div",w,[(b(),i(d,null,o(ee,e=>{return r("button",{key:e.key,class:c(["filter-btn",{active:X.value===e.key}]),onClick:t=>X.value=e.key},[u(p(e.label)+" ",1),r("span",S,p((t=e.key,"all"===t?Z.value.length:Z.value.filter(e=>e.status===t).length)),1)],10,I);var t}),64))]),r("div",C,[W.value?(b(),i("div",D,t[0]||(t[0]=[r("div",{class:"loading-spinner"},null,-1),r("p",null,"æ­£åœ¨åŠ è½½è®¢å•...",-1)]))):te.value.length>0?(b(),i("div",A,[(b(!0),i(d,null,o(te.value,e=>{return b(),i("div",{key:e.id,class:"order-item"},[r("div",O,[r("div",_,[r("h3",P," è®¢å•å·: "+p(e.id.slice(-8).toUpperCase()),1),r("p",j," ä¸‹å•æ—¶é—´: "+p((l=e.createdAt,new Date(l).toLocaleString("zh-CN"))),1)]),r("div",q,[r("span",{class:c(["status-badge",e.status])},p((s=e.status,{pending:"å¾…æ”¯ä»˜",paid:"å·²æ”¯ä»˜",cancelled:"å·²å–æ¶ˆ",refunded:"å·²é€€æ¬¾"}[s]||s)),3)])]),r("div",x,[(b(!0),i(d,null,o(e.items,e=>{var t,a,s,l,n;return b(),i("div",{key:e.id,class:"order-item-detail"},[r("div",N,[r("img",{src:(null==(a=null==(t=e.product)?void 0:t.images)?void 0:a[0])||"/placeholder.jpg",alt:null==(s=e.product)?void 0:s.name},null,8,Y)]),r("div",z,[r("h4",F,p(null==(l=e.product)?void 0:l.name),1),r("p",L,p(null==(n=e.product)?void 0:n.shortDescription),1),r("div",M,[r("span",T,"æ•°é‡: "+p(e.quantity),1),r("span",U,"å•ä»·: Â¥"+p(e.unitPrice),1)])]),r("div",V,"Â¥"+p(e.totalPrice),1)])}),128))]),r("div",$,[r("div",B,[t[1]||(t[1]=r("span",{class:"total-label"},"è®¢å•æ€»é¢:",-1)),r("span",E,"Â¥"+p(e.totalAmount),1)]),r("div",G,["pending"===e.status?(b(),i("button",{key:0,class:"action-btn primary",onClick:t=>(e=>{a.push(`/payment?order=${e.id}`)})(e)}," ç«‹å³æ”¯ä»˜ ",8,H)):v("",!0),"pending"===e.status?(b(),i("button",{key:1,class:"action-btn secondary",onClick:t=>(async e=>{if(confirm("ç¡®å®šè¦å–æ¶ˆè¿™ä¸ªè®¢å•å—ï¼Ÿ"))try{const t=Z.value.findIndex(t=>t.id===e.id);-1!==t&&(Z.value[t].status="cancelled")}catch(t){console.error("å–æ¶ˆè®¢å•å¤±è´¥:",t)}})(e)}," å–æ¶ˆè®¢å• ",8,J)):v("",!0),"paid"===e.status?(b(),i("button",{key:2,class:"action-btn secondary",onClick:t=>(e=>{console.log("ä¸‹è½½è®¢å•äº§å“:",e.id)})(e)},[m(y(g),{class:"icon"}),t[2]||(t[2]=u(" ä¸‹è½½äº§å“ "))],8,K)):v("",!0),r("button",{class:"action-btn secondary",onClick:t=>(e=>{console.log("æŸ¥çœ‹è®¢å•è¯¦æƒ…:",e.id)})(e)}," æŸ¥çœ‹è¯¦æƒ… ",8,Q)])])]);var s,l}),128))])):(b(),i("div",R,[t[4]||(t[4]=r("div",{class:"empty-icon"},"ğŸ“¦",-1)),r("h3",null,p({all:"æš‚æ— è®¢å•",pending:"æš‚æ— å¾…æ”¯ä»˜è®¢å•",paid:"æš‚æ— å·²æ”¯ä»˜è®¢å•",cancelled:"æš‚æ— å·²å–æ¶ˆè®¢å•",refunded:"æš‚æ— å·²é€€æ¬¾è®¢å•"}[X.value]||"æš‚æ— è®¢å•"),1),r("p",null,p({all:"æ‚¨è¿˜æ²¡æœ‰ä»»ä½•è®¢å•ï¼Œå»è´­ä¹°ä¸€äº›äº§å“å§ï¼",pending:"æ‚¨æ²¡æœ‰å¾…æ”¯ä»˜çš„è®¢å•",paid:"æ‚¨æ²¡æœ‰å·²æ”¯ä»˜çš„è®¢å•",cancelled:"æ‚¨æ²¡æœ‰å·²å–æ¶ˆçš„è®¢å•",refunded:"æ‚¨æ²¡æœ‰å·²é€€æ¬¾çš„è®¢å•"}[X.value]||"æš‚æ— ç›¸å…³è®¢å•"),1),m(s,{to:"/products",class:"empty-action"},{default:k(()=>t[3]||(t[3]=[u("å»è´­ä¹°äº§å“")])),_:1,__:[3]})]))])])}}}),[["__scopeId","data-v-355be95d"]]);export{W as default};
