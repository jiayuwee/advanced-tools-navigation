import{d as e,r as s,c as a,w as t,o,V as l,am as c,aq as r,a1 as i,ar as n,ap as d,X as u,a3 as v,t as y,v as p,A as g,C as h,x as k,D as m,G as f,J as C,Y as w,E as b,F as I,B as S,z as T,I as _}from"./vendor-BUZxw6e1.js";import{e as F,u as x,c as Q,_ as E}from"./index-BxdVNC7e.js";const L={class:"tools-view"},M={class:"filters-bar"},q={class:"filters-content"},O={class:"filter-group search-group"},V={class:"search-container"},z={class:"filter-group"},B={class:"filter-group"},j={class:"filter-group"},A={class:"view-options"},D={class:"results-info"},G={class:"results-count"},U={class:"tools-content"},X={key:0,class:"loading-state"},J={key:1,class:"error-state"},P={key:2,class:"tools-grid"},Y=["onClick"],H={class:"card-header"},K={class:"tool-icon"},N=["onClick"],R={class:"card-content"},W={class:"tool-name"},Z={class:"tool-description"},$={class:"tool-tags"},ee={key:0,class:"tag more"},se={class:"card-footer"},ae={class:"tool-stats"},te={class:"stat"},oe={class:"stat"},le={key:3,class:"tools-list"},ce=["onClick"],re={class:"item-left"},ie={class:"tool-icon"},ne={class:"tool-info"},de={class:"tool-name"},ue={class:"tool-description"},ve={class:"tool-meta"},ye={class:"category"},pe={class:"clicks"},ge={class:"item-right"},he={class:"tool-tags"},ke={class:"tool-actions"},me=["onClick"],fe={key:4,class:"empty-state"},Ce={key:0},we={key:1},be={key:2},Ie={class:"empty-actions"};const Se=E(e({__name:"ToolsView",setup(e,{expose:y}){y();const p=F(),g=x(),h=Q(),k=s(),m=s(""),f=s("all"),C=s("name"),w=s(!1),b=s("grid"),I=a(()=>{let e=h.filteredTools;return w.value&&(e=e.filter(e=>e.isFavorite)),e=[...e].sort((e,s)=>{switch(C.value){case"click_count":return s.clickCount-e.clickCount;case"created_at":return new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime();default:return e.name.localeCompare(s.name)}}),e});t(()=>p.query,e=>{e.category&&"string"==typeof e.category&&(f.value=e.category),e.search&&"string"==typeof e.search&&(m.value=e.search,h.setSearchQuery(e.search))},{immediate:!0}),t(f,e=>{h.setSelectedCategory(e);const s={...p.query};"all"===e?delete s.category:s.category=e,g.replace({query:s})}),t(m,e=>{const s={...p.query};e?s.search=e:delete s.search,g.replace({query:s})}),o(async()=>{h.initialized||await h.initialize()});const S={route:p,router:g,toolsStore:h,searchInput:k,searchQuery:m,selectedCategory:f,sortBy:C,showFavoritesOnly:w,viewMode:b,filteredTools:I,handleSearch:()=>{h.setSearchQuery(m.value)},clearSearch:()=>{m.value="",h.setSearchQuery("")},handleToolClick:async e=>{await h.incrementClickCount(e.id),window.open(e.url,"_blank","noopener,noreferrer")},retryLoad:async()=>{h.clearError(),await h.initialize()},get SearchIcon(){return v},get XIcon(){return u},get GridIcon(){return d},get ListIcon(){return n},get StarIcon(){return i},get EyeIcon(){return r},get FolderIcon(){return c},get ExternalLinkIcon(){return l}};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),[["render",function(e,s,a,t,o,l){return _(),y("div",L,[p("div",M,[p("div",q,[p("div",O,[p("div",V,[g(t.SearchIcon,{class:"search-icon"}),h(p("input",{ref:"searchInput","onUpdate:modelValue":s[0]||(s[0]=e=>t.searchQuery=e),type:"text",placeholder:"搜索工具...",class:"search-input",onInput:t.handleSearch},null,544),[[m,t.searchQuery]]),t.searchQuery?(_(),y("button",{key:0,class:"clear-search",onClick:t.clearSearch},[g(t.XIcon,{class:"icon"})])):k("",!0)])]),p("div",z,[s[7]||(s[7]=p("label",{class:"filter-label"},"排序：",-1)),h(p("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>t.sortBy=e),class:"filter-select"},s[6]||(s[6]=[p("option",{value:"name"},"名称",-1),p("option",{value:"click_count"},"热度",-1),p("option",{value:"created_at"},"最新",-1)]),512),[[f,t.sortBy]])]),p("div",B,[p("button",{class:C(["filter-button",{active:t.showFavoritesOnly}]),onClick:s[2]||(s[2]=e=>t.showFavoritesOnly=!t.showFavoritesOnly)},[g(t.StarIcon,{class:"icon"}),s[8]||(s[8]=w(" 只看收藏 "))],2)]),p("div",j,[p("div",A,[p("button",{class:C(["view-button",{active:"grid"===t.viewMode}]),onClick:s[3]||(s[3]=e=>t.viewMode="grid")},[g(t.GridIcon,{class:"icon"})],2),p("button",{class:C(["view-button",{active:"list"===t.viewMode}]),onClick:s[4]||(s[4]=e=>t.viewMode="list")},[g(t.ListIcon,{class:"icon"})],2)])]),p("div",D,[p("span",G," 找到 "+b(t.filteredTools.length)+" 个工具 ",1)])])]),p("div",U,[t.toolsStore.loading?(_(),y("div",X,s[9]||(s[9]=[p("div",{class:"loading-spinner"},null,-1),p("p",null,"正在加载工具...",-1)]))):t.toolsStore.error?(_(),y("div",J,[s[10]||(s[10]=p("div",{class:"error-icon"},"❌",-1)),s[11]||(s[11]=p("h3",null,"加载失败",-1)),p("p",null,b(t.toolsStore.error),1),p("button",{class:"retry-button",onClick:t.retryLoad},"重试")])):t.filteredTools.length>0&&"grid"===t.viewMode?(_(),y("div",P,[(_(!0),y(I,null,S(t.filteredTools,e=>(_(),y("div",{key:e.id,class:"tool-card",onClick:s=>t.handleToolClick(e)},[p("div",H,[p("div",K,b(e.icon||"🔧"),1),p("button",{class:C(["favorite-button",{active:e.isFavorite}]),onClick:T(s=>t.toolsStore.toggleFavorite(e.id),["stop"])},[g(t.StarIcon,{class:"icon"})],10,N)]),p("div",R,[p("h3",W,b(e.name),1),p("p",Z,b(e.description),1),p("div",$,[(_(!0),y(I,null,S(e.tags.slice(0,3),e=>(_(),y("span",{key:e.id,class:"tag"},b(e.name),1))),128)),e.tags.length>3?(_(),y("span",ee," +"+b(e.tags.length-3),1)):k("",!0)])]),p("div",se,[p("div",ae,[p("span",te,[g(t.EyeIcon,{class:"stat-icon"}),w(" "+b(e.clickCount),1)]),p("span",oe,[g(t.FolderIcon,{class:"stat-icon"}),w(" "+b(e.category.name),1)])]),g(t.ExternalLinkIcon,{class:"external-icon"})])],8,Y))),128))])):t.filteredTools.length>0&&"list"===t.viewMode?(_(),y("div",le,[(_(!0),y(I,null,S(t.filteredTools,e=>(_(),y("div",{key:e.id,class:"tool-item",onClick:s=>t.handleToolClick(e)},[p("div",re,[p("div",ie,b(e.icon||"🔧"),1),p("div",ne,[p("h3",de,b(e.name),1),p("p",ue,b(e.description),1),p("div",ve,[p("span",ye,b(e.category.name),1),s[12]||(s[12]=p("span",{class:"separator"},"•",-1)),p("span",pe,b(e.clickCount)+" 次访问",1)])])]),p("div",ge,[p("div",he,[(_(!0),y(I,null,S(e.tags.slice(0,2),e=>(_(),y("span",{key:e.id,class:"tag"},b(e.name),1))),128))]),p("div",ke,[p("button",{class:C(["favorite-button",{active:e.isFavorite}]),onClick:T(s=>t.toolsStore.toggleFavorite(e.id),["stop"])},[g(t.StarIcon,{class:"icon"})],10,me),g(t.ExternalLinkIcon,{class:"external-icon"})])])],8,ce))),128))])):(_(),y("div",fe,[s[13]||(s[13]=p("div",{class:"empty-icon"},"🔍",-1)),s[14]||(s[14]=p("h3",null,"未找到相关工具",-1)),t.searchQuery?(_(),y("p",Ce,' 没有找到包含 "'+b(t.searchQuery)+'" 的工具，尝试使用其他关键词搜索 ',1)):"all"!==t.selectedCategory?(_(),y("p",we," 该分类下暂无工具，请选择其他分类 ")):(_(),y("p",be,"暂无工具数据，请稍后再试")),p("div",Ie,[t.searchQuery?(_(),y("button",{key:0,class:"btn btn-primary",onClick:t.clearSearch}," 清除搜索条件 ")):k("",!0),"all"!==t.selectedCategory?(_(),y("button",{key:1,class:"btn btn-secondary",onClick:s[5]||(s[5]=e=>t.selectedCategory="all")}," 查看全部分类 ")):k("",!0)])]))])])}],["__scopeId","data-v-1a0710d1"],["__file","/mnt/persist/workspace/src/views/ToolsView.vue"]]);export{Se as default};
