import{d as e,r as s,_ as a,a5 as l,t as o,v as n,z as r,x as t,C as i,D as d,E as u,Y as c,A as m,a6 as v,I as p}from"./vendor-BUZxw6e1.js";import{_ as f}from"./index-BxdVNC7e.js";const g={class:"forgot-password-view"},w={class:"form-group"},b=["disabled"],_=["disabled"],h={key:0,class:"loading-spinner"},y={key:0,class:"error-message"},k={key:1,class:"success-state"},C={class:"success-actions"},P=["disabled"],x={class:"forgot-footer"};const I=f(e({__name:"ForgotPasswordView",setup(e,{expose:l}){l();const o=s(!1),n=s(null),r=s(""),t=s(!1),i=s(0);let d=null;const u=()=>{i.value=60,d=setInterval(()=>{i.value--,i.value<=0&&(clearInterval(d),d=null)},1e3)};a(()=>{d&&clearInterval(d)});const c={loading:o,error:n,email:r,emailSent:t,resendCooldown:i,get cooldownTimer(){return d},set cooldownTimer(e){d=e},handleForgotPassword:async()=>{try{o.value=!0,n.value=null,await new Promise(e=>setTimeout(e,1e3)),t.value=!0,u()}catch(e){n.value=e instanceof Error?e.message:"发送失败，请重试"}finally{o.value=!1}},handleResend:async()=>{if(!(i.value>0))try{o.value=!0,n.value=null,await new Promise(e=>setTimeout(e,500)),u()}catch(e){n.value=e instanceof Error?e.message:"重新发送失败，请重试"}finally{o.value=!1}},startResendCooldown:u};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}}),[["render",function(e,s,a,f,I,S){const F=l("router-link");return p(),o("div",g,[s[10]||(s[10]=n("div",{class:"forgot-header"},[n("h1",null,"忘记密码"),n("p",null,"输入您的邮箱地址，我们将发送重置密码的链接")],-1)),f.emailSent?(p(),o("div",k,[s[5]||(s[5]=n("div",{class:"success-icon"},"✅",-1)),s[6]||(s[6]=n("h3",null,"邮件已发送",-1)),n("p",null,[s[2]||(s[2]=c(" 我们已向 ")),n("strong",null,u(f.email),1),s[3]||(s[3]=c(" 发送了重置密码的链接 "))]),s[7]||(s[7]=n("p",{class:"help-text"}," 请检查您的邮箱（包括垃圾邮件文件夹），并点击链接重置密码 ",-1)),n("div",C,[n("button",{class:"resend-btn",disabled:f.resendCooldown>0,onClick:f.handleResend},u(f.resendCooldown>0?`${f.resendCooldown}秒后可重发`:"重新发送"),9,P),m(F,{to:"/auth/login",class:"back-btn"},{default:v(()=>s[4]||(s[4]=[c("返回登录")])),_:1,__:[4]})])])):(p(),o("form",{key:0,class:"forgot-form",onSubmit:r(f.handleForgotPassword,["prevent"])},[n("div",w,[s[1]||(s[1]=n("label",{for:"email"},"邮箱地址",-1)),i(n("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=e=>f.email=e),type:"email",required:"",placeholder:"请输入您的邮箱地址",disabled:f.loading},null,8,b),[[d,f.email]])]),n("button",{type:"submit",class:"submit-btn",disabled:f.loading||!f.email},[f.loading?(p(),o("div",h)):t("",!0),n("span",null,u(f.loading?"发送中...":"发送重置链接"),1)],8,_),f.error?(p(),o("div",y,u(f.error),1)):t("",!0)],32)),n("div",x,[n("p",null,[s[9]||(s[9]=c(" 记起密码了？ ")),m(F,{to:"/auth/login",class:"login-link"},{default:v(()=>s[8]||(s[8]=[c("立即登录")])),_:1,__:[8]})])])])}],["__scopeId","data-v-df6974df"],["__file","/mnt/persist/workspace/src/views/auth/ForgotPasswordView.vue"]]);export{I as default};
