import{d as s,r as a,o as l,Z as e,m as t,q as n,H as c,C as i,t as u,G as o}from"./vendor-C-I1M3bb.js";import{_ as v}from"./index-B0BAN12T.js";const r={class:"config-test-page"},d={class:"container"},p={class:"test-sections"},m={class:"test-section"},b={class:"config-grid"},f={class:"value"},h={class:"value"},I={class:"config-item"},g={class:"value"},w={class:"config-item"},E={class:"value"},C={class:"test-section"},_={class:"connection-status"},x={class:"status-icon"},A={class:"status-text"},S=["disabled"],T={key:0,class:"error-details"},y={class:"test-section"},N={class:"info-grid"},z={class:"info-item"},J={class:"value"},M={class:"info-item"},O={class:"value"},V={class:"info-item"},k={class:"value"},Z={class:"test-status-bar"},j=v(s({__name:"ConfigTestView",setup(s){const v=a("https://fytiwsutzgmygfxnqoft.supabase.co"),j=a("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5dGl3c3V0emdteWdmeG5xb2Z0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA4MDM1ODcsImV4cCI6MjA2NjM3OTU4N30.LM9vazR9QCZ4vLC_Q1lJmtCj3pEVqM6vpW4TKzntAQA"),L=a(void 0),U=a("production"),D=a(""),B=a(navigator.userAgent),G=a(window.location.href),Q=a(!1),R=a({class:"unknown",icon:"⏳",text:"未测试"}),$=a(""),q=()=>{D.value=(new Date).toLocaleString("zh-CN")},H=async()=>{Q.value=!0,$.value="";try{if(!v.value||!j.value)throw new Error("环境变量未配置");const s=await fetch(`${v.value}/rest/v1/`,{headers:{apikey:j.value,Authorization:`Bearer ${j.value}`}});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);R.value={class:"success",icon:"✅",text:"Supabase 连接成功"}}catch(s){R.value={class:"error",icon:"❌",text:"Supabase 连接失败"},$.value=s instanceof Error?s.message:String(s)}finally{Q.value=!1}},P=()=>{window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})};let X=null;return l(()=>{q(),X=setInterval(q,1e3),setTimeout(H,1e3)}),e(()=>{X&&clearInterval(X)}),(s,a)=>(o(),t("div",r,[n("div",d,[a[13]||(a[13]=n("h1",null,"🔧 配置测试页面",-1)),a[14]||(a[14]=n("p",{class:"subtitle"},"检查环境变量和配置是否正确",-1)),n("div",p,[n("div",m,[a[4]||(a[4]=n("h2",null,"📋 环境变量检查",-1)),n("div",b,[n("div",{class:c(["config-item",{success:v.value,error:!v.value}])},[a[0]||(a[0]=n("span",{class:"label"},"VITE_SUPABASE_URL:",-1)),n("span",f,i(v.value||"❌ 未设置"),1)],2),n("div",{class:c(["config-item",{success:j.value,error:!j.value}])},[a[1]||(a[1]=n("span",{class:"label"},"VITE_SUPABASE_ANON_KEY:",-1)),n("span",h,i(j.value?"✅ 已设置":"❌ 未设置"),1)],2),n("div",I,[a[2]||(a[2]=n("span",{class:"label"},"NODE_ENV:",-1)),n("span",g,i(L.value),1)]),n("div",w,[a[3]||(a[3]=n("span",{class:"label"},"MODE:",-1)),n("span",E,i(U.value),1)])])]),n("div",C,[a[6]||(a[6]=n("h2",null,"🔗 Supabase 连接测试",-1)),n("div",_,[n("div",{class:c(["status-item",R.value.class])},[n("span",x,i(R.value.icon),1),n("span",A,i(R.value.text),1)],2),n("button",{onClick:H,class:"test-btn",disabled:Q.value},i(Q.value?"测试中...":"重新测试连接"),9,S)]),$.value?(o(),t("div",T,[a[5]||(a[5]=n("h3",null,"错误详情:",-1)),n("pre",null,i($.value),1)])):u("",!0)]),n("div",y,[a[10]||(a[10]=n("h2",null,"ℹ️ 系统信息",-1)),n("div",N,[n("div",z,[a[7]||(a[7]=n("span",{class:"label"},"当前时间:",-1)),n("span",J,i(D.value),1)]),n("div",M,[a[8]||(a[8]=n("span",{class:"label"},"用户代理:",-1)),n("span",O,i(B.value),1)]),n("div",V,[a[9]||(a[9]=n("span",{class:"label"},"页面URL:",-1)),n("span",k,i(G.value),1)])])]),n("div",{class:"test-section"},[a[12]||(a[12]=n("h2",null,"📊 状态栏测试",-1)),n("div",{class:"statusbar-test"},[a[11]||(a[11]=n("p",null,"如果配置正确，您应该能在页面底部看到状态栏。",-1)),n("button",{onClick:P,class:"scroll-btn"},"滚动到底部查看状态栏")])])])]),n("div",Z,[a[15]||(a[15]=n("span",null,"🧪 配置测试状态栏",-1)),n("span",null,i(D.value),1),n("span",null,i(R.value.text),1)])]))}}),[["__scopeId","data-v-fa28bf68"]]);export{j as default};
