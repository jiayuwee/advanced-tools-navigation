import{d as e,r as a,c as l,o as s,m as u,q as i,y as o,u as t,D as r,x as n,t as v,G as c,I as d,A as m}from"./vendor-B_bmgS9f.js";import{e as p,_ as f}from"./index-C5n2Pyp_.js";
/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=p("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),y={class:"profile-view"},h={class:"profile-content"},g={class:"avatar-section"},w={class:"avatar-container"},U=["src","alt"],x={class:"avatar-info"},k={class:"form-section"},N={class:"form-row"},V={class:"form-group"},_=["disabled"],j={class:"form-group"},C=["disabled"],I={class:"form-group"},E={class:"form-group"},L=["disabled"],P={class:"form-row"},T={class:"form-group"},q=["disabled"],O={class:"form-group"},R=["disabled"],z={class:"form-actions"},A=["disabled"],D=["disabled"],G={key:0,class:"loading-spinner"},H={key:0,class:"error-message"},M={key:1,class:"success-message"},S=f(e({__name:"ProfileView",setup(e){const p=a(!1),f=a(null),S=a(!1),B=a(),F=a({id:"",email:"",username:"",fullName:"",avatarUrl:"",bio:"",website:"",location:""}),J=a({fullName:"",username:"",email:"",bio:"",website:"",location:""}),K=a({fullName:"",username:"",email:"",bio:"",website:"",location:""}),Q=l(()=>Object.keys(J.value).some(e=>J.value[e]!==K.value[e])),W=async()=>{try{p.value=!0,f.value=null,S.value=!1,await new Promise(e=>setTimeout(e,1e3)),F.value={...F.value,...J.value},K.value={...J.value},S.value=!0,setTimeout(()=>{S.value=!1},3e3)}catch(e){f.value=e instanceof Error?e.message:"保存失败，请重试"}finally{p.value=!1}},X=()=>{J.value={...K.value},f.value=null,S.value=!1},Y=()=>{var e;null==(e=B.value)||e.click()},Z=async e=>{var a;const l=null==(a=e.target.files)?void 0:a[0];if(l)try{p.value=!0,f.value=null,await new Promise(e=>setTimeout(e,1e3));const e=URL.createObjectURL(l);F.value.avatarUrl=e}catch(s){f.value=s instanceof Error?s.message:"头像上传失败"}finally{p.value=!1}};return s(()=>{(async()=>{try{p.value=!0,f.value=null;const e={id:"user-1",email:"user@example.com",username:"user123",fullName:"张三",avatarUrl:"",bio:"这是我的个人简介",website:"https://example.com",location:"北京"};F.value=e,J.value={...e},K.value={...e}}catch(e){f.value=e instanceof Error?e.message:"加载用户资料失败"}finally{p.value=!1}})()}),(e,a)=>(m(),u("div",y,[a[14]||(a[14]=i("div",{class:"profile-header"},[i("h1",null,"个人资料"),i("p",null,"管理您的个人信息和偏好设置")],-1)),i("div",h,[i("div",g,[i("div",w,[i("img",{src:F.value.avatarUrl||"/placeholder-user.jpg",alt:F.value.fullName,class:"avatar"},null,8,U),i("button",{class:"avatar-upload",onClick:Y},[o(t(b),{class:"icon"})]),i("input",{ref_key:"fileInput",ref:B,type:"file",accept:"image/*",style:{display:"none"},onChange:Z},null,544)]),i("div",x,[i("h3",null,r(F.value.fullName||"未设置姓名"),1),i("p",null,r(F.value.email),1)])]),i("form",{class:"profile-form",onSubmit:n(W,["prevent"])},[i("div",k,[a[13]||(a[13]=i("h3",null,"基本信息",-1)),i("div",N,[i("div",V,[a[6]||(a[6]=i("label",{for:"fullName"},"姓名",-1)),c(i("input",{id:"fullName","onUpdate:modelValue":a[0]||(a[0]=e=>J.value.fullName=e),type:"text",placeholder:"请输入您的姓名",disabled:p.value},null,8,_),[[d,J.value.fullName]])]),i("div",j,[a[7]||(a[7]=i("label",{for:"username"},"用户名",-1)),c(i("input",{id:"username","onUpdate:modelValue":a[1]||(a[1]=e=>J.value.username=e),type:"text",placeholder:"请输入用户名",disabled:p.value},null,8,C),[[d,J.value.username]])])]),i("div",I,[a[8]||(a[8]=i("label",{for:"email"},"邮箱地址",-1)),c(i("input",{id:"email","onUpdate:modelValue":a[2]||(a[2]=e=>J.value.email=e),type:"email",disabled:"",class:"readonly"},null,512),[[d,J.value.email]]),a[9]||(a[9]=i("small",{class:"form-hint"},"邮箱地址不可修改",-1))]),i("div",E,[a[10]||(a[10]=i("label",{for:"bio"},"个人简介",-1)),c(i("textarea",{id:"bio","onUpdate:modelValue":a[3]||(a[3]=e=>J.value.bio=e),rows:"4",placeholder:"介绍一下您自己...",disabled:p.value},null,8,L),[[d,J.value.bio]])]),i("div",P,[i("div",T,[a[11]||(a[11]=i("label",{for:"website"},"个人网站",-1)),c(i("input",{id:"website","onUpdate:modelValue":a[4]||(a[4]=e=>J.value.website=e),type:"url",placeholder:"https://example.com",disabled:p.value},null,8,q),[[d,J.value.website]])]),i("div",O,[a[12]||(a[12]=i("label",{for:"location"},"所在地",-1)),c(i("input",{id:"location","onUpdate:modelValue":a[5]||(a[5]=e=>J.value.location=e),type:"text",placeholder:"请输入您的所在地",disabled:p.value},null,8,R),[[d,J.value.location]])])])]),i("div",z,[i("button",{type:"button",class:"btn btn-secondary",disabled:p.value,onClick:X}," 重置 ",8,A),i("button",{type:"submit",class:"btn btn-primary",disabled:p.value||!Q.value},[p.value?(m(),u("div",G)):v("",!0),i("span",null,r(p.value?"保存中...":"保存更改"),1)],8,D)]),f.value?(m(),u("div",H,r(f.value),1)):v("",!0),S.value?(m(),u("div",M,"个人资料已成功更新！")):v("",!0)],32)])]))}}),[["__scopeId","data-v-96327e47"]]);export{S as default};
