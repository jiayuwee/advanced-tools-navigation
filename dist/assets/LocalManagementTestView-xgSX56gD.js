import{d as e,r as t,c as s,o as a,aN as r,aO as n,R as o,U as c,t as l,v as i,E as u,F as d,B as m,J as p,x as g,y as f,I as y}from"./vendor-BUZxw6e1.js";import{u as v,L as w}from"./localManagement-DWH7U7jI.js";import{_ as h}from"./index-BxdVNC7e.js";const T={class:"local-management-test"},b={class:"test-results"},k={class:"test-summary"},I={class:"summary-item"},C={class:"value"},L={class:"summary-item"},E={class:"value success"},S={class:"summary-item"},D={class:"value error"},O={class:"test-list"},U={class:"test-info"},R={class:"test-name"},j={class:"test-description"},_={class:"test-status"},P={key:0,class:"test-error"};const x=h(e({__name:"LocalManagementTestView",setup(e,{expose:l}){l();const i=v(),u=t([]),d=t(!1),m=s(()=>u.value.length),p=s(()=>u.value.filter(e=>"passed"===e.status).length),g=s(()=>u.value.filter(e=>"failed"===e.status).length),f=[{name:"æœ¬åœ°å­˜å‚¨æœåŠ¡åˆå§‹åŒ–",description:"æµ‹è¯•æœ¬åœ°å­˜å‚¨æœåŠ¡æ˜¯å¦æ­£ç¡®åˆå§‹åŒ–",test:async()=>{const e=w.getUserPreferences();if(!e||"object"!=typeof e)throw new Error("ç”¨æˆ·åå¥½è®¾ç½®åˆå§‹åŒ–å¤±è´¥");return!0}},{name:"æ·»åŠ æœ¬åœ°å·¥å…·",description:"æµ‹è¯•æ·»åŠ æœ¬åœ°å·¥å…·åŠŸèƒ½",test:async()=>{const e=i.addLocalTool({name:"æµ‹è¯•å·¥å…·",description:"è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å·¥å…·",url:"https://test.com",icon:"ğŸ§ª",categoryId:"test-category",tags:["test"],isFeatured:!1,clickCount:0});if(!e||!e.localId)throw new Error("æ·»åŠ æœ¬åœ°å·¥å…·å¤±è´¥");return!0}},{name:"æ›´æ–°æœ¬åœ°å·¥å…·",description:"æµ‹è¯•æ›´æ–°æœ¬åœ°å·¥å…·åŠŸèƒ½",test:async()=>{const e=w.getLocalTools();if(0===e.length)throw new Error("æ²¡æœ‰å¯æ›´æ–°çš„å·¥å…·");const t=e[0];if(!i.updateLocalTool(t.id||t.localId,{name:"æ›´æ–°åçš„å·¥å…·åç§°"}))throw new Error("æ›´æ–°æœ¬åœ°å·¥å…·å¤±è´¥");return!0}},{name:"åˆ é™¤æœ¬åœ°å·¥å…·",description:"æµ‹è¯•åˆ é™¤æœ¬åœ°å·¥å…·åŠŸèƒ½",test:async()=>{const e=w.getLocalTools();if(0===e.length)throw new Error("æ²¡æœ‰å¯åˆ é™¤çš„å·¥å…·");const t=e[0];if(!i.deleteLocalTool(t.id||t.localId))throw new Error("åˆ é™¤æœ¬åœ°å·¥å…·å¤±è´¥");return!0}},{name:"ç”¨æˆ·åå¥½è®¾ç½®",description:"æµ‹è¯•ç”¨æˆ·åå¥½è®¾ç½®çš„ä¿å­˜å’Œè¯»å–",test:async()=>{const e=w.getUserPreferences();i.updateUserPreferences({theme:"dark",autoSync:!1});const t=w.getUserPreferences();if("dark"!==t.theme||!1!==t.autoSync)throw new Error("ç”¨æˆ·åå¥½è®¾ç½®æ›´æ–°å¤±è´¥");return i.updateUserPreferences(e),!0}},{name:"ç¦»çº¿é˜Ÿåˆ—ç®¡ç†",description:"æµ‹è¯•ç¦»çº¿æ“ä½œé˜Ÿåˆ—çš„ç®¡ç†",test:async()=>{const e=w.getOfflineQueue().length;i.addLocalTool({name:"é˜Ÿåˆ—æµ‹è¯•å·¥å…·",description:"æµ‹è¯•ç¦»çº¿é˜Ÿåˆ—",url:"https://queue-test.com",icon:"ğŸ“‹",categoryId:"test",tags:[],isFeatured:!1,clickCount:0});if(w.getOfflineQueue().length<=e)throw new Error("ç¦»çº¿é˜Ÿåˆ—æœªæ­£ç¡®æ›´æ–°");return!0}},{name:"å­˜å‚¨ä½¿ç”¨æƒ…å†µ",description:"æµ‹è¯•å­˜å‚¨ä½¿ç”¨æƒ…å†µçš„è®¡ç®—",test:async()=>{const e=w.getStorageInfo();if(!e||"number"!=typeof e.used||"number"!=typeof e.total)throw new Error("å­˜å‚¨ä½¿ç”¨æƒ…å†µè®¡ç®—å¤±è´¥");if(e.percentage<0||e.percentage>100)throw new Error("å­˜å‚¨ä½¿ç”¨ç™¾åˆ†æ¯”è®¡ç®—é”™è¯¯");return!0}},{name:"æ•°æ®å¯¼å‡ºåŠŸèƒ½",description:"æµ‹è¯•æœ¬åœ°æ•°æ®å¯¼å‡ºåŠŸèƒ½",test:async()=>{try{const e={tools:w.getLocalTools(),categories:w.getLocalCategories(),preferences:w.getUserPreferences(),exportTime:(new Date).toISOString()},t=JSON.stringify(e,null,2);if(!t||t.length<10)throw new Error("å¯¼å‡ºæ•°æ®ä¸ºç©ºæˆ–æ ¼å¼é”™è¯¯");return!0}catch(e){throw new Error(`æ•°æ®å¯¼å‡ºå¤±è´¥: ${e}`)}}}],y=()=>{u.value=f.map(e=>({name:e.name,description:e.description,status:"pending"}))};a(()=>{y()});const h={localStore:i,testResults:u,isRunning:d,totalTests:m,passedTests:p,failedTests:g,testCases:f,initializeTests:y,runAllTests:async()=>{if(!d.value){d.value=!0;for(let t=0;t<f.length;t++){const s=f[t],a=u.value[t];a.status="running",a.error=void 0;const r=Date.now();try{await s.test(),a.status="passed",a.duration=Date.now()-r}catch(e){a.status="failed",a.error=e instanceof Error?e.message:String(e),a.duration=Date.now()-r}await new Promise(e=>setTimeout(e,100))}d.value=!1}},clearTestData:()=>{confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æµ‹è¯•æ•°æ®å—ï¼Ÿ")&&(w.clearAllLocalData(),i.initialize(),alert("æµ‹è¯•æ•°æ®å·²æ¸…ç©º"))},generateTestData:()=>{for(let e=1;e<=3;e++)i.addLocalTool({name:`æµ‹è¯•å·¥å…· ${e}`,description:`è¿™æ˜¯ç¬¬ ${e} ä¸ªæµ‹è¯•å·¥å…·`,url:`https://test-tool-${e}.com`,icon:"ğŸ”§",categoryId:"test-category",tags:["test",`tool${e}`],isFeatured:1===e,clickCount:Math.floor(100*Math.random())});alert("æµ‹è¯•æ•°æ®å·²ç”Ÿæˆ")},exportTestResults:()=>{const e={summary:{total:m.value,passed:p.value,failed:g.value,timestamp:(new Date).toISOString()},tests:u.value},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`test-results-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},get CheckCircleIcon(){return c},get XCircleIcon(){return o},get LoaderIcon(){return n},get CircleIcon(){return r}};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),[["render",function(e,t,s,a,r,n){return y(),l("div",T,[i("div",{class:"test-header"},[t[0]||(t[0]=i("h2",null,"æœ¬åœ°ç®¡ç†åŠŸèƒ½æµ‹è¯•",-1)),i("button",{class:"btn primary",onClick:a.runAllTests},"è¿è¡Œæ‰€æœ‰æµ‹è¯•")]),i("div",b,[i("div",k,[i("div",I,[t[1]||(t[1]=i("span",{class:"label"},"æ€»æµ‹è¯•æ•°:",-1)),i("span",C,u(a.totalTests),1)]),i("div",L,[t[2]||(t[2]=i("span",{class:"label"},"é€šè¿‡:",-1)),i("span",E,u(a.passedTests),1)]),i("div",S,[t[3]||(t[3]=i("span",{class:"label"},"å¤±è´¥:",-1)),i("span",D,u(a.failedTests),1)])]),i("div",O,[(y(!0),l(d,null,m(a.testResults,e=>(y(),l("div",{key:e.name,class:p(["test-item",{success:"passed"===e.status,error:"failed"===e.status,running:"running"===e.status}])},[i("div",U,[i("div",R,u(e.name),1),i("div",j,u(e.description),1)]),i("div",_,["passed"===e.status?(y(),f(a.CheckCircleIcon,{key:0,class:"icon success"})):"failed"===e.status?(y(),f(a.XCircleIcon,{key:1,class:"icon error"})):"running"===e.status?(y(),f(a.LoaderIcon,{key:2,class:"icon spinning"})):(y(),f(a.CircleIcon,{key:3,class:"icon pending"}))]),e.error?(y(),l("div",P,u(e.error),1)):g("",!0)],2))),128))])]),i("div",{class:"test-actions"},[i("button",{class:"btn secondary",onClick:a.clearTestData},"æ¸…ç©ºæµ‹è¯•æ•°æ®"),i("button",{class:"btn secondary",onClick:a.generateTestData},"ç”Ÿæˆæµ‹è¯•æ•°æ®"),i("button",{class:"btn secondary",onClick:a.exportTestResults},"å¯¼å‡ºæµ‹è¯•ç»“æœ")])])}],["__scopeId","data-v-38abe91c"],["__file","/mnt/persist/workspace/src/views/admin/LocalManagementTestView.vue"]]);export{x as default};
